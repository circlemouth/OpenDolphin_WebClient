<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>04C4 å¤–æ¥ API ã‚®ãƒ£ãƒƒãƒ—å®Ÿè£… è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ</title>
    <style>
      body { font-family: "Hiragino Sans", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, sans-serif; line-height: 1.6; margin: 24px; background-color: #e9f0f2; color: #1f2a30; }
      .monitor-wrapper { max-width: 1180px; margin: 0 auto; padding: 32px; background: #ffffff; border: 1px solid #c4d3d7; }
      .monitor-header { display: flex; flex-direction: column; gap: 8px; margin-bottom: 24px; }
      .monitor-title { font-size: 26px; font-weight: 700; letter-spacing: 0.04em; color: #1f2a30; }
      .monitor-description { font-size: 14px; color: #3a4b53; }
      .score-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 24px; }
      .score-card { background: #eef3f4; border: 1px solid #c4d3d7; padding: 16px; border-radius: 6px; }
      .score-card h2 { margin: 0 0 6px; font-size: 18px; display: flex; align-items: center; gap: 8px; }
      .score-card .total { font-size: 28px; font-weight: 700; }
      .score-card .meta { font-size: 12px; color: #3a4b53; }
      .radar-wrap { display: flex; gap: 12px; align-items: center; margin-top: 8px; }
      .radar { width: 180px; height: 180px; }
      .radar-legend { font-size: 12px; color: #2c3a40; }
      table.monitor-report { width: 100%; border-collapse: collapse; table-layout: fixed; background: #ffffff; border: 1px solid #c4d3d7; }
      col.timestamp-column { width: 160px; }
      col.agent-column { width: calc((100% - 160px) / 3); }
      th, td { border: 1px solid #c4d3d7; padding: 12px; vertical-align: top; background-color: #ffffff; }
      th { background: #d8e6e9; text-align: left; font-size: 13px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; color: #2c3a40; }
      tbody tr:nth-child(even) td { background-color: #eef3f4; }
      .status-badge { display: inline-block; font-size: 10px; font-weight: 600; letter-spacing: 0.02em; padding: 1px 6px; background: #d8e6e9; border: 1px solid #b8c9cd; color: #1f2a30; white-space: nowrap; line-height: 1.3; }
      .status-badge--completed { background: #c3d4d8; border-color: #aabfc5; }
      .status-badge--risk { background: #f8d7da; border-color: #f1aeb5; }
      .status-badge--gap { background: #fef3cd; border-color: #f0e5a5; }
      .agent-meta { display: block; margin-bottom: 8px; line-height: 1.5; }
      .agent-meta .agent-label { display: inline; font-size: 13px; color: #3a4b53; }
      details { display: block; margin: 0; }
      details summary { list-style: none; cursor: pointer; font-weight: 600; font-size: 13px; }
      pre { white-space: pre-wrap; word-break: break-word; margin: 8px 0 0; font-size: 12px; line-height: 1.55; color: #1f2a30; background: #f2f6f7; border: 1px solid #c4d3d7; padding: 12px; }
      .badge { display: inline-block; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 700; }
      .badge--gold { background: #fff4c4; color: #8a6d00; border: 1px solid #e5c100; }
      .badge--bronze { background: #f7e4d3; color: #7a4b1f; border: 1px solid #d0a67a; }
      .badge--none { background: #e3edf0; color: #54626b; border: 1px solid #cdd9dd; }
    </style>
  </head>
  <body>
    <div class="monitor-wrapper">
      <header class="monitor-header">
        <h1 class="monitor-title">04C4 å¤–æ¥ API ã‚®ãƒ£ãƒƒãƒ—å®Ÿè£… è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ</h1>
        <p class="monitor-description">å¯¾è±¡ãƒ–ãƒ©ãƒ³ãƒ: task-1765197911805-1ccc24 / 305b57 / 159354ã€‚ã‚¿ã‚¹ã‚¯æ¦‚è¦: `/api01rv2/claim/outpatient/mock` ã¨ `/orca21/medicalmodv2/outpatient` ã®å®Ÿè£…ãƒ»telemetry æ•´åˆãƒ»msw/fixturesæ›´æ–°ãƒ»DOC_STATUSåæ˜ ã€‚</p>
      </header>

      <div class="score-grid">
        <div class="score-card">
          <h2>ğŸ† task-1765197911895-305b57</h2>
          <div class="total">551 / 600</div>
          <div class="meta">ç·åˆ: 92/100 | ãƒ¡ãƒ€ãƒ«: ğŸ¥‡</div>
          <div class="radar-wrap">
            <svg class="radar" data-scores="93,90,95,93,90,90" viewBox="0 0 180 180"></svg>
            <div class="radar-legend">
              <div>è»¸: æ©Ÿèƒ½åˆç†æ€§ / ç·»å¯†æ€§ / ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªæ•´åˆ / ç›£æŸ»ãƒ»ãƒˆãƒ¬ãƒ¼ã‚¹ / ãƒ†ã‚¹ãƒˆ / ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</div>
              <div>ä¸»ãªé•·æ‰€: SessionAuditDispatcherã§traceId/requestIdã‚’è£œå®Œã—auditç™ºç«ã€`recordsReturned`ãƒ»`telemetryFunnelStage`ã‚’ä¸¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§æ•´å‚™ã€JUnitå¥‘ç´„ãƒ†ã‚¹ãƒˆè¿½åŠ ã€httpClient/docæ•´åˆã€‚</div>
            </div>
          </div>
        </div>
        <div class="score-card">
          <h2>ğŸ¥‰ task-1765197911805-1ccc24</h2>
          <div class="total">320 / 600</div>
          <div class="meta">ç·åˆ: 53/100 | ãƒ¡ãƒ€ãƒ«: ğŸ¥‰</div>
          <div class="radar-wrap">
            <svg class="radar" data-scores="68,60,62,50,20,60" viewBox="0 0 180 180"></svg>
            <div class="radar-legend">
              <div>é•·æ‰€: `recordsReturned`ã¨`telemetryFunnelStage`ä»˜ä¸ã§æœ€ä½é™ã®telemetryæ•´åˆã€‚çŸ­æ‰€: cacheHitã‚’å¸¸ã«trueã«ä¸Šæ›¸ãã—å—ä»˜ãƒãƒŠãƒ¼åˆ¤å®šã‚’èª¤èª˜å°ã€ç›£æŸ»é€å‡ºãªã—ã€trace/request-idæœªè¨­å®šã€ãƒ†ã‚¹ãƒˆç„¡ã—ã€‚</div>
            </div>
          </div>
        </div>
        <div class="score-card">
          <h2>âšªï¸ task-1765197912142-159354</h2>
          <div class="total">273 / 600</div>
          <div class="meta">ç·åˆ: 46/100 | ãƒ¡ãƒ€ãƒ«: âšªï¸</div>
          <div class="radar-wrap">
            <svg class="radar" data-scores="60,58,55,40,10,50" viewBox="0 0 180 180"></svg>
            <div class="radar-legend">
              <div>é•·æ‰€: facilityIdãƒ˜ãƒƒãƒ€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨web.xmlç™»éŒ²ã§ãƒ‡ãƒ—ãƒ­ã‚¤é…ç·šã‚’è§£æ¶ˆã€‚çŸ­æ‰€: telemetryãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ‹¡å¼µãªã—ãƒ»ç›£æŸ»é€å‡ºãªã—ãƒ»testsç„¡ã—ã§ã‚®ãƒ£ãƒƒãƒ—æœªè§£æ¶ˆã€‚</div>
            </div>
          </div>
        </div>
      </div>

      <table class="monitor-report">
        <colgroup>
          <col class="timestamp-column" />
          <col class="agent-column" />
          <col class="agent-column" />
          <col class="agent-column" />
        </colgroup>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>task-1765197911895-305b57</th>
            <th>task-1765197911805-1ccc24</th>
            <th>task-1765197912142-159354</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="timestamp">2025-12-08 22:11</td>
            <td>
              <div class="agent-meta"><span class="status-badge status-badge--completed">å®Œæˆåº¦é«˜</span> <span class="agent-label">telemetry + auditã‚’å®Ÿè£…ã—å¥‘ç´„ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã€‚</span></div>
              <details><summary>ä¸»è¦å·®åˆ†</summary><pre>
- OutpatientClaimResource: SessionAuditDispatcherã«dispatchã—traceId/requestIdã‚’è£œå®Œã€recordsReturned/telemetryFunnelStageã‚’detailsã¸è¿½åŠ ã€‚
- AbstractOrcaRestResource: traceId/X-Request-Idã‚’ç›£æŸ»ã«æŒã¡å›ã‚Šã€‚
- OrcaMedicalModV2Resource: recordsReturnedã¨telemetry stage(charts)åæ˜ ã€‚
- httpClient OUTPATIENT_API_ENDPOINTS: æ–°RUN_IDãƒ­ã‚°ã‚’ã‚½ãƒ¼ã‚¹ã«ç´ä»˜ã‘ã€‚
- JUnitå¥‘ç´„ãƒ†ã‚¹ãƒˆ2æœ¬è¿½åŠ ã§ç›£æŸ»payloadã‚’æ¤œè¨¼ã€‚
- DOC: APIãƒãƒƒãƒ”ãƒ³ã‚°RUN_IDæ›´æ–°ã€ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£å‚ç…§ã‚’20251208T124645Zã¸ã€‚
æœªã‚³ãƒŸãƒƒãƒˆ: artifacts/api-stability/20251208T124645Z/, log md, testã‚³ãƒ¼ãƒ‰ç­‰ã€‚</pre></details>
            </td>
            <td>
              <div class="agent-meta"><span class="status-badge status-badge--gap">æœªå®Œ</span> <span class="agent-label">telemetryæœ€ä½é™ã®ã¿ã€‚ç›£æŸ»ãƒ»cacheHitæŒ™å‹•ãŒä¸æ•´åˆã€‚</span></div>
              <details><summary>ä¸»è¦å·®åˆ†</summary><pre>
- OutpatientClaimResource: cacheHitã‚’trueå›ºå®šåŒ–ã—ã€ç›£æŸ»detailsã«responseå€¤ã‚’åæ˜ ã™ã‚‹ã®ã¿ã€‚audit dispatchãªã—ã€‚
- OrcaMedicalModV2Resource: recordsReturned/telemetry stageè¿½åŠ ã®ã¿ã€‚
- tests/e2e/helpers/orcaMaster.ts å¾®ä¿®æ­£ã€DOC/RUN_ID 124633 ã¸æ›´æ–°ã€‚
ãƒªã‚¹ã‚¯: å—ä»˜ãƒãƒŠãƒ¼ãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆæ‰±ã„ã¨ãªã‚Šè¦³æ¸¬ãƒ•ã‚¡ãƒãƒ«ã‚’èª¤å ±ã€‚
æœªã‚³ãƒŸãƒƒãƒˆ: artifacts/api-stability/20251208T124633Z/ ä»–ã€‚</pre></details>
            </td>
            <td>
              <div class="agent-meta"><span class="status-badge status-badge--risk">ä¸ååˆ†</span> <span class="agent-label">web.xmlé…ç·šã¨facilityãƒ˜ãƒƒãƒ€è£œå®Œã®ã¿ã§APIã‚®ãƒ£ãƒƒãƒ—æœªè§£æ¶ˆã€‚</span></div>
              <details><summary>ä¸»è¦å·®åˆ†</summary><pre>
- OutpatientClaimResource: facilityIdã‚’X-Facility-Idã§è£œå®Œã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¿½åŠ ã€RUN_ID 124647ã€‚
- web.xml: RESTãƒªã‚½ãƒ¼ã‚¹ã®ã‚¨ãƒ³ãƒˆãƒªè¿½è¨˜ã§ãƒ‡ãƒ—ãƒ­ã‚¤ç™»éŒ²ã€‚
- telemetry/audit/ãƒ†ã‚¹ãƒˆã®è¿½åŠ ãªã—ã€recordsReturnedæœªè¨­å®šã€‚
æœªã‚³ãƒŸãƒƒãƒˆ: artifacts/api-stability/20251208T124647Z/ã€‚</pre></details>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <script>
      const RADII = 70, CX = 90, CY = 90, AXIS = 6;
      function drawRadar(svg, scores) {
        const bg = document.createElementNS('http://www.w3.org/2000/svg','polygon');
        const basePoints = Array.from({length:AXIS},(_,i)=>{
          const ang = (-90 + i*60) * Math.PI/180;
          const x = CX + RADII * Math.cos(ang);
          const y = CY + RADII * Math.sin(ang);
          return `${x},${y}`;
        }).join(' ');
        bg.setAttribute('points', basePoints);
        bg.setAttribute('fill','#eef3f4');
        bg.setAttribute('stroke','#c4d3d7');
        svg.appendChild(bg);
        const poly = document.createElementNS('http://www.w3.org/2000/svg','polygon');
        const pts = scores.map((s,i)=>{
          const r = (s/100)*RADII;
          const ang = (-90 + i*60) * Math.PI/180;
          const x = CX + r * Math.cos(ang);
          const y = CY + r * Math.sin(ang);
          return `${x},${y}`;
        }).join(' ');
        poly.setAttribute('points', pts);
        poly.setAttribute('fill','rgba(44,90,105,0.25)');
        poly.setAttribute('stroke','#2c5a69');
        poly.setAttribute('stroke-width','2');
        svg.appendChild(poly);
      }
      document.querySelectorAll('svg.radar').forEach(svg=>{
        const scores = (svg.dataset.scores||'').split(',').map(Number);
        drawRadar(svg, scores);
      });
    </script>
  </body>
</html>
