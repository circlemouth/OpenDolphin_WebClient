<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ - 45 /api/orca/queue ã¨é€ä¿¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º</title>
    <style>
      body {
        font-family: "Hiragino Sans", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        line-height: 1.6;
        margin: 24px;
        background-color: #e9f0f2;
        color: #1f2a30;
      }
      .monitor-wrapper {
        max-width: 1180px;
        margin: 0 auto;
        padding: 32px;
        background: #ffffff;
        border: 1px solid #c4d3d7;
      }
      .monitor-header {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 24px;
      }
      .monitor-title {
        font-size: 26px;
        font-weight: 700;
        letter-spacing: 0.04em;
        color: #1f2a30;
        margin: 0;
      }
      .monitor-description {
        font-size: 14px;
        color: #3a4b53;
        margin: 0;
      }
      .scoreboard {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 12px;
        margin: 20px 0 28px;
      }
      .scorecard {
        border: 1px solid #c4d3d7;
        background: #ffffff;
        padding: 14px;
      }
      .scorecard h2 {
        font-size: 14px;
        margin: 0 0 10px;
        color: #2c3a40;
      }
      .total {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        gap: 10px;
        margin-bottom: 10px;
      }
      .total .points {
        font-size: 22px;
        font-weight: 800;
        letter-spacing: 0.02em;
      }
      .total .badge {
        font-size: 22px;
      }
      .metrics {
        display: grid;
        grid-template-columns: 160px 1fr;
        gap: 12px;
        align-items: start;
      }
      .metrics ul {
        padding-left: 18px;
        margin: 0;
        font-size: 12px;
        color: #2c3a40;
      }
      .metrics li { margin: 2px 0; }

      table.monitor-report {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
        background: #ffffff;
        border: 1px solid #c4d3d7;
      }
      col.timestamp-column { width: 190px; }
      col.agent-column { width: calc((100% - 190px) / 3); }
      th,
      td {
        border: 1px solid #c4d3d7;
        padding: 16px;
        vertical-align: top;
        background-color: #ffffff;
      }
      th {
        background: #d8e6e9;
        text-align: left;
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        color: #2c3a40;
      }
      tbody tr:nth-child(even) td { background-color: #eef3f4; }

      details { display: block; margin: 0; }
      details summary { list-style: none; }
      details[open] summary { margin-bottom: 12px; }
      .details-toggle {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        cursor: pointer;
        font-weight: 500;
        font-size: 13px;
        color: #1f2a30;
        padding: 0;
        background: transparent;
        border: none;
      }
      .details-toggle::before {
        content: "â–¶";
        font-size: 10px;
        transition: transform 160ms ease;
        display: inline-block;
      }
      details[open] .details-toggle::before { transform: rotate(90deg); }

      .timestamp { font-weight: 600; color: #2c3a40; overflow-wrap: anywhere; }
      pre {
        white-space: pre-wrap;
        word-break: break-word;
        margin: 0;
        font-size: 12px;
        line-height: 1.55;
        color: #1f2a30;
        background: #f2f6f7;
        border: 1px solid #c4d3d7;
        padding: 12px;
      }

      .status-badge {
        display: inline-block;
        font-size: 10px;
        font-weight: 600;
        letter-spacing: 0.02em;
        padding: 1px 6px;
        background: #d8e6e9;
        border: 1px solid #b8c9cd;
        color: #1f2a30;
        white-space: nowrap;
        line-height: 1.3;
        vertical-align: top;
      }
      .status-badge--completed { background: #c3d4d8; border-color: #aabfc5; }
      .status-badge--in-progress { background: #fef3cd; border-color: #f0e5a5; }
      .status-badge--pending { background: #e3edf0; border-color: #cdd9dd; }
      .status-badge--error { background: #f8d7da; border-color: #f1aeb5; }

      .agent-meta { display: block; margin-bottom: 10px; line-height: 1.5; }
      .agent-meta .agent-label { display: inline; font-size: 13px; color: #3a4b53; }

      .links { font-size: 12px; color: #3a4b53; }
      .links a { color: #1f2a30; }

      /* Radar */
      .radar-wrap { width: 160px; }
      .radar-title { font-size: 11px; color: #2c3a40; margin: 0 0 6px; font-weight: 600; }
      svg.radar { width: 160px; height: 160px; display: block; }
      .radar-grid { fill: none; stroke: #cdd9dd; stroke-width: 1; }
      .radar-axis { stroke: #cdd9dd; stroke-width: 1; }
      .radar-shape { fill: rgba(46, 125, 132, 0.18); stroke: #2e7d84; stroke-width: 2; }
      .radar-point { fill: #2e7d84; }
      .radar-caption { font-size: 10px; fill: #2c3a40; }

      .small-note { font-size: 12px; color: #3a4b53; margin-top: 6px; }
    </style>
  </head>
  <body>
    <div class="monitor-wrapper">
      <header class="monitor-header">
        <h1 class="monitor-title">è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆï¼ˆã‚¿ã‚¹ã‚¯45: /api/orca/queue ã¨é€ä¿¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼‰</h1>
        <p class="monitor-description">
          å¯¾è±¡: 3ãƒ–ãƒ©ãƒ³ãƒï¼ˆç›£è¦–å¯¾è±¡ã‚¿ã‚¹ã‚¯ï¼‰ / RUN_ID=<code>20251218T114241Z</code> / è¨¼è·¡ãƒ­ã‚°: <code>src/charts_production_outpatient/integration/logs/20251218T114241Z-orca-queue-send-status.md</code>
        </p>
        <p class="monitor-description">
          è©•ä¾¡æ—¥æ™‚: <strong>2025-12-18 17:01 UTC</strong>ï¼ˆupdatedAt=2025-12-18T17:01:45Zï¼‰
        </p>
      </header>

      <section>
        <h2 style="margin: 0 0 10px; font-size: 16px;">ã‚¿ã‚¹ã‚¯å†…å®¹ã¨ä»•äº‹ã®æ¦‚è¦</h2>
        <div style="font-size: 13px; color: #2c3a40;">
          <ul style="margin: 0; padding-left: 18px;">
            <li>Charts ã« ORCA ã‚­ãƒ¥ãƒ¼çŠ¶æ…‹ã‚’è¡¨ç¤ºã—ã€é€ä¿¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆå¾…ã¡/å‡¦ç†ä¸­/æˆåŠŸ/å¤±æ•—ï¼‰ã‚’ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¨æ•´åˆã•ã›ã‚‹ã€‚</li>
            <li>æ»ç•™/å¤±æ•—ã‚’ã€Œç¾å ´ãŒåˆ¤æ–­ã§ãã‚‹ã€å½¢ã§æç¤ºã—ã€å†è©¦è¡Œ/å—ä»˜ç¢ºèª/è¨­å®šç¢ºèªã¸èª˜å°ã™ã‚‹ã€‚</li>
            <li>runId/traceId ã¨ç´ã¥ã‘ã€å•ã„åˆã‚ã›å¯¾å¿œã«è€ãˆã‚‹è¨¼è·¡ï¼ˆUI state / ç›£æŸ»ï¼‰ã‚’æ®‹ã™ã€‚</li>
          </ul>
        </div>
      </section>

      <section class="scoreboard" aria-label="ã‚¹ã‚³ã‚¢ã‚µãƒãƒª">
        <div class="scorecard">
          <h2>claude code / task/task-1766076086348-0abd89</h2>
          <div class="total"><span class="points">528 / 600</span><span class="badge">ğŸ¥ˆ</span></div>
          <div class="metrics">
            <div class="radar-wrap">
              <p class="radar-title">6æŒ‡æ¨™ï¼ˆå…­è§’å½¢ï¼‰</p>
              <svg class="radar" viewBox="-110 -110 220 220" data-scores="90,85,88,90,85,90" data-labels="æ©Ÿèƒ½åˆç†æ€§,ç·»å¯†æ€§,UX/é‹ç”¨,å¯è¦³æ¸¬æ€§,å®‰å…¨æ€§,è¨¼è·¡/Docs"></svg>
            </div>
            <ul>
              <li>æ©Ÿèƒ½åˆç†æ€§ 90ç‚¹ï¼šã‚­ãƒ¥ãƒ¼å†…è¨³/æ»ç•™ãƒˆãƒ¼ãƒ³/aria-live ã®æ„å›³ãŒæ˜ç¢ºã€‚</li>
              <li>ç·»å¯†æ€§ 85ç‚¹ï¼šå‹ä¿®æ­£ã‚„é‡è¤‡patientIdå¯¾å¿œã¯è‰¯ã„ãŒã€unknownã‚«ã‚¦ãƒ³ãƒˆãªã©ä»•æ§˜ã¨å®Ÿè£…ã®ã‚ºãƒ¬ãŒæ®‹ã‚‹ã€‚</li>
              <li>UX/é‹ç”¨ 88ç‚¹ï¼šé¸æŠæ‚£è€…ï¼‹å…¨ä½“ä¿¯ç°ã®ä¸¡æ–¹ã‚’æç¤ºã—ã€ç¾å ´åˆ¤æ–­ã«å¯„ä¸ã€‚</li>
              <li>å¯è¦³æ¸¬æ€§ 90ç‚¹ï¼šrunId/traceId å‰æã§UIçŠ¶æ…‹/ç›£æŸ»ã®è¿½è·¡ã«å¯„ä¸ï¼ˆãƒ­ã‚°ä»•æ§˜ã¯ä¸€éƒ¨è¨˜è¿°æºã‚Œã‚ã‚Šï¼‰ã€‚</li>
              <li>å®‰å…¨æ€§ 85ç‚¹ï¼šå±€æ‰€å¤‰æ›´ã§å‰¯ä½œç”¨å°ã€‚ãŸã ã—ã€Œå†…è¨³ã€ã®é›†è¨ˆæ¯é›†å›£ï¼ˆå…¨ä»¶/æœ€æ–°ã®ã¿ï¼‰ã®å®šç¾©ãŒæ›–æ˜§ã€‚</li>
              <li>è¨¼è·¡/Docs 90ç‚¹ï¼šREADME/DOC_STATUS/è¨¼è·¡ãƒ­ã‚°ã®æ›´æ–°ãŒæƒã£ã¦ã„ã‚‹ã€‚</li>
            </ul>
          </div>
        </div>

        <div class="scorecard">
          <h2>claude code / task/task-1766076086148-a3860f</h2>
          <div class="total"><span class="points">486 / 600</span><span class="badge">ğŸ¥ˆ</span></div>
          <div class="metrics">
            <div class="radar-wrap">
              <p class="radar-title">6æŒ‡æ¨™ï¼ˆå…­è§’å½¢ï¼‰</p>
              <svg class="radar" viewBox="-110 -110 220 220" data-scores="80,85,78,75,88,80" data-labels="æ©Ÿèƒ½åˆç†æ€§,ç·»å¯†æ€§,UX/é‹ç”¨,å¯è¦³æ¸¬æ€§,å®‰å…¨æ€§,è¨¼è·¡/Docs"></svg>
            </div>
            <ul>
              <li>æ©Ÿèƒ½åˆç†æ€§ 80ç‚¹ï¼šåŒä¸€patientIdè¤‡æ•°ã‚¨ãƒ³ãƒˆãƒªæ™‚ã®ä¸æ•´åˆã‚’æ½°ã™ä¿®æ­£ã¯å¦¥å½“ã€‚</li>
              <li>ç·»å¯†æ€§ 85ç‚¹ï¼šlastDispatchAt ã®æ¯”è¼ƒãƒ­ã‚¸ãƒƒã‚¯ãŒå …å®Ÿï¼ˆç©ºæ–‡å­—/æœªè¨­å®šã‚‚è€ƒæ…®ï¼‰ã€‚</li>
              <li>UX/é‹ç”¨ 78ç‚¹ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼å¯è¦–æ€§ã¯é–“æ¥çš„ï¼ˆä¸æ•´åˆé˜²æ­¢å¯„ã‚Šï¼‰ã€‚</li>
              <li>å¯è¦³æ¸¬æ€§ 75ç‚¹ï¼šæ—¢å­˜ãƒ­ã‚°ã«ä¾å­˜ã—ã€ãƒ­ã‚°ä»•æ§˜ï¼ˆ__AUDIT_UI_STATE__ç­‰ï¼‰ã®è¨˜è¿°æ›´æ–°ãŒä¸€éƒ¨ä¸è¶³ã€‚</li>
              <li>å®‰å…¨æ€§ 88ç‚¹ï¼šæ—¢å­˜ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å£Šã•ãšã€æœ€å°ã®é¸æŠãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ ã€‚</li>
              <li>è¨¼è·¡/Docs 80ç‚¹ï¼šè¨¼è·¡ãƒ­ã‚°è¿½è¨˜ã¯ã‚ã‚‹ãŒç”¨èªæºã‚ŒãŒæ®‹ã‚‹ã€‚</li>
            </ul>
          </div>
        </div>

        <div class="scorecard">
          <h2>claude code / task/task-1766076086550-e28a9a</h2>
          <div class="total"><span class="points">205 / 600</span><span class="badge">âšªï¸</span></div>
          <div class="metrics">
            <div class="radar-wrap">
              <p class="radar-title">6æŒ‡æ¨™ï¼ˆå…­è§’å½¢ï¼‰</p>
              <svg class="radar" viewBox="-110 -110 220 220" data-scores="40,30,30,30,40,35" data-labels="æ©Ÿèƒ½åˆç†æ€§,ç·»å¯†æ€§,UX/é‹ç”¨,å¯è¦³æ¸¬æ€§,å®‰å…¨æ€§,è¨¼è·¡/Docs"></svg>
            </div>
            <ul>
              <li>æ©Ÿèƒ½åˆç†æ€§ 40ç‚¹ï¼šMSWå‘ã‘ã®ãƒ¢ãƒƒã‚¯æ‹¡å¼µæ¡ˆã¯æ–¹å‘æ€§ã¨ã—ã¦ã¯æœ‰ç”¨ã€‚</li>
              <li>ç·»å¯†æ€§ 30ç‚¹ï¼šæœªã‚³ãƒŸãƒƒãƒˆå·®åˆ†ãŒæ®‹ã‚Šã€è©•ä¾¡å¯¾è±¡ã¨ã—ã¦å†ç¾æ€§ãŒä¸è¶³ã€‚</li>
              <li>UX/é‹ç”¨ 30ç‚¹ï¼šå®Ÿè£…å–ã‚Šè¾¼ã¿å‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤ãŒæœªåˆ°é”ã€‚</li>
              <li>å¯è¦³æ¸¬æ€§ 30ç‚¹ï¼šãƒ­ã‚°/traceé€£æºã®å¤‰æ›´ã¯æœªåæ˜ ã€‚</li>
              <li>å®‰å…¨æ€§ 40ç‚¹ï¼šãƒ¢ãƒƒã‚¯å¤‰æ›´è‡ªä½“ã¯å±€æ‰€ã ãŒã€æœªã‚³ãƒŸãƒƒãƒˆã®ãŸã‚ãƒ¬ãƒ“ãƒ¥ãƒ¼/CIã«ä¹—ã‚‰ãªã„ã€‚</li>
              <li>è¨¼è·¡/Docs 35ç‚¹ï¼šè¨¼è·¡ãƒ­ã‚°ã‚‚æœªã‚³ãƒŸãƒƒãƒˆã§æºã‚ŒãŒæ®‹ã‚‹ã€‚</li>
            </ul>
          </div>
        </div>
      </section>

      <table class="monitor-report">
        <colgroup>
          <col class="timestamp-column" />
          <col class="agent-column" />
          <col class="agent-column" />
          <col class="agent-column" />
        </colgroup>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>task/task-1766076086348-0abd89</th>
            <th>task/task-1766076086148-a3860f</th>
            <th>task/task-1766076086550-e28a9a</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="timestamp">2025-12-18 17:01 UTC</td>

            <td>
              <div class="agent-meta">
                <span class="status-badge status-badge--completed">å®Œäº†æ‰±ã„ï¼ˆã‚³ãƒŸãƒƒãƒˆã‚ã‚Šï¼‰</span>
                <span class="agent-label">ORCAã‚­ãƒ¥ãƒ¼å†…è¨³ãƒãƒƒã‚¸è¿½åŠ  + tsc -bå‘ã‘å‹èª¿æ•´ã€‚</span>
              </div>
              <div class="links">
                æˆæœç‰©: <a href="../../web-client/src/features/charts/DocumentTimeline.tsx">DocumentTimeline.tsx</a> /
                <a href="../../docs/web-client/README.md">docs/web-client/README.md</a> /
                <a href="../../docs/web-client/planning/phase2/DOC_STATUS.md">DOC_STATUS.md</a>
                <div class="small-note">ï¼ˆæ³¨ï¼‰ãƒªãƒ³ã‚¯ã¯ãƒªãƒã‚¸ãƒˆãƒªãƒ«ãƒ¼ãƒˆåŸºæº–ã€‚å„ãƒ–ãƒ©ãƒ³ãƒå›ºæœ‰ã®å†…å®¹ã¯ <code>git show</code> ã®å‚ç…§ãŒç¢ºå®Ÿã§ã™ã€‚</div>
              </div>
              <details class="snapshot-details">
                <summary class="details-toggle">ã‚³ãƒŸãƒƒãƒˆ/å·®åˆ†/ãƒ‘ãƒƒãƒ</summary>
                <p class="snapshot-summary">æœªã‚³ãƒŸãƒƒãƒˆï¼ˆworktree statusï¼‰</p>
                <pre></pre>
                <p class="snapshot-summary">ã‚³ãƒŸãƒƒãƒˆï¼ˆmaster..branchï¼‰</p>
                <pre>30a562f4 (task/task-1766076086348-0abd89) fix(charts): DocumentTimelineã®å‹ã‚’tsc -bå‘ã‘ã«èª¿æ•´
877ad9e5 feat(charts): ORCAã‚­ãƒ¥ãƒ¼é€ä¿¡çŠ¶æ…‹ã®å†…è¨³è¡¨ç¤º (RUN_ID=20251218T114241Z)</pre>
                <p class="snapshot-summary">diffstatï¼ˆmaster...branchï¼‰</p>
                <pre> docs/web-client/README.md                          |  2 +
 docs/web-client/planning/phase2/DOC_STATUS.md      |  2 +-
 .../20251218T114241Z-orca-queue-send-status.md     |  5 +-
 .../src/features/charts/DocumentTimeline.tsx       | 85 ++++++++++++++++++----
 4 files changed, 76 insertions(+), 18 deletions(-)</pre>
                <p class="snapshot-summary">name-statusï¼ˆmaster...branchï¼‰</p>
                <pre>M	docs/web-client/README.md
M	docs/web-client/planning/phase2/DOC_STATUS.md
M	src/charts_production_outpatient/integration/logs/20251218T114241Z-orca-queue-send-status.md
M	web-client/src/features/charts/DocumentTimeline.tsx</pre>
                <p class="snapshot-summary">ä¸»è¦ãƒ‘ãƒƒãƒï¼ˆDocumentTimeline.tsxï¼‰</p>
                <pre>diff --git a/web-client/src/features/charts/DocumentTimeline.tsx b/web-client/src/features/charts/DocumentTimeline.tsx
index 0ad24ed3..3f2795de 100644
--- a/web-client/src/features/charts/DocumentTimeline.tsx
+++ b/web-client/src/features/charts/DocumentTimeline.tsx
@@ -55,6 +55,15 @@ const pickClaimBundleForEntry = (entry: ReceptionEntry, bundles: ClaimBundle[])
 
 type QueuePhase = 'ok' | 'retrying' | 'holding' | 'error' | 'pending';
 
+type OrcaQueueCounts = {
+  waiting: number;
+  processing: number;
+  success: number;
+  failure: number;
+  unknown: number;
+  stalled: number;
+};
+
 const resolveQueuePhase = (options: {
   missingMaster?: boolean;
   isClaimLoading?: boolean;
@@ -69,6 +78,29 @@ const resolveQueuePhase = (options: {
   return 'ok';
 };
 
+const buildOrcaQueueCounts = (queue: OrcaQueueEntry[]): OrcaQueueCounts =&gt; {
+  const counts: OrcaQueueCounts = {
+    waiting: 0,
+    processing: 0,
+    success: 0,
+    failure: 0,
+    unknown: 0,
+    stalled: 0,
+  };
+
+  for (const entry of queue) {
+    const status = resolveOrcaSendStatus(entry);
+    if (!status) {
+      counts.unknown += 1;
+      continue;
+    }
+    counts[status.key] += 1;
+    if (status.isStalled) counts.stalled += 1;
+  }
+
+  return counts;
+};
+
 const deriveNextAction = (
   status: ReceptionStatus,
   queuePhase: QueuePhase,
@@ -202,6 +234,16 @@ export function DocumentTimeline({
     return resolveOrcaSendStatus(orcaQueueByPatientId.get(selectedPatientId));
   }, [orcaQueueByPatientId, selectedPatientId]);
 
+  const orcaQueueCounts = useMemo(() =&gt; buildOrcaQueueCounts([...orcaQueueByPatientId.values()]), [orcaQueueByPatientId]);
+
+  const orcaQueueCountsTone = useMemo(() =&gt; {
+    if (orcaQueueCounts.failure &gt; 0) return 'error' as const;
+    if (orcaQueueCounts.stalled &gt; 0) return 'warning' as const;
+    if (orcaQueueCounts.waiting &gt; 0) return 'warning' as const;
+    if (orcaQueueCounts.processing &gt; 0) return 'info' as const;
+    return 'success' as const;
+  }, [orcaQueueCounts.failure, orcaQueueCounts.processing, orcaQueueCounts.stalled, orcaQueueCounts.waiting]);
+
   const entriesWithClaim = useMemo(() =&gt; {
     if (entries.length === 0) return [];
     if (claimBundles.length === 0) return entries;
@@ -218,10 +260,12 @@ export function DocumentTimeline({
     });
   }, [claimBundles, entries]);
 
-  const rank: Record&lt;ReceptionStatus, number&gt; = useMemo(
-    () =&gt; Object.fromEntries(STATUS_ORDER.map((s, idx) =&gt; [s, idx])),
-    [],
-  );
+  const rank: Record&lt;ReceptionStatus, number&gt; = useMemo(() =&gt; {
+    return STATUS_ORDER.reduce&lt;Record&lt;ReceptionStatus, number&gt;&gt;((acc, status, idx) =&gt; {
+      acc[status] = idx;
+      return acc;
+    }, {} as Record&lt;ReceptionStatus, number&gt;);
+  }, []);
 
   const sortedEntries = useMemo(() =&gt; {
     if (entriesWithClaim.length === 0) return [] as ReceptionEntry[];
@@ -278,7 +322,7 @@ export function DocumentTimeline({
     })).filter((section) =&gt; section.items.length &gt; 0 || section.total &gt; 0),
   [sortedEntries, windowedEntries]);
 
-  const [collapsedSections, setCollapsedSections] = useState&lt;Record&lt;ReceptionStatus, boolean&gt;&gt;({});
+  const [collapsedSections, setCollapsedSections] = useState&lt;Partial&lt;Record&lt;ReceptionStatus, boolean&gt;&gt;&gt;({});
 
   const toggleSection = useCallback((status: ReceptionStatus) =&gt; {
     setCollapsedSections((prev) =&gt; ({ ...prev, [status]: !prev[status] }));
@@ -586,15 +630,13 @@ export function DocumentTimeline({
                 description={transitionMeta.description}
                 runId={resolvedRunId}
               /&gt;
-            &lt;StatusBadge
-              label="fallbackUsed"
-              value={resolvedFallbackUsed ? 'true' : 'false'}
-              tone={resolvedFallbackUsed ? 'error' : 'info'}
-              description={resolvedFallbackUsed ? 'ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä½¿ç”¨ä¸­ã€‚å„ªå…ˆã§å†å–å¾—ã‚’å®Ÿæ–½' : 'ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æœªä½¿ç”¨'}
-              runId={resolvedRunId}
-            /&gt;
-          &lt;/div&gt;
-            &lt;div className="document-timeline__queue-badges"&gt;
+              &lt;StatusBadge
+                label="fallbackUsed"
+                value={resolvedFallbackUsed ? 'true' : 'false'}
+                tone={resolvedFallbackUsed ? 'error' : 'info'}
+                description={resolvedFallbackUsed ? 'ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä½¿ç”¨ä¸­ã€‚å„ªå…ˆã§å†å–å¾—ã‚’å®Ÿæ–½' : 'ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æœªä½¿ç”¨'}
+                runId={resolvedRunId}
+              /&gt;
               &lt;StatusBadge
                 label="ORCAé€ä¿¡ï¼ˆé¸æŠæ‚£è€…ï¼‰"
                 value={selectedSendStatus?.label ?? (selectedPatientId ? 'æœªå–å¾—' : 'æ‚£è€…æœªé¸æŠ')}
@@ -632,6 +674,21 @@ export function DocumentTimeline({
                 }
                 runId={orcaQueue?.runId ?? resolvedRunId}
               /&gt;
+              &lt;StatusBadge
+                label="ORCA ã‚­ãƒ¥ãƒ¼å†…è¨³"
+                value={`å¾…ã¡:${orcaQueueCounts.waiting} / å‡¦ç†ä¸­:${orcaQueueCounts.processing} / æˆåŠŸ:${orcaQueueCounts.success} / å¤±æ•—:${orcaQueueCounts.failure}`}
+                tone={orcaQueueCountsTone}
+                description={
+                  [
+                    orcaQueueCounts.stalled &gt; 0 ? `æ»ç•™:${orcaQueueCounts.stalled}` : undefined,
+                    orcaQueueCounts.unknown &gt; 0 ? `ä¸æ˜:${orcaQueueCounts.unknown}` : undefined,
+                  ]
+                    .filter((v): v is string =&gt; typeof v === 'string' &amp;&amp; v.length &gt; 0)
+                    .join(' ï½œ ') || 'é¸æŠæ‚£è€…ä»¥å¤–ã®æ»ç•™/å¤±æ•—ã‚‚å«ã‚ã¦ä¿¯ç°ã—ã¾ã™ã€‚'
+                }
+                ariaLive={orcaQueueCounts.failure &gt; 0 || orcaQueueCounts.stalled &gt; 0 ? 'assertive' : 'polite'}
+                runId={orcaQueue?.runId ?? resolvedRunId}
+              /&gt;
             &lt;/div&gt;
             {claimData?.fetchedAt &amp;&amp; (
               &lt;p className="document-timeline__queue-meta"&gt;</pre>
              </details>
            </td>

            <td>
              <div class="agent-meta">
                <span class="status-badge status-badge--completed">å®Œäº†æ‰±ã„ï¼ˆã‚³ãƒŸãƒƒãƒˆã‚ã‚Šï¼‰</span>
                <span class="agent-label">åŒä¸€patientIdè¤‡æ•°ã‚¨ãƒ³ãƒˆãƒªæ™‚ã®ã€Œæœ€æ–°lastDispatchAtæ¡ç”¨ã€ä¿®æ­£ã€‚</span>
              </div>
              <div class="links">
                æˆæœç‰©: <a href="../../web-client/src/features/charts/pages/ChartsPage.tsx">ChartsPage.tsx</a> /
                <a href="../../src/charts_production_outpatient/integration/logs/20251218T114241Z-orca-queue-send-status.md">è¨¼è·¡ãƒ­ã‚°</a>
              </div>
              <details class="snapshot-details">
                <summary class="details-toggle">ã‚³ãƒŸãƒƒãƒˆ/å·®åˆ†/ãƒ‘ãƒƒãƒ</summary>
                <p class="snapshot-summary">æœªã‚³ãƒŸãƒƒãƒˆï¼ˆworktree statusï¼‰</p>
                <pre></pre>
                <p class="snapshot-summary">ã‚³ãƒŸãƒƒãƒˆï¼ˆmaster..branchï¼‰</p>
                <pre>5460a027 (task/task-1766076086148-a3860f) RUN_ID=20251218T114241Z: charts orca queue send status fixes</pre>
                <p class="snapshot-summary">diffstatï¼ˆmaster...branchï¼‰</p>
                <pre> docs/web-client/planning/phase2/DOC_STATUS.md          |  4 ++--
 .../logs/20251218T114241Z-orca-queue-send-status.md    |  4 ++--
 web-client/src/features/charts/pages/ChartsPage.tsx    | 18 ++++++++++++++++--
 3 files changed, 20 insertions(+), 6 deletions(-)</pre>
                <p class="snapshot-summary">name-statusï¼ˆmaster...branchï¼‰</p>
                <pre>M	docs/web-client/planning/phase2/DOC_STATUS.md
M	src/charts_production_outpatient/integration/logs/20251218T114241Z-orca-queue-send-status.md
M	web-client/src/features/charts/pages/ChartsPage.tsx</pre>
                <p class="snapshot-summary">ä¸»è¦ãƒ‘ãƒƒãƒï¼ˆChartsPage.tsxï¼‰</p>
                <pre>diff --git a/web-client/src/features/charts/pages/ChartsPage.tsx b/web-client/src/features/charts/pages/ChartsPage.tsx
index 916d3df1..d503c8bd 100644
--- a/web-client/src/features/charts/pages/ChartsPage.tsx
+++ b/web-client/src/features/charts/pages/ChartsPage.tsx
@@ -23,6 +23,7 @@ import { ToneBanner } from '../../reception/components/ToneBanner';
 import { useSession } from '../../../AppRouter';
 import { fetchEffectiveAdminConfig, type ChartsMasterSourcePolicy } from '../../administration/api';
 import type { ClaimOutpatientPayload } from '../../outpatient/types';
+import { getAppointmentDataBanner } from '../../outpatient/appointmentDataBanner';
 import { hasStoredAuth } from '../../../libs/http/httpClient';
 import { fetchOrcaQueue } from '../../outpatient/orcaQueueApi';
 import { resolveOrcaSendStatus, toClaimQueueEntryFromOrcaQueueEntry } from '../../outpatient/orcaQueueStatus';
@@ -44,7 +45,6 @@ const isLikelyNetworkError = (error: unknown) =&gt; {
   if (error instanceof Error) return /Failed to fetch|NetworkError|ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/i.test(error.message);
   return false;
 };
-import { getAppointmentDataBanner } from '../../outpatient/appointmentDataBanner';
 
 export function ChartsPage() {
   return (
@@ -438,7 +438,21 @@ function ChartsContent() {
     const patientId = encounterContext.patientId;
     if (!patientId) return undefined;
     const entries = orcaQueueQuery.data?.queue ?? [];
-    return entries.find((entry) =&gt; entry.patientId === patientId);
+    // patientId ãŒåŒä¸€ã®è¤‡æ•°ã‚¨ãƒ³ãƒˆãƒªãŒè¿”ã‚‹ç’°å¢ƒå·®ã«å‚™ãˆã€æœ€ã‚‚æ–°ã—ã„ lastDispatchAt ã‚’æ¡ç”¨ã™ã‚‹ã€‚
+    let candidate: (typeof entries)[number] | undefined;
+    for (const entry of entries) {
+      if (entry.patientId !== patientId) continue;
+      if (!candidate) {
+        candidate = entry;
+        continue;
+      }
+      const prevAt = candidate.lastDispatchAt ?? '';
+      const nextAt = entry.lastDispatchAt ?? '';
+      if (nextAt &amp;&amp; (!prevAt || nextAt &gt;= prevAt)) {
+        candidate = entry;
+      }
+    }
+    return candidate;
   }, [encounterContext.patientId, orcaQueueQuery.data?.queue]);
 
   const selectedOrcaSendStatus = useMemo(() =&gt; resolveOrcaSendStatus(selectedOrcaQueueEntry), [selectedOrcaQueueEntry]);</pre>
              </details>
            </td>

            <td>
              <div class="agent-meta">
                <span class="status-badge status-badge--error">æœªå®Œäº†ï¼ˆã‚³ãƒŸãƒƒãƒˆãªã— + æœªã‚³ãƒŸãƒƒãƒˆã‚ã‚Šï¼‰</span>
                <span class="agent-label">MSWç”¨ã® /api/orca/queue ãƒ¢ãƒƒã‚¯è¿½åŠ æ¡ˆãŒæœªã‚³ãƒŸãƒƒãƒˆã®ã¾ã¾æ®‹å­˜ã€‚</span>
              </div>
              <div class="links">
                å¯¾è±¡worktree: <code>/Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/.worktrees/task-1766076086550-e28a9a</code>
              </div>
              <details class="snapshot-details">
                <summary class="details-toggle">æœªã‚³ãƒŸãƒƒãƒˆå·®åˆ†</summary>
                <p class="snapshot-summary">æœªã‚³ãƒŸãƒƒãƒˆï¼ˆworktree statusï¼‰</p>
                <pre> M src/charts_production_outpatient/integration/logs/20251218T114241Z-orca-queue-send-status.md
 M web-client/src/mocks/fixtures/outpatient.ts
 M web-client/src/mocks/handlers/outpatient.ts</pre>
                <p class="snapshot-summary">ã‚³ãƒŸãƒƒãƒˆï¼ˆmaster..branchï¼‰</p>
                <pre></pre>
                <p class="snapshot-summary">diffstatï¼ˆmaster...branchï¼‰</p>
                <pre></pre>
                <p class="snapshot-summary">name-statusï¼ˆmaster...branchï¼‰</p>
                <pre></pre>
                <p class="snapshot-summary">æœªã‚³ãƒŸãƒƒãƒˆname-status</p>
                <pre>M	src/charts_production_outpatient/integration/logs/20251218T114241Z-orca-queue-send-status.md
M	web-client/src/mocks/fixtures/outpatient.ts
M	web-client/src/mocks/handlers/outpatient.ts</pre>
                <p class="snapshot-summary">æœªã‚³ãƒŸãƒƒãƒˆä¸»è¦ãƒ‘ãƒƒãƒï¼ˆmocksï¼‰</p>
                <pre>diff --git a/web-client/src/mocks/fixtures/outpatient.ts b/web-client/src/mocks/fixtures/outpatient.ts
index 9b8f4dab..1c350b5b 100644
--- a/web-client/src/mocks/fixtures/outpatient.ts
+++ b/web-client/src/mocks/fixtures/outpatient.ts
@@ -506,3 +506,70 @@ export function exposeOutpatientScenarioControls() {
   };
   (window as any).__OUTPATIENT_SCENARIO__ = api;
 }
+
+export function buildOrcaQueueFixture(flags: OutpatientFlagSet, patientId?: string, retry?: boolean) {
+  const baseQueue = [
+    {
+      patientId: '000001',
+      status: 'delivered',
+      lastDispatchAt: new Date(Date.now() - 1000 * 60 * 5).toISOString(), // 5 min ago
+      retryable: false,
+    },
+    {
+      patientId: '000002',
+      status: 'processing',
+      lastDispatchAt: new Date(Date.now() - 1000 * 30).toISOString(), // 30 sec ago
+      retryable: false,
+    },
+    {
+      patientId: '000003',
+      status: 'failed',
+      lastDispatchAt: new Date(Date.now() - 1000 * 60 * 60).toISOString(), // 1 hour ago
+      retryable: true,
+      error: 'ORCA API Error: Timeout connecting to gateway',
+    },
+  ];
+
+  let queue = [...baseQueue];
+
+  if (patientId) {
+    const exists = queue.find((q) =&gt; q.patientId === patientId);
+    if (retry &amp;&amp; exists) {
+      // Retry triggers transition to processing
+      queue = queue.map((q) =&gt;
+        q.patientId === patientId
+          ? { ...q, status: 'sent', lastDispatchAt: new Date().toISOString(), error: undefined }
+          : q,
+      );
+    } else if (!exists &amp;&amp; retry) {
+      // New entry on retry
+      queue.push({
+        patientId,
+        status: 'sent',
+        lastDispatchAt: new Date().toISOString(),
+        retryable: false,
+      });
+    } else {
+      // If filtering by patientId, usually we return the whole queue or filtered?
+      // The API returns the whole queue usually, but if patientId is specified, maybe it returns relevant entries?
+      // The task says "GET /api/orca/queue?patientId=&lt;id&gt;"
+      // normalizeQueue in orcaQueueApi returns { queue: [...] }
+      // We will just return the full queue for now, or filter if we want to be precise.
+      // But typically queue endpoint returns list.
+      // If filtering is requested, we filter.
+      queue = queue.filter((q) =&gt; q.patientId === patientId);
+    }
+  }
+
+  // If flags have specific overrides (like timeout or 500), we handle them in the handler response, 
+  // but here we just build the body.
+  
+  return {
+    runId: flags.runId,
+    traceId: flags.traceId ?? `trace-${flags.runId}`,
+    fetchedAt: new Date().toISOString(),
+    source: 'mock',
+    verifyAdminDelivery: false,
+    queue,
+  };
+}
diff --git a/web-client/src/mocks/handlers/outpatient.ts b/web-client/src/mocks/handlers/outpatient.ts
index 38e5608d..f421d364 100644
--- a/web-client/src/mocks/handlers/outpatient.ts
+++ b/web-client/src/mocks/handlers/outpatient.ts
@@ -5,6 +5,7 @@ import {
   buildClaimFixture,
   buildMedicalSummaryFixture,
   buildPatientListFixture,
+  buildOrcaQueueFixture,
   getOutpatientScenario,
   selectOutpatientScenario,
   updateOutpatientScenarioFlags,
@@ -104,4 +105,17 @@ export const outpatientHandlers = [
     const scenario = applyRequestScenario(request);
     return respond(buildPatientListFixture(scenario.flags));
   }),
+  http.get('/api/orca/queue', ({ request }) =&gt; {
+    const scenario = applyRequestScenario(request);
+    const url = new URL(request.url);
+    const patientId = url.searchParams.get('patientId') ?? undefined;
+    const retry = url.searchParams.get('retry') === '1';
+    return respond(buildOrcaQueueFixture(scenario.flags, patientId, retry));
+  }),
+  http.delete('/api/orca/queue', ({ request }) =&gt; {
+    const scenario = applyRequestScenario(request);
+    const url = new URL(request.url);
+    const patientId = url.searchParams.get('patientId') ?? undefined;
+    return respond({ ...buildOrcaQueueFixture(scenario.flags, patientId), status: 204 });
+  }),
 ];</pre>
              </details>
            </td>
          </tr>
        </tbody>
      </table>

      <section style="margin-top: 24px; font-size: 13px; color: #2c3a40;">
        <h2 style="margin: 0 0 10px; font-size: 16px;">æŒ‡æ‘˜ï¼ˆæ”¹å–„ä½™åœ°ï¼‰</h2>
        <ul style="margin: 0; padding-left: 18px;">
          <li>ã€ŒORCA ã‚­ãƒ¥ãƒ¼å†…è¨³ã€ã®é›†è¨ˆæ¯é›†å›£ãŒã€<code>queueå…¨ä»¶</code>ï¼ˆé‡è¤‡patientIdå«ã‚€ï¼‰ãªã®ã‹ <code>patientIdã”ã¨ã®æœ€æ–°ã®ã¿</code> ãªã®ã‹ãŒ UI/ãƒ­ã‚°é–“ã§æºã‚Œã¦ã„ã‚‹ãŸã‚ã€å®šç¾©ã‚’æƒãˆã‚‹ã¨å•ã„åˆã‚ã›è€æ€§ãŒä¸ŠãŒã‚Šã¾ã™ã€‚</li>
          <li><code>resolveOrcaSendStatus</code> ã¯ç¾çŠ¶ <code>unknown</code> ã‚’è¿”ã•ãªã„å®Ÿè£…ãªã®ã§ã€unknownã‚«ã‚¦ãƒ³ãƒˆ/èª¬æ˜ãŒæ®‹ã‚‹å ´åˆã¯ä»•æ§˜åŒ–ï¼ˆä¾‹: ç„¡åŠ¹ãªstatus/æ—¥æ™‚ï¼‰ã‹å‰Šé™¤ã§æ•´åˆã™ã‚‹ã¨è‰¯ã„ã§ã™ã€‚</li>
          <li>task/task-1766076086550-e28a9a ã¯æœªã‚³ãƒŸãƒƒãƒˆå·®åˆ†ãŒã‚ã‚‹ãŸã‚ã€ã‚¿ã‚¹ã‚¯ãƒ«ãƒ¼ãƒ«ï¼ˆworktreeå†…ã¯å ±å‘Šå‰ã‚³ãƒŸãƒƒãƒˆï¼‰è¦³ç‚¹ã§å¤±æ ¼å¯„ã‚Šã®çŠ¶æ…‹ã§ã™ã€‚</li>
        </ul>
      </section>
    </div>

    <script>
      (function () {
        const svgs = document.querySelectorAll('svg.radar');
        const maxR = 90;
        const angles = [
          -Math.PI / 2,
          -Math.PI / 2 + (Math.PI * 2) / 6,
          -Math.PI / 2 + (Math.PI * 4) / 6,
          -Math.PI / 2 + (Math.PI * 6) / 6,
          -Math.PI / 2 + (Math.PI * 8) / 6,
          -Math.PI / 2 + (Math.PI * 10) / 6,
        ];

        function pt(r, a) {
          return { x: Math.cos(a) * r, y: Math.sin(a) * r };
        }

        function poly(points) {
          return points.map((p) => ).join(' ');
        }

        svgs.forEach((svg) => {
          const scores = (svg.dataset.scores || '').split(',').map((v) => Number(v.trim())).filter((n) => !Number.isNaN(n));
          const labels = (svg.dataset.labels || '').split(',').map((v) => v.trim());
          if (scores.length !== 6) return;

          // grid hexagon
          const grid = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
          grid.setAttribute('class', 'radar-grid');
          grid.setAttribute('points', poly(angles.map((a) => pt(maxR, a))));
          svg.appendChild(grid);

          // axes
          angles.forEach((a) => {
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('class', 'radar-axis');
            line.setAttribute('x1', '0');
            line.setAttribute('y1', '0');
            line.setAttribute('x2', String(pt(maxR, a).x));
            line.setAttribute('y2', String(pt(maxR, a).y));
            svg.appendChild(line);
          });

          // data shape
          const pts = scores.map((s, i) => pt((Math.max(0, Math.min(100, s)) / 100) * maxR, angles[i]));
          const shape = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
          shape.setAttribute('class', 'radar-shape');
          shape.setAttribute('points', poly(pts));
          svg.appendChild(shape);

          // points + captions
          labels.forEach((label, i) => {
            const p = pt(maxR + 14, angles[i]);
            const t = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            t.setAttribute('class', 'radar-caption');
            t.setAttribute('x', String(p.x));
            t.setAttribute('y', String(p.y));
            t.setAttribute('text-anchor', p.x > 20 ? 'start' : p.x < -20 ? 'end' : 'middle');
            t.setAttribute('dominant-baseline', p.y > 20 ? 'hanging' : p.y < -20 ? 'alphabetic' : 'middle');
            t.textContent = ;
            svg.appendChild(t);
          });
        });
      })();
    </script>
  </body>
</html>
