<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>Stubã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå…¬é–‹ç¯„å›²æ•´ç† è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ</title>
    <style>
      body { font-family: "Hiragino Sans", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, sans-serif; line-height: 1.6; margin: 24px; background-color: #e9f0f2; color: #1f2a30; }
      .monitor-wrapper { max-width: 1180px; margin: 0 auto; padding: 32px; background: #ffffff; border: 1px solid #c4d3d7; }
      .monitor-header { display: flex; flex-direction: column; gap: 8px; margin-bottom: 24px; }
      .monitor-title { font-size: 26px; font-weight: 700; letter-spacing: 0.04em; color: #1f2a30; }
      .monitor-description { font-size: 14px; color: #3a4b53; }
      .scoreboard { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 24px; }
      .score-card { background: #f7fbfc; border: 1px solid #c4d3d7; padding: 16px; }
      .score-card h2 { margin: 0 0 8px 0; font-size: 18px; display: flex; align-items: center; gap: 8px; }
      .total-score { font-size: 22px; font-weight: 700; color: #1f2a30; }
      .hex-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-top: 12px; }
      .hex { position: relative; background: #dfeff2; clip-path: polygon(25% 6%, 75% 6%, 94% 50%, 75% 94%, 25% 94%, 6% 50%); padding: 12px; text-align: center; min-height: 90px; border: 1px solid #b7c9ce; }
      .hex strong { display: block; font-size: 13px; margin-bottom: 4px; color: #2c3a40; }
      .hex span { font-size: 18px; font-weight: 700; color: #1f2a30; }
      table.monitor-report { width: 100%; border-collapse: collapse; table-layout: fixed; background: #ffffff; border: 1px solid #c4d3d7; }
      col.timestamp-column { width: 180px; }
      col.agent-column { width: calc((100% - 180px) / 2); }
      th, td { border: 1px solid #c4d3d7; padding: 16px; vertical-align: top; background-color: #ffffff; }
      th { background: #d8e6e9; text-align: left; font-size: 13px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; color: #2c3a40; }
      tbody tr:nth-child(even) td { background-color: #eef3f4; }
      details { display: block; margin: 0; }
      details summary { list-style: none; cursor: pointer; }
      details[open] summary { margin-bottom: 12px; }
      .details-toggle { display: inline-flex; align-items: center; gap: 6px; cursor: pointer; font-weight: 500; font-size: 13px; color: #1f2a30; padding: 0; background: transparent; border: none; }
      .details-toggle::before { content: "â–¶"; font-size: 10px; transition: transform 160ms ease; display: inline-block; }
      details[open] .details-toggle::before { transform: rotate(90deg); }
      .timestamp { font-weight: 600; color: #2c3a40; overflow-wrap: anywhere; }
      .snapshot-summary { margin-bottom: 12px; font-weight: 500; color: #2c3a40; }
      pre { white-space: pre-wrap; word-break: break-word; margin: 0; font-size: 12px; line-height: 1.55; color: #1f2a30; background: #f2f6f7; border: 1px solid #c4d3d7; padding: 16px; }
      .status-badge { display: inline-block; font-size: 10px; font-weight: 600; letter-spacing: 0.02em; padding: 1px 6px; background: #d8e6e9; border: 1px solid #b8c9cd; color: #1f2a30; white-space: nowrap; line-height: 1.3; vertical-align: top; }
      .status-badge--completed { background: #c3d4d8; border-color: #aabfc5; }
      .status-badge--warning { background: #fef3cd; border-color: #f0e5a5; }
      .agent-meta { display: block; margin-bottom: 8px; line-height: 1.5; }
      .agent-meta .status-badge { margin-right: 6px; }
      .agent-meta .agent-label { display: inline; font-size: 13px; color: #3a4b53; }
    </style>
  </head>
  <body>
    <div class="monitor-wrapper">
      <header class="monitor-header">
        <h1 class="monitor-title">Stubã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå…¬é–‹ç¯„å›²æ•´ç† è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ</h1>
        <p class="monitor-description">å¯¾è±¡ãƒ–ãƒ©ãƒ³ãƒ: task/task-1768698174666-33e5ceï¼ˆæœŸé–“ 2026-01-18 11:00 - 2026-01-19 11:00ï¼‰</p>
        <p class="monitor-description">çµè«–: ğŸ¥‰ 395 / 600ï¼ˆbronzeï¼‰ â€” ãƒ•ã‚£ãƒ«ã‚¿å°å…¥ã§æœ¬ç•ªç³»ã‚’é®æ–­å¯èƒ½ã«ãªã£ãŸãŒã€ITç’°å¢ƒã§ã®å®Ÿæ©Ÿç¢ºèªã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé‹ç”¨ç¢ºç´„ãŒæœªæç¤ºã€‚</p>
      </header>

      <div class="scoreboard">
        <div class="score-card">
          <h2>Gemini CLI (task-1768698174666-33e5ce) <span class="total-score">ğŸ¥‰ 395 / 600</span></h2>
          <p class="monitor-description">ãƒˆãƒ­ãƒ•ã‚£ãƒ¼: ğŸ¥‰ï¼ˆè¦ä»¶å……è¶³ã¯æ¦‚ã­å¯èƒ½ã ãŒã€å®Ÿç’°å¢ƒç¢ºèªãƒ»ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé‹ç”¨ä¿è¨¼ãŒæœªæç¤ºï¼‰</p>
          <div class="hex-grid">
            <div class="hex"><strong>å®Ÿç”¨æ€§</strong><span>80</span></div>
            <div class="hex"><strong>è¦ä»¶é©åˆ</strong><span>65</span></div>
            <div class="hex"><strong>å®‰å…¨æ€§</strong><span>75</span></div>
            <div class="hex"><strong>ãƒ†ã‚¹ãƒˆ/è¨¼è·¡</strong><span>40</span></div>
            <div class="hex"><strong>é‹ç”¨æ€§</strong><span>70</span></div>
            <div class="hex"><strong>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</strong><span>65</span></div>
          </div>
        </div>
        <div class="score-card">
          <h2>æ¯”è¼ƒæ  (æœªã‚¨ãƒ³ãƒˆãƒª) <span class="total-score">âšªï¸ 0 / 600</span></h2>
          <p class="monitor-description">ãƒˆãƒ­ãƒ•ã‚£ãƒ¼: âšªï¸ï¼ˆæ¯”è¼ƒå¯¾è±¡ãªã—ï¼‰</p>
          <div class="hex-grid">
            <div class="hex"><strong>â€”</strong><span>0</span></div>
            <div class="hex"><strong>â€”</strong><span>0</span></div>
            <div class="hex"><strong>â€”</strong><span>0</span></div>
            <div class="hex"><strong>â€”</strong><span>0</span></div>
            <div class="hex"><strong>â€”</strong><span>0</span></div>
            <div class="hex"><strong>â€”</strong><span>0</span></div>
          </div>
        </div>
      </div>

      <table class="monitor-report">
        <colgroup>
          <col class="timestamp-column" />
          <col class="agent-column" />
          <col class="agent-column" />
        </colgroup>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>Gemini CLI â€” task-1768698174666-33e5ce</th>
            <th>æ¯”è¼ƒæ </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="timestamp">2026-01-18 12:35</td>
            <td>
              <div class="agent-meta">
                <span class="status-badge status-badge--completed">å®Ÿè£…ã‚ã‚Š</span>
                <span class="agent-label">Stub ãƒ•ã‚£ãƒ«ã‚¿ã‚’è¿½åŠ ã—ã€ç’°å¢ƒã«å¿œã˜ã¦ /orca* ã®æœªæ¤œè¨¼çµŒè·¯ã‚’é®æ–­å¯èƒ½ã«ã—ãŸã€‚</span>
              </div>
              <div class="snapshot-summary">ä¸»ãªæˆæœã¨æŒ‡æ‘˜</div>
              <ul>
                <li>æ–°è¦ãƒ•ã‚£ãƒ«ã‚¿ <code>StubEndpointExposureFilter</code> ã‚’è¿½åŠ ã—ã€<code>web.xml</code> ã§ <code>/orca/*</code> ã«é©ç”¨ã€‚ç’°å¢ƒåãŒ prod/stg/it/uat ãªã©ã§å§‹ã¾ã‚‹å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé®æ–­ã€æ˜ç¤ºãƒ•ãƒ©ã‚°ã§é–‹æ”¾å¯ã€‚</li>
                <li>å¯¾è±¡ãƒ‘ã‚¹: <code>/orca/medical-sets</code>, <code>/orca/tensu/sync</code>, <code>/orca/birth-delivery</code>, <code>/orca/patient/mutation</code>, <code>/orca12/patientmodv2/outpatient</code>(mockå«ã‚€)ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ 404 <code>stub_endpoint_disabled</code> ã‚’è¿”ã™ã€‚</li>
                <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ <code>docs/server-modernization/stub-endpoint-control.md</code> ã¨ã‚¿ã‚¹ã‚¯æ­£æœ¬ <code>src/server_modernized_60117/02_exposure_control/Stubã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå…¬é–‹ç¯„å›²æ•´ç†.md</code> ã‚’æ›´æ–°ã—ã€ç’°å¢ƒå¤‰æ•°ã¨æ¤œè¨¼æ‰‹é †ã‚’è¨˜è¼‰ã€‚</li>
                <li>ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ <code>StubEndpointExposureFilterTest</code> ã§ãƒ‘ã‚¹æ¤œçŸ¥ãƒ»prodé®æ–­ãƒ»æ˜ç¤ºè¨±å¯ã‚’ç¢ºèªï¼ˆå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰è¨˜è¼‰ã®ã¿ã€E2E è¨¼è·¡ã¯æœªæ·»ä»˜ï¼‰ã€‚</li>
                <li>æ‡¸å¿µ: (a) IT/æœ¬ç•ªã§ <code>OPENDOLPHIN_ENVIRONMENT</code> ç­‰ãŒæœªè¨­å®šã®å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨±å¯ã¨ãªã‚Šéœ²å‡ºã™ã‚‹ãƒªã‚¹ã‚¯ã‚ã‚Šã€‚ (b) è¦ä»¶ã€ŒITç’°å¢ƒã§ã®é®æ–­ç¢ºèªã€ã®å®Ÿæ¸¬è¨¼è·¡ãŒæœªæå‡ºã€‚ (c) stub ãƒªã‚½ãƒ¼ã‚¹è‡ªä½“ã¯ resteasy ã§ä¾ç„¶ç™»éŒ²ã•ã‚ŒãŸã¾ã¾ã€‚</li>
              </ul>
              <details class="snapshot-details">
                <summary class="details-toggle">ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚° / å·®åˆ†</summary>
<pre>æœ€æ–°ã‚³ãƒŸãƒƒãƒˆ: 3f9ef9934 (2026-01-18 12:11 JST) chore: block stub orca endpoints in prod
å·®åˆ† (master..branch): 5 files, +336/-0
- server-modernized/src/main/java/open/dolphin/rest/StubEndpointExposureFilter.java  æ–°è¦
- server-modernized/src/main/webapp/WEB-INF/web.xml  ãƒ•ã‚£ãƒ«ã‚¿ç™»éŒ²
- server-modernized/src/test/java/open/dolphin/rest/StubEndpointExposureFilterTest.java  æ–°è¦
- docs/server-modernization/stub-endpoint-control.md  è¿½åŠ 
- src/server_modernized_60117/02_exposure_control/Stubã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå…¬é–‹ç¯„å›²æ•´ç†.md  è¿½è¨˜
æœªã‚³ãƒŸãƒƒãƒˆå¤‰æ›´: ãªã—</pre>
              </details>
            </td>
            <td>
              <div class="agent-meta">
                <span class="status-badge status-badge--warning">N/A</span>
                <span class="agent-label">æ¯”è¼ƒå¯¾è±¡ãªã—ã€‚</span>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <section style="margin-top:24px;">
        <h3 style="margin:0 0 8px 0; font-size:16px;">æ”¹å–„ææ¡ˆ</h3>
        <ul>
          <li>æœ¬ç•ª/IT ç’°å¢ƒã§ç¢ºå®Ÿã«é®æ–­ã™ã‚‹ãŸã‚ã€ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®šã« <code>OPENDOLPHIN_ENVIRONMENT=production</code> ã‚ã‚‹ã„ã¯ <code>OPENDOLPHIN_STUB_ENDPOINTS_MODE=block</code> ã‚’æ˜ç¤ºã—ã€å®Ÿæ©Ÿã§ 404 ã‚’å—ã‘ã‚‹è¨¼è·¡ã‚’å–å¾—ãƒ»æ·»ä»˜ã™ã‚‹ã€‚</li>
          <li>å®‰å…¨å¼·åŒ–ã¨ã—ã¦ã€prod ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ <code>resteasy.resources</code> ã¸ã® stub ãƒªã‚½ãƒ¼ã‚¹ç™»éŒ²è‡ªä½“ã‚’å¤–ã™ã€ã¾ãŸã¯ãƒ•ã‚£ãƒ«ã‚¿é€šéå¾Œã®ç›£æŸ»ãƒ­ã‚°è¨˜éŒ²ã‚’è¿½åŠ æ¤œè¨ã€‚</li>
          <li>E2E ãƒ†ã‚¹ãƒˆã‚’ 1 æœ¬è¿½åŠ ã—ã€é®æ–­ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒœãƒ‡ã‚£ <code>stub_endpoint_disabled</code> ã‚’ CI ã§æ¤œè¨¼ã™ã‚‹ã¨é‹ç”¨ãŒå®‰å®šã€‚</li>
        </ul>
      </section>
    </div>
  </body>
</html>
