<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ</title>
    <style>
      body {
        font-family: "Hiragino Sans", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        line-height: 1.6;
        margin: 24px;
        background-color: #e9f0f2;
        color: #1f2a30;
      }
      .monitor-wrapper {
        max-width: 1180px;
        margin: 0 auto;
        padding: 32px;
        background: #ffffff;
        border: 1px solid #c4d3d7;
      }
      .monitor-header {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 24px;
      }
      .monitor-title {
        font-size: 26px;
        font-weight: 700;
        letter-spacing: 0.04em;
        color: #1f2a30;
      }
      .monitor-description {
        font-size: 14px;
        color: #3a4b53;
      }
      .summary-box {
        background: #f2f6f7;
        border: 1px solid #c4d3d7;
        padding: 16px;
        margin-bottom: 24px;
      }
      .summary-box h2 {
        font-size: 16px;
        margin: 0 0 8px 0;
      }
      .summary-box p {
        margin: 0;
        font-size: 13px;
        color: #2c3a40;
      }
      .compare-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 16px;
      }
      .agent-card {
        background: #ffffff;
        border: 1px solid #c4d3d7;
        padding: 16px;
      }
      .agent-title {
        font-size: 15px;
        font-weight: 700;
        margin-bottom: 8px;
      }
      .score-banner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #d8e6e9;
        padding: 10px 12px;
        margin-bottom: 16px;
        font-weight: 700;
        font-size: 16px;
        color: #1f2a30;
      }
      .score-banner span {
        font-size: 18px;
      }
      .hex-wrap {
        display: grid;
        grid-template-columns: 200px 1fr;
        gap: 12px;
        align-items: center;
        margin-bottom: 12px;
      }
      .metric-list {
        margin: 0;
        padding-left: 16px;
        font-size: 12px;
        color: #2c3a40;
      }
      .metric-list li {
        margin-bottom: 4px;
      }
      .section-title {
        font-size: 13px;
        font-weight: 700;
        margin: 12px 0 8px 0;
        color: #2c3a40;
      }
      .evidence-box {
        background: #f2f6f7;
        border: 1px solid #c4d3d7;
        padding: 12px;
        font-size: 12px;
        white-space: pre-wrap;
      }
      .link-list {
        font-size: 12px;
        margin: 0;
        padding-left: 16px;
      }
      .link-list li {
        margin-bottom: 4px;
      }
      .reason-list {
        margin: 0;
        padding-left: 16px;
        font-size: 12px;
      }
      .reason-list li {
        margin-bottom: 6px;
      }
      .badge {
        display: inline-block;
        font-size: 10px;
        font-weight: 700;
        padding: 2px 6px;
        background: #e3edf0;
        border: 1px solid #cdd9dd;
        margin-right: 6px;
      }
      .hex-chart {
        width: 200px;
        height: 200px;
      }
      .hex-chart polygon.outer {
        fill: none;
        stroke: #9db3ba;
        stroke-width: 2;
      }
      .hex-chart polygon.area {
        fill: rgba(82, 136, 153, 0.35);
        stroke: #3b6b7a;
        stroke-width: 2;
      }
      .hex-chart line.axis {
        stroke: #c4d3d7;
        stroke-width: 1;
      }
      .hex-chart text {
        font-size: 10px;
        fill: #2c3a40;
      }
    </style>
  </head>
  <body>
    <div class="monitor-wrapper">
      <header class="monitor-header">
        <h1 class="monitor-title">è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ | PHR IdentityToken / Secrets</h1>
        <p class="monitor-description">server modernized gap implementation plan 20251221 / PHR_IdentityToken_Secrets ã®å®Ÿè£…ãƒ–ãƒ©ãƒ³ãƒæ¯”è¼ƒè©•ä¾¡</p>
      </header>

      <section class="summary-box">
        <h2>ã‚¿ã‚¹ã‚¯æ¦‚è¦</h2>
        <p>Layer ID Secrets ã®æ³¨å…¥ãƒ»ç›£æŸ»å¼·åŒ–ãŠã‚ˆã³ IdentityToken ç™ºè¡Œå¤±æ•—ç³»ã®è£œå®Œã‚’è©•ä¾¡å¯¾è±¡ã¨ã—ã€2ãƒ–ãƒ©ãƒ³ãƒã®ã‚³ãƒŸãƒƒãƒˆã¨å·®åˆ†ã‚’ç²¾æŸ»ã—ãŸã€‚è©•ä¾¡ã¯æ©Ÿèƒ½åˆç†æ€§ã¨ç·»å¯†æ€§ã‚’ä¸­å¿ƒã«ã€é‹ç”¨æ€§ãƒ»å®‰å…¨æ€§ãƒ»å¯èª­æ€§ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å«ã‚€6æŒ‡æ¨™ã§æ¡ç‚¹ã—ãŸã€‚</p>
      </section>

      <section class="compare-grid">
        <article class="agent-card">
          <div class="agent-title">codex / task-1766416647659-a4ae8c</div>
          <div class="score-banner">åˆè¨ˆç‚¹ 515 / 600 <span>ğŸ†</span></div>
          <div class="hex-wrap">
            <svg class="hex-chart" viewBox="0 0 200 200" data-values="90,86,88,85,84,82">
              <polygon class="outer" points="100,10 177.9,55 177.9,145 100,190 22.1,145 22.1,55"></polygon>
              <line class="axis" x1="100" y1="100" x2="100" y2="10"></line>
              <line class="axis" x1="100" y1="100" x2="177.9" y2="55"></line>
              <line class="axis" x1="100" y1="100" x2="177.9" y2="145"></line>
              <line class="axis" x1="100" y1="100" x2="100" y2="190"></line>
              <line class="axis" x1="100" y1="100" x2="22.1" y2="145"></line>
              <line class="axis" x1="100" y1="100" x2="22.1" y2="55"></line>
              <polygon class="area"></polygon>
            </svg>
            <ul class="metric-list">
              <li>æ©Ÿèƒ½åˆç†æ€§ 90ç‚¹</li>
              <li>ç·»å¯†æ€§ 86ç‚¹</li>
              <li>å®‰å…¨æ€§ 88ç‚¹</li>
              <li>å¯èª­æ€§ 85ç‚¹</li>
              <li>é‹ç”¨æ€§ 84ç‚¹</li>
              <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 82ç‚¹</li>
            </ul>
          </div>

          <div class="section-title">è©•ä¾¡ç†ç”±</div>
          <ul class="reason-list">
            <li>æ©Ÿèƒ½åˆç†æ€§: IdentityToken éµæ¬ è½/ä¸æ­£æ™‚ã®ä¾‹å¤–ã¨ 503 å¿œç­”ã‚’è¿½åŠ ã—ã€éšœå®³æ™‚ã®æŒ™å‹•ãŒæ˜ç¢ºã€‚</li>
            <li>ç·»å¯†æ€§: base64ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹åŒæ–¹ã®å¤±æ•—ç†ç”±ã‚’ reason/source ã§ç›£æŸ»ã«è¼‰ã›ã‚‹å®Ÿè£…ãŒä¸å¯§ã€‚</li>
            <li>å®‰å…¨æ€§: éµèª­è¾¼å¤±æ•—ã‚’å°‚ç”¨ä¾‹å¤–åŒ–ã—ç›£æŸ»ã«æ®‹ã™ç‚¹ã¯è‰¯ã„ãŒã€ãƒˆãƒ¼ã‚¯ãƒ³ãƒ­ã‚°å‡ºåŠ›ãŒæ®‹å­˜ã€‚</li>
            <li>å¯èª­æ€§: ä¾‹å¤–ã‚¯ãƒ©ã‚¹ã®å°å…¥ã§åˆ†å²ãŒæ•´ç†ã•ã‚Œã¦ã„ã‚‹ãŒã€PHRResource å´ã®å‡¦ç†è¿½åŠ ã¯ã‚„ã‚„é•·ã„ã€‚</li>
            <li>é‹ç”¨æ€§: `check-secrets.sh` ã« Layer ID éµæ¤œè¨¼ã‚’è¿½åŠ ã—äº‹å‰æ¤œçŸ¥ãŒå¯èƒ½ã€‚</li>
            <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: å®Ÿæ–½å†…å®¹ã¨æœªå®Ÿæ–½äº‹é …ãŒè¿½è¨˜ã•ã‚Œã¦ã„ã‚‹ãŒã€è¨­å®šä¾‹ã®è©³ç´°ã¯æ§ãˆã‚ã€‚</li>
          </ul>

          <div class="section-title">ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°</div>
          <div class="evidence-box">0e34226e Handle identity token secrets failures</div>

          <div class="section-title">å·®åˆ†ã‚µãƒãƒª</div>
          <div class="evidence-box">5 files changed, 168 insertions(+), 29 deletions(-)</div>

          <div class="section-title">æœªã‚³ãƒŸãƒƒãƒˆå¤‰æ›´</div>
          <div class="evidence-box">ãªã—</div>

          <div class="section-title">æˆæœç‰©ãƒªãƒ³ã‚¯</div>
          <ul class="link-list">
            <li><a href="../../server-modernized/src/main/java/open/dolphin/adm20/mbean/IdentityService.java">IdentityService.java</a></li>
            <li><a href="../../server-modernized/src/main/java/open/dolphin/adm20/mbean/IdentityTokenSecretsException.java">IdentityTokenSecretsException.java</a></li>
            <li><a href="../../server-modernized/src/main/java/open/dolphin/adm20/rest/PHRResource.java">PHRResource.java</a></li>
            <li><a href="../../ops/check-secrets.sh">ops/check-secrets.sh</a></li>
            <li><a href="../../src/server_modernized_gap_20251221/03_phr/PHR_IdentityToken_Secrets.md">PHR_IdentityToken_Secrets.md</a></li>
          </ul>
        </article>

        <article class="agent-card">
          <div class="agent-title">codex / task-1766416647496-9f2c43</div>
          <div class="score-banner">åˆè¨ˆç‚¹ 487 / 600 <span>ğŸ¥ˆ</span></div>
          <div class="hex-wrap">
            <svg class="hex-chart" viewBox="0 0 200 200" data-values="82,78,80,83,79,85">
              <polygon class="outer" points="100,10 177.9,55 177.9,145 100,190 22.1,145 22.1,55"></polygon>
              <line class="axis" x1="100" y1="100" x2="100" y2="10"></line>
              <line class="axis" x1="100" y1="100" x2="177.9" y2="55"></line>
              <line class="axis" x1="100" y1="100" x2="177.9" y2="145"></line>
              <line class="axis" x1="100" y1="100" x2="100" y2="190"></line>
              <line class="axis" x1="100" y1="100" x2="22.1" y2="145"></line>
              <line class="axis" x1="100" y1="100" x2="22.1" y2="55"></line>
              <polygon class="area"></polygon>
            </svg>
            <ul class="metric-list">
              <li>æ©Ÿèƒ½åˆç†æ€§ 82ç‚¹</li>
              <li>ç·»å¯†æ€§ 78ç‚¹</li>
              <li>å®‰å…¨æ€§ 80ç‚¹</li>
              <li>å¯èª­æ€§ 83ç‚¹</li>
              <li>é‹ç”¨æ€§ 79ç‚¹</li>
              <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 85ç‚¹</li>
            </ul>
          </div>

          <div class="section-title">è©•ä¾¡ç†ç”±</div>
          <ul class="reason-list">
            <li>æ©Ÿèƒ½åˆç†æ€§: ç›£æŸ»ãƒ¡ã‚¿ã« Layer è¨­å®šæƒ…å ±ã‚’è¿½åŠ ã—èª¿æŸ»æ€§ãŒå‘ä¸Šã€‚</li>
            <li>ç·»å¯†æ€§: ç§˜å¯†éµã‚½ãƒ¼ã‚¹ã®åˆ¤å®šã¯ã‚ã‚‹ãŒã€éµæœªè¨­å®šãƒ»ä¸æ­£æ™‚ã®ä¾‹å¤–å‡¦ç†ã¯æœªè£œå®Œã€‚</li>
            <li>å®‰å…¨æ€§: ç½²åæ¸ˆã¿ãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒ­ã‚°å‡ºåŠ›ã‚’é™¤å»ã§ãã¦ã„ã‚‹ç‚¹ã¯è‰¯ã„ã€‚</li>
            <li>å¯èª­æ€§: IdentityService ã®èª¬æ˜ç”¨ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ ã§è²¬å‹™ãŒæ˜ç¢ºã€‚</li>
            <li>é‹ç”¨æ€§: env sample ã«è¨­å®šé …ç›®ã‚’è¿½åŠ ã—ã€é‹ç”¨æ™‚ã®æ¼ã‚Œã‚’æŠ‘åˆ¶ã€‚</li>
            <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: å®Ÿæ–½å†…å®¹ãƒ»ç’°å¢ƒå¤‰æ•°ãƒ»æ ¹æ‹ ãŒæ˜è¨˜ã•ã‚Œã€å·®åˆ†æ„å›³ãŒèª­ã¿ã‚„ã™ã„ã€‚</li>
          </ul>

          <div class="section-title">ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°</div>
          <div class="evidence-box">273aac3d PHR IdentityToken secrets metadata and config</div>

          <div class="section-title">å·®åˆ†ã‚µãƒãƒª</div>
          <div class="evidence-box">4 files changed, 65 insertions(+), 21 deletions(-)</div>

          <div class="section-title">æœªã‚³ãƒŸãƒƒãƒˆå¤‰æ›´</div>
          <div class="evidence-box">ãªã—</div>

          <div class="section-title">æˆæœç‰©ãƒªãƒ³ã‚¯</div>
          <ul class="link-list">
            <li><a href="../../server-modernized/config/server-modernized.env.sample">server-modernized.env.sample</a></li>
            <li><a href="../../server-modernized/src/main/java/open/dolphin/adm20/mbean/IdentityService.java">IdentityService.java</a></li>
            <li><a href="../../server-modernized/src/main/java/open/dolphin/adm20/rest/PHRResource.java">PHRResource.java</a></li>
            <li><a href="../../src/server_modernized_gap_20251221/03_phr/PHR_IdentityToken_Secrets.md">PHR_IdentityToken_Secrets.md</a></li>
          </ul>
        </article>
      </section>
    </div>

    <script>
      (function () {
        const SIZE = 90;
        const CENTER = 100;
        const STEP = (Math.PI * 2) / 6;
        document.querySelectorAll(".hex-chart").forEach((chart) => {
          const values = (chart.dataset.values || "").split(",").map((v) => Number(v.trim()));
          if (values.length !== 6) return;
          const points = values
            .map((value, idx) => {
              const r = (Math.max(0, Math.min(100, value)) / 100) * SIZE;
              const angle = -Math.PI / 2 + idx * STEP;
              const x = CENTER + r * Math.cos(angle);
              const y = CENTER + r * Math.sin(angle);
              return `${x.toFixed(1)},${y.toFixed(1)}`;
            })
            .join(" ");
          const polygon = chart.querySelector("polygon.area");
          if (polygon) polygon.setAttribute("points", points);
        });
      })();
    </script>
  </body>
</html>
