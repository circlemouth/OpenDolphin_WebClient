<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>API404ä¿®æ­£æ–¹é‡æ±ºå®šã¨å®Ÿè£… â€” è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ</title>
    <style>
      body { font-family: "Hiragino Sans", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, sans-serif; line-height: 1.6; margin: 24px; background-color: #e9f0f2; color: #1f2a30; }
      .monitor-wrapper { max-width: 1180px; margin: 0 auto; padding: 32px; background: #ffffff; border: 1px solid #c4d3d7; }
      .monitor-header { display: flex; flex-direction: column; gap: 8px; margin-bottom: 24px; }
      .monitor-title { font-size: 26px; font-weight: 700; letter-spacing: 0.04em; color: #1f2a30; }
      .monitor-description { font-size: 14px; color: #3a4b53; }
      .scoreband { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; margin-bottom: 22px; }
      .scorecard { border: 1px solid #c4d3d7; background: #f7fafb; padding: 14px 16px; border-radius: 6px; }
      .scorecard h2 { margin: 0 0 6px; font-size: 16px; font-weight: 700; }
      .totalscore { font-size: 22px; font-weight: 800; display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
      .hex-wrap { display: flex; gap: 12px; align-items: center; }
      .hex-chart { width: 120px; height: 120px; }
      .metric-list { margin: 0; padding-left: 16px; font-size: 12px; color: #2c3a40; }
      .metric-list li { margin: 0 0 2px; }
      table.monitor-report { width: 100%; border-collapse: collapse; table-layout: fixed; background: #ffffff; border: 1px solid #c4d3d7; }
      col.timestamp-column { width: 180px; }
      col.agent-column { width: calc((100% - 180px) / 3); }
      th, td { border: 1px solid #c4d3d7; padding: 12px; vertical-align: top; background-color: #ffffff; }
      th { background: #d8e6e9; text-align: left; font-size: 13px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; color: #2c3a40; }
      tbody tr:nth-child(even) td { background-color: #eef3f4; }
      details { display: block; margin: 0; }
      details summary { list-style: none; cursor: pointer; font-weight: 600; }
      details[open] summary { margin-bottom: 8px; }
      pre { white-space: pre-wrap; word-break: break-word; margin: 0; font-size: 12px; line-height: 1.55; color: #1f2a30; background: #f2f6f7; border: 1px solid #c4d3d7; padding: 12px; }
      .status-badge { display: inline-block; font-size: 10px; font-weight: 700; letter-spacing: 0.02em; padding: 2px 6px; background: #d8e6e9; border: 1px solid #b8c9cd; color: #1f2a30; white-space: nowrap; line-height: 1.3; vertical-align: top; border-radius: 3px; }
      .status-badge--ok { background: #d1e7dd; border-color: #a3cfbb; color: #0f5132; }
      .status-badge--warn { background: #fff3cd; border-color: #f0e5a5; color: #664d03; }
      .status-badge--error { background: #f8d7da; border-color: #f1aeb5; color: #842029; }
      .agent-label { font-size: 13px; color: #3a4b53; margin-left: 4px; }
    </style>
  </head>
  <body>
    <div class="monitor-wrapper">
      <header class="monitor-header">
        <h1 class="monitor-title">API404ä¿®æ­£æ–¹é‡æ±ºå®šã¨å®Ÿè£… â€” å†è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ</h1>
        <p class="monitor-description">å¯¾è±¡ãƒ–ãƒ©ãƒ³ãƒ: task-1765410171432-512d45 / task-1765410171684-919162 / task-1765410171835-ded9dcã€‚master ã¨æ¯”è¼ƒã—ã€acceptlstv2 404 è§£æ¶ˆã®å®Ÿè£…å†…å®¹ã¨ãƒ†ã‚¹ãƒˆã‚’ç¢ºèªã—ãŸã€‚</p>
      </header>

      <div class="scoreband">
        <div class="scorecard" data-metrics="90,88,85,88,86,84" data-total="521" data-medal="gold">
          <h2>task-1765410171432-512d45</h2>
          <div class="totalscore">ğŸ† 521 / 600</div>
          <div class="hex-wrap">
            <svg class="hex-chart" viewBox="0 0 120 120" aria-label="å…­è§’ãƒãƒ£ãƒ¼ãƒˆ"></svg>
            <ul class="metric-list">
              <li>æ©Ÿèƒ½åˆç†æ€§ 90</li>
              <li>ç·»å¯†æ€§ 88</li>
              <li>ãƒ†ã‚¹ãƒˆç¶²ç¾… 85</li>
              <li>ã‚³ãƒ¼ãƒ‰å“è³ª 88</li>
              <li>è¨­è¨ˆæ•´åˆ 86</li>
              <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 84</li>
            </ul>
          </div>
        </div>
        <div class="scorecard" data-metrics="78,72,75,75,70,70" data-total="440" data-medal="bronze">
          <h2>task-1765410171684-919162</h2>
          <div class="totalscore">ğŸ¥‰ 440 / 600</div>
          <div class="hex-wrap">
            <svg class="hex-chart" viewBox="0 0 120 120" aria-label="å…­è§’ãƒãƒ£ãƒ¼ãƒˆ"></svg>
            <ul class="metric-list">
              <li>æ©Ÿèƒ½åˆç†æ€§ 78</li>
              <li>ç·»å¯†æ€§ 72</li>
              <li>ãƒ†ã‚¹ãƒˆç¶²ç¾… 75</li>
              <li>ã‚³ãƒ¼ãƒ‰å“è³ª 75</li>
              <li>è¨­è¨ˆæ•´åˆ 70</li>
              <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 70</li>
            </ul>
          </div>
        </div>
        <div class="scorecard" data-metrics="70,65,55,70,68,72" data-total="400" data-medal="bronze">
          <h2>task-1765410171835-ded9dc</h2>
          <div class="totalscore">ğŸ¥‰ 400 / 600</div>
          <div class="hex-wrap">
            <svg class="hex-chart" viewBox="0 0 120 120" aria-label="å…­è§’ãƒãƒ£ãƒ¼ãƒˆ"></svg>
            <ul class="metric-list">
              <li>æ©Ÿèƒ½åˆç†æ€§ 70</li>
              <li>ç·»å¯†æ€§ 65</li>
              <li>ãƒ†ã‚¹ãƒˆç¶²ç¾… 55</li>
              <li>ã‚³ãƒ¼ãƒ‰å“è³ª 70</li>
              <li>è¨­è¨ˆæ•´åˆ 68</li>
              <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 72</li>
            </ul>
          </div>
        </div>
      </div>

      <table class="monitor-report">
        <colgroup>
          <col class="timestamp-column" />
          <col class="agent-column" />
          <col class="agent-column" />
          <col class="agent-column" />
        </colgroup>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>task-1765410171432-512d45</th>
            <th>task-1765410171684-919162</th>
            <th>task-1765410171835-ded9dc</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="timestamp">2025-12-11 09:03</td>
            <td>
              <span class="status-badge status-badge--ok">å®Œäº†</span>
              <span class="agent-label">acceptlstv2 ã‚’ XML ã‚¹ã‚¿ãƒ–ã§å®Ÿè£…ã€/api/ äºŒé‡ãƒ‘ã‚¹ã‚‚å¸åã€‚Audit + Run-Id ä»˜ä¸ã€å˜ä½“ãƒ†ã‚¹ãƒˆã‚ã‚Šã€‚</span>
              <details>
                <summary>å·®åˆ†ãƒ»ã‚³ãƒŸãƒƒãƒˆ</summary>
                <pre>git log -1 task/task-1765410171432-512d45:
5e1a3646 fix: acceptlstv2ã‚¹ã‚¿ãƒ–è¿½åŠ ã¨ãƒ–ãƒªãƒƒã‚¸çµŒè·¯ä¿®æ­£

ä¸»ãªå·®åˆ†:
- scripts/orca_prod_bridge.sh ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ API ãƒ‘ã‚¹ã‚’ `/api01rv2/acceptlstv2` ã«ä¿®æ­£ã€‚
- OrcaEndpoint ã« ACCEPTANCE_LIST ã‚’è¿½åŠ ã€ã‚¹ã‚¿ãƒ– XML ã‚‚è¿½åŠ ã€‚
- æ–°ãƒªã‚½ãƒ¼ã‚¹ open.dolphin.rest.OrcaAcceptanceListResource ã‚’è¿½åŠ ã—ã€/api01rv2 ã¨ /api/api01rv2 ã®ä¸¡çµŒè·¯ã§ 200 ã‚’è¿”å´ã€‚Audit/trace å¯¾å¿œã€‚
- å˜ä½“ãƒ†ã‚¹ãƒˆ OrcaAcceptanceListResourceTest ã§ãƒ«ãƒ¼ãƒˆã¨ç›£æŸ»ã‚’æ¤œè¨¼ã€‚
- DOC_STATUS / å®Ÿè£…ãƒ¡ãƒ¢ã‚’ RUN_ID=20251210T234513Z ã§æ›´æ–°ã€‚</pre>
              </details>
              <details>
                <summary>è©•ä¾¡ç†ç”±</summary>
                <pre>- 404 ä¸»å› ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ¬ è½ã‚’ãƒªã‚½ãƒ¼ã‚¹ç™»éŒ² + web.xml ã§è§£æ¶ˆã€‚èª¤ãƒ‘ã‚¹ã‚‚å¸åã—ã¦å›å¸°ãƒªã‚¹ã‚¯ã‚’ä¸‹ã’ãŸ (æ©Ÿèƒ½åˆç†æ€§/è¨­è¨ˆæ•´åˆ)ã€‚
- orcaTransport çµŒç”±ã§ã‚¹ã‚¿ãƒ– XML ã‚’è¿”å´ã—å®Ÿè£…ç½®æ›ã—ã‚„ã™ã„æ§‹é€ ã«ã—ã¦ã„ã‚‹ (ã‚³ãƒ¼ãƒ‰å“è³ª)ã€‚
- Audit ã« trace/request/runId ã‚’è¨˜éŒ²ã—æ¤œè¨¼ãƒ­ã‚°è¦ä»¶ã‚’æº€ãŸã™ (ç·»å¯†æ€§)ã€‚
- JUnit ã§ 2 çµŒè·¯ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹/Audit ã‚’ã‚«ãƒãƒ¼ (ãƒ†ã‚¹ãƒˆç¶²ç¾…)ã€‚
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ API ãƒ‘ã‚¹ã‚’ä¿®æ­£ã—ã€èª¿æŸ»ãƒ­ã‚°ã¨ DOC_STATUS ã‚’æ›´æ–° (ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ)ã€‚</pre>
              </details>
            </td>
            <td>
              <span class="status-badge status-badge--warn">ä¸€éƒ¨ä¸è¶³</span>
              <span class="agent-label">/api01rv2 ã®ã¿ JSON ã‚¹ã‚¿ãƒ–ã‚’è¿”å´ã€‚404 ã¯è§£æ¶ˆã™ã‚‹ãŒ /api/api01rv2 ã®èª¤çµŒè·¯ã¯æœªå¯¾å¿œã€æˆ»ã‚Šå½¢å¼ã‚‚ ORCA XML ã¨ç•°ãªã‚‹ã€‚</span>
              <details>
                <summary>å·®åˆ†ãƒ»ã‚³ãƒŸãƒƒãƒˆ</summary>
                <pre>git log -1 task/task-1765410171684-919162:
34ee4a7f Add acceptlstv2 stub endpoint to resolve API404

ä¸»ãªå·®åˆ†:
- æ–°ãƒªã‚½ãƒ¼ã‚¹ open.dolphin.rest.orca.OrcaAcceptanceListResource ã‚’è¿½åŠ ã— JSON stub (Api_Result=21) ã‚’è¿”å´ã€‚
- Audit è©³ç´°ã« facilityId ãªã©ã‚’æ®‹ã—ã€RUN_ID=20251210T150500Z ã‚’åŸ‹ã‚è¾¼ã¿ã€‚
- å˜ä½“ãƒ†ã‚¹ãƒˆ OrcaAcceptanceListResourceTest ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã¨ç›£æŸ»ã‚’æ¤œè¨¼ã€‚
- DOC_STATUS ã¨å®Ÿè£…ãƒ¡ãƒ¢ã‚’æ›´æ–°ã€‚</pre>
              </details>
              <details>
                <summary>è©•ä¾¡ç†ç”±</summary>
                <pre>- 404 è§£æ¶ˆã¯é”æˆã€‚ãŸã ã— /api/api01rv2/acceptlstv2 ã®èª¤çµŒè·¯å¸åãŒãªãã€æœ¬ç•ªãƒ–ãƒªãƒƒã‚¸ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹ã‚’å¤‰ãˆãªã„å ´åˆ 404 ãŒæ®‹ã‚‹ (æ©Ÿèƒ½åˆç†æ€§â–²)ã€‚
- ORCA æœ¬æ¥ã® XML ã§ã¯ãªã JSON ã‚’è¿”ã™ãŸã‚äº’æ›æ€§ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ (ã‚³ãƒ¼ãƒ‰å“è³ª/è¨­è¨ˆæ•´åˆâ–²)ã€‚
- å˜ä½“ãƒ†ã‚¹ãƒˆã§åŸºæœ¬æŒ™å‹•ã¯ç¢ºèªæ¸ˆã¿ (ãƒ†ã‚¹ãƒˆç¶²ç¾…â—‹)ã€‚
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„ dev proxy è¨­å®šã¸ã®åæ˜ ãªã—ã€æ®‹èª²é¡Œã®æ˜è¨˜ã‚‚é™å®šçš„ (ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆâ–²)ã€‚</pre>
              </details>
            </td>
            <td>
              <span class="status-badge status-badge--warn">ä¸€éƒ¨ä¸è¶³</span>
              <span class="agent-label">/api01rv2 ã® JSON ã‚¹ã‚¿ãƒ–ã‚’è¿½åŠ ã— 404 ã¯è§£æ¶ˆã€‚ãŸã ã—èª¤ãƒ‘ã‚¹æœªå¸åãƒ»ãƒ†ã‚¹ãƒˆãªã—ãƒ»Audit è©³ç´°ãŒç°¡æ˜“ã€‚</span>
              <details>
                <summary>å·®åˆ†ãƒ»ã‚³ãƒŸãƒƒãƒˆ</summary>
                <pre>git log -1 task/task-1765410171835-ded9dc:
92b7c3c0 Add acceptlstv2 stub endpoint to resolve API404

ä¸»ãªå·®åˆ†:
- æ–°ãƒªã‚½ãƒ¼ã‚¹ open.dolphin.rest.orca.OrcaAcceptListV2Resource ã‚’è¿½åŠ ã—ã€ã‚¹ã‚¿ãƒ– JSON ã‚’è¿”å´ã€‚
- ã‚¹ã‚¿ãƒ–ãƒ•ã‚¡ã‚¤ãƒ« orca/stub/05_acceptlstv2_response.sample.json ã‚’è¿½åŠ ã€‚
- web.xml ã«ãƒªã‚½ãƒ¼ã‚¹ã‚’ç™»éŒ²ã€‚DOC_STATUS ã¨è¨¼è·¡ãƒ­ã‚°ã‚’ RUN_ID=20251210T234514Z ã§è¿½åŠ ã€‚
- ãƒ“ãƒ«ãƒ‰ã®ã¿å®Ÿè¡Œ (ãƒ†ã‚¹ãƒˆè¿½åŠ ãªã—)ã€‚</pre>
              </details>
              <details>
                <summary>è©•ä¾¡ç†ç”±</summary>
                <pre>- 404 ã¯è§£æ¶ˆã™ã‚‹ãŒ /api/api01rv2/acceptlstv2 ã¯æœªå¸å (æ©Ÿèƒ½åˆç†æ€§â–²)ã€‚
- æˆ»ã‚Š JSON ã¯ ORCA XML äº’æ›ã§ãªãã€ãƒ•ãƒ­ãƒ³ãƒˆå´æœŸå¾…ã«ã‚ºãƒ¬ã‚‹å¯èƒ½æ€§ (è¨­è¨ˆæ•´åˆâ–²)ã€‚
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç›£æŸ»ã¯è¡Œã†ãŒè¨˜éŒ²é …ç›®ãŒé™å®šçš„ã€‚å˜ä½“ãƒ†ã‚¹ãƒˆãŒç„¡ãå›å¸°æ¤œçŸ¥ã«å¼±ã„ (ç·»å¯†æ€§/ãƒ†ã‚¹ãƒˆç¶²ç¾…â–²)ã€‚
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆ/ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã¸ã®è¨€åŠãªã—ã€æ®‹èª²é¡Œã¯ãƒ¡ãƒ¢ã«è¨˜è¼‰ (ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆâ–³)ã€‚</pre>
              </details>
            </td>
          </tr>
        </tbody>
      </table>

      <p style="margin-top:20px;font-size:13px;color:#2c3a40;">è£œè¶³: .kamui é…ä¸‹ã«æ—¢å­˜ã®æœªã‚³ãƒŸãƒƒãƒˆå¤‰æ›´ãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›è©•ä¾¡å¯¾è±¡ã®3ãƒ–ãƒ©ãƒ³ãƒã¨ã¯ç„¡é–¢ä¿‚ã§ã™ã€‚</p>
    </div>
    <script>
      // ç°¡æ˜“å…­è§’ãƒãƒ£ãƒ¼ãƒˆæç”»
      document.querySelectorAll('.scorecard').forEach((card) => {
        const svg = card.querySelector('.hex-chart');
        const metrics = card.dataset.metrics.split(',').map((n) => parseInt(n.trim(), 10));
        const radius = 50;
        const center = { x: 60, y: 60 };
        const outline = [];
        for (let i = 0; i < 6; i++) {
          const angle = (Math.PI / 3) * i - Math.PI / 6; // start flat-top
          const x = center.x + radius * Math.cos(angle);
          const y = center.y + radius * Math.sin(angle);
          outline.push(`${x},${y}`);
        }
        const scalePoints = metrics.map((v, i) => {
          const angle = (Math.PI / 3) * i - Math.PI / 6;
          const r = (radius * v) / 100;
          const x = center.x + r * Math.cos(angle);
          const y = center.y + r * Math.sin(angle);
          return `${x},${y}`;
        });
        svg.innerHTML = `
          <polygon points="${outline.join(' ')}" fill="#eef3f4" stroke="#c4d3d7" />
          <polygon points="${scalePoints.join(' ')}" fill="#cfe2ff" stroke="#4b8ef7" />
        `;
      });
    </script>
  </body>
</html>
