<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ</title>
    <style>
      body { font-family: "Hiragino Sans", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, sans-serif; line-height: 1.6; margin: 24px; background-color: #e9f0f2; color: #1f2a30; }
      .monitor-wrapper { max-width: 1180px; margin: 0 auto; padding: 32px; background: #ffffff; border: 1px solid #c4d3d7; }
      .monitor-header { display: flex; flex-direction: column; gap: 8px; margin-bottom: 24px; }
      .monitor-title { font-size: 26px; font-weight: 700; letter-spacing: 0.04em; color: #1f2a30; }
      .monitor-description { font-size: 14px; color: #3a4b53; }
      .scoreboard { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin: 12px 0 20px; }
      .score-card { padding: 12px; border: 1px solid #c4d3d7; background: #f6fafb; }
      .score-card h2 { margin: 0 0 6px; font-size: 18px; }
      .score-card .total { font-size: 24px; font-weight: 700; }
      .label { font-size: 12px; color: #3a4b53; }
      table.monitor-report { width: 100%; border-collapse: collapse; table-layout: fixed; background: #ffffff; border: 1px solid #c4d3d7; }
      col.timestamp-column { width: 180px; }
      col.agent-column { width: calc((100% - 180px) / 2); }
      th, td { border: 1px solid #c4d3d7; padding: 16px; vertical-align: top; background-color: #ffffff; }
      th { background: #d8e6e9; text-align: left; font-size: 13px; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; color: #2c3a40; }
      tbody tr:nth-child(even) td { background-color: #eef3f4; }
      .agent-meta { display: block; margin-bottom: 8px; line-height: 1.5; }
      .status-badge { display: inline-block; font-size: 10px; font-weight: 600; letter-spacing: 0.02em; padding: 1px 6px; background: #d8e6e9; border: 1px solid #b8c9cd; color: #1f2a30; white-space: nowrap; line-height: 1.3; vertical-align: top; margin-right: 6px; }
      .status-badge--pass { background: #d9f4dd; border-color: #b2e4b9; }
      .status-badge--fail { background: #f8d7da; border-color: #f1aeb5; }
      .agent-label { display: inline; font-size: 13px; color: #3a4b53; }
      details { display: block; margin: 0; }
      details summary { list-style: none; cursor: pointer; }
      details[open] summary { margin-bottom: 12px; }
      .details-toggle { display: inline-flex; align-items: center; gap: 6px; cursor: pointer; font-weight: 500; font-size: 13px; color: #1f2a30; padding: 0; background: transparent; border: none; }
      .details-toggle::before { content: "â–¶"; font-size: 10px; transition: transform 160ms ease; display: inline-block; }
      details[open] .details-toggle::before { transform: rotate(90deg); }
      .radar { width: 220px; height: 190px; }
      .metric-list { margin: 8px 0 0; padding: 0; list-style: none; font-size: 12px; color: #2c3a40; }
      .metric-list li { margin: 2px 0; }
      pre { white-space: pre-wrap; word-break: break-word; margin: 0; font-size: 12px; line-height: 1.55; color: #1f2a30; background: #f2f6f7; border: 1px solid #c4d3d7; padding: 16px; }
      .snapshot-summary { margin-bottom: 12px; font-weight: 500; color: #2c3a40; }
    </style>
  </head>
  <body>
    <div class="monitor-wrapper">
      <header class="monitor-header">
        <h1 class="monitor-title">ModuleModelãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ‹¡å¼µ å†è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ</h1>
        <p class="monitor-description">ã‚¿ã‚¹ã‚¯: task-1765679974272-ba159e / task-1765679974071-5c79d6 â€” beanBytes nullableåŒ–ã¨beanJsonè¿½åŠ ã«é–¢ã™ã‚‹æœ€æ–°ç‰ˆã®æ¯”è¼ƒã€‚</p>
      </header>
      <div class="scoreboard">
        <div class="score-card">
          <h2>task-1765679974272-ba159e</h2>
          <div class="total">âŒ 185 / 600</div>
          <div class="label">å¤‰æ›´ãªã—: ã‚¹ã‚­ãƒ¼ãƒ/ãƒ‡ã‚³ãƒ¼ãƒ‰æœªå¯¾å¿œã§è¦ä»¶æœªé”ã€‚</div>
        </div>
        <div class="score-card">
          <h2>task-1765679974071-5c79d6</h2>
          <div class="total">ğŸ¥ˆ 468 / 600</div>
          <div class="label">JSONä½µç”¨ä¿å­˜ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…ã€‚ãƒ†ã‚¹ãƒˆæœªå®Ÿæ–½ãŒèª²é¡Œã€‚</div>
        </div>
      </div>
      <table class="monitor-report">
        <colgroup>
          <col class="timestamp-column" />
          <col class="agent-column" />
          <col class="agent-column" />
        </colgroup>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>codex / task-1765679974272-ba159e</th>
            <th>codex / task-1765679974071-5c79d6</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="timestamp">2025-12-14 12:05</td>
            <td>
              <div class="agent-meta"><span class="status-badge status-badge--fail">è©•ä¾¡</span><span class="agent-label">beanBytes nullableåŒ–ã¨beanJsonè¿½åŠ ã®ã¿ã€‚ç§»è¡Œãƒ»ãƒ‡ã‚³ãƒ¼ãƒ‰æœªæ•´å‚™ã€‚</span></div>
              <svg class="radar" viewBox="0 0 220 190" data-metrics="35,30,60,40,10,10"></svg>
              <ul class="metric-list">
                <li>è¦ä»¶å……è¶³åº¦ 35: ã‚¹ã‚­ãƒ¼ãƒãƒ»èª­ã¿å‡ºã—æœªå¯¾å¿œã§ä¿å­˜ã®ã¿ã€‚</li>
                <li>å¾Œæ–¹äº’æ›æ€§ 30: nullableåŒ–ã®ã¿ã§ç§»è¡Œ/åˆæœŸå€¤æ¬ å¦‚ã€‚</li>
                <li>ã‚³ãƒ¼ãƒ‰å“è³ª 60: ã‚·ãƒ³ãƒ—ãƒ«ã ãŒå‹æŒ‡å®šä¸è¶³ã€‚</li>
                <li>è¨­è¨ˆå¦¥å½“æ€§ 40: converter/ã‚µãƒ¼ãƒ“ã‚¹é€£å‹•ãªã—ã€‚</li>
                <li>ãƒ†ã‚¹ãƒˆ/æ¤œè¨¼ 10: å®Ÿæ–½ãªã—ã€‚</li>
                <li>ç§»è¡Œãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 10: Flywayç­‰ãªã—ã€‚</li>
              </ul>
              <details class="snapshot-details">
                <summary class="details-toggle">å·®åˆ†ãƒ»ãƒ­ã‚°</summary>
                <pre>ã‚³ãƒŸãƒƒãƒˆ: f58ff922 feat: ModuleModelãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ‹¡å¼µ
å¤‰æ›´: common/src/main/java/open/dolphin/infomodel/ModuleModel.java
- beanBytes nullableåŒ–ã€beanJsonè¿½åŠ /cloneåæ˜ ã®ã¿ã€‚
æ‡¸å¿µ: DDL/ãƒ‡ã‚³ãƒ¼ãƒ‰/ä¿å­˜çµŒè·¯ã¯æœªå¤‰æ›´ã€‚</pre>
              </details>
            </td>
            <td>
              <div class="agent-meta"><span class="status-badge status-badge--pass">è©•ä¾¡</span><span class="agent-label">JSONä½µç”¨ä¿å­˜ãƒ»ãƒ‡ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ»DDLãƒ»ãƒ­ã‚°æ•´å‚™ã‚’å®Ÿæ–½ã€‚</span></div>
              <svg class="radar" viewBox="0 0 220 190" data-metrics="92,88,86,84,20,98"></svg>
              <ul class="metric-list">
                <li>è¦ä»¶å……è¶³åº¦ 92: beanJsonä¿å­˜/èª­ã¿å‡ºã—ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ç¶²ç¾…ã€‚</li>
                <li>å¾Œæ–¹äº’æ›æ€§ 88: XMLã‚’æ®‹ã—decodeã§JSONå¤±æ•—æ™‚WARNâ†’XMLã«å›å¸°ã€‚</li>
                <li>ã‚³ãƒ¼ãƒ‰å“è³ª 86: å¤‰æ›å±¤ä¸€æ‹¬å¯¾å¿œãƒ»ãƒ­ã‚°è¿½åŠ ãƒ»å‹æŒ‡å®šæ˜ç¢ºåŒ–ã€‚</li>
                <li>è¨­è¨ˆå¦¥å½“æ€§ 84: JSON+XMLäºŒé‡ä¿å­˜ã§å®‰å…¨ã€‚ä¾‹å¤–å–æ‰±ã¯WARNæ­¢ã¾ã‚Šã€‚</li>
                <li>ãƒ†ã‚¹ãƒˆ/æ¤œè¨¼ 20: è‡ªå‹•ãƒ†ã‚¹ãƒˆæœªå®Ÿæ–½ã€‚æ‰‹å‹•ç¢ºèªè¨˜è¼‰ãªã—ã€‚</li>
                <li>ç§»è¡Œãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 98: Flyway V0229ã€DOC_STATUSã€è¨¼è·¡ãƒ­ã‚°ã‚’æ›´æ–°ã€‚</li>
              </ul>
              <details class="snapshot-details">
                <summary class="details-toggle">å·®åˆ†ãƒ»ãƒ­ã‚°</summary>
                <pre>æœ€æ–°ã‚³ãƒŸãƒƒãƒˆ: a633b3af Persist ModuleModel payload as JSON alongside XML
ä¸»å¤‰æ›´:
- ModelUtils: jsonEncodeè¿½åŠ ã€decodeModuleã§JSONâ†’XMLãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€SLF4Jãƒ­ã‚°WARNã€‚
- å¤‰æ›å±¤(adm10/adm20/touch)ãƒ»Service: beanJsonã¸JSONã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ä¿å­˜ã€å¾“æ¥beanBytesã‚‚ä½µå­˜ã€‚
- Schedule/Admission/KarteService: decodeModuleå‘¼ã³å‡ºã—ãªã©ã§JSONå¯¾å¿œã€‚
- Flyway V0229: beanBytes NOT NULLè§£é™¤ + beanJson TEXTè¿½åŠ ã€‚
- DOC_STATUSæ›´æ–°ã€è¨¼è·¡: docs/server-modernization/phase2/operations/logs/20251214T025057Z-module-model-json.mdã€‚
æ‡¸å¿µ: è‡ªå‹•ãƒ†ã‚¹ãƒˆæœªå®Ÿæ–½ã€JSONã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºå¤±æ•—æ™‚ã®beanBytesã¸ã®æ˜ç¤ºãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯ä¿å­˜å´ã§ãªã—ã€‚</pre>
              </details>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <script>
      (function() {
        function drawRadar(svg) {
          const metrics = (svg.getAttribute('data-metrics') || '').split(',').map(Number);
          if (metrics.length !== 6) return;
          const cx = 110, cy = 95, r = 80;
          const axes = 6;
          const toPoint = (i, value) => {
            const angle = -Math.PI / 2 + (2 * Math.PI * i / axes);
            const radius = r * (value / 100);
            return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)];
          };
          const bg = [];
          for (let i = 0; i < axes; i++) bg.push(toPoint(i, 100));
          const pg = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
          pg.setAttribute('points', bg.map(p => p.join(',')).join(' '));
          pg.setAttribute('fill', '#eef3f4');
          pg.setAttribute('stroke', '#c4d3d7');
          pg.setAttribute('stroke-width', '1');
          svg.appendChild(pg);
          const data = [];
          for (let i = 0; i < axes; i++) data.push(toPoint(i, metrics[i]));
          const dg = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
          dg.setAttribute('points', data.map(p => p.join(',')).join(' '));
          dg.setAttribute('fill', 'rgba(67, 138, 201, 0.35)');
          dg.setAttribute('stroke', '#2b6cb0');
          dg.setAttribute('stroke-width', '2');
          svg.appendChild(dg);
        }
        document.querySelectorAll('svg.radar').forEach(drawRadar);
      })();
    </script>
  </body>
</html>
