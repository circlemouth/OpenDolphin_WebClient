<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ: ç—…åã¨å‡¦æ–¹/ã‚ªãƒ¼ãƒ€ãƒ¼ç·¨é›†ã®å®Ÿè£…ï¼ˆè¿½åŠ ä½œæ¥­è©•ä¾¡ï¼‰</title>
    <style>
      body {
        font-family: "Hiragino Sans", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        line-height: 1.6;
        margin: 24px;
        background-color: #e9f0f2;
        color: #1f2a30;
      }
      .monitor-wrapper {
        max-width: 1180px;
        margin: 0 auto;
        padding: 32px;
        background: #ffffff;
        border: 1px solid #c4d3d7;
      }
      .monitor-header {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 24px;
      }
      .monitor-title {
        font-size: 26px;
        font-weight: 700;
        letter-spacing: 0.04em;
        color: #1f2a30;
      }
      .monitor-description {
        font-size: 14px;
        color: #3a4b53;
      }
      .score-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 16px;
        margin: 20px 0 28px;
      }
      .score-card {
        border: 1px solid #c4d3d7;
        padding: 16px;
        background: #f6fafb;
      }
      .score-card h3 {
        margin: 0 0 8px;
        font-size: 14px;
        color: #2c3a40;
      }
      .score-total {
        font-size: 22px;
        font-weight: 700;
        color: #1f2a30;
      }
      .score-note {
        font-size: 12px;
        color: #4a5c63;
      }
      table.monitor-report {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
        background: #ffffff;
        border: 1px solid #c4d3d7;
      }
      col.timestamp-column {
        width: 180px;
      }
      col.agent-column {
        width: calc((100% - 180px) / 3);
      }
      th,
      td {
        border: 1px solid #c4d3d7;
        padding: 16px;
        vertical-align: top;
        background-color: #ffffff;
      }
      th {
        background: #d8e6e9;
        text-align: left;
        font-size: 13px;
        font-weight: 600;
        letter-spacing: 0.05em;
        text-transform: uppercase;
        color: #2c3a40;
      }
      tbody tr:nth-child(even) td {
        background-color: #eef3f4;
      }
      details {
        display: block;
        margin: 0;
      }
      details summary {
        list-style: none;
      }
      details[open] summary {
        margin-bottom: 12px;
      }
      .details-toggle {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        cursor: pointer;
        font-weight: 500;
        font-size: 13px;
        color: #1f2a30;
        padding: 0;
        background: transparent;
        border: none;
      }
      .details-toggle::before {
        content: "â–¶";
        font-size: 10px;
        transition: transform 160ms ease;
        display: inline-block;
      }
      details[open] .details-toggle::before {
        transform: rotate(90deg);
      }
      .timestamp {
        font-weight: 600;
        color: #2c3a40;
        overflow-wrap: anywhere;
      }
      pre {
        white-space: pre-wrap;
        word-break: break-word;
        margin: 0;
        font-size: 12px;
        line-height: 1.55;
        color: #1f2a30;
        background: #f2f6f7;
        border: 1px solid #c4d3d7;
        padding: 16px;
      }
      .status-badge {
        display: inline-block;
        font-size: 10px;
        font-weight: 600;
        letter-spacing: 0.02em;
        padding: 1px 6px;
        background: #d8e6e9;
        border: 1px solid #b8c9cd;
        color: #1f2a30;
        white-space: nowrap;
        line-height: 1.3;
        vertical-align: top;
      }
      .status-badge--info {
        background: #d9edf7;
        border-color: #bcdff1;
      }
      .agent-meta {
        display: block;
        margin-bottom: 8px;
        line-height: 1.5;
      }
      .agent-label {
        display: inline;
        font-size: 13px;
        color: #3a4b53;
      }
      .hex-chart {
        width: 140px;
        height: 140px;
        margin: 8px 0 12px;
      }
      .metric-list {
        margin: 0 0 12px;
        padding-left: 16px;
        font-size: 12px;
        color: #2c3a40;
      }
      .evidence-block {
        margin-bottom: 12px;
      }
      .file-links a {
        color: #1f2a30;
        text-decoration: underline;
      }
      .section-title {
        font-size: 13px;
        font-weight: 600;
        margin: 8px 0 6px;
        color: #2c3a40;
      }
      .baseline-box {
        background: #f7fbfc;
        border: 1px solid #c4d3d7;
        padding: 12px;
        margin: 16px 0 20px;
      }
      code {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <div class="monitor-wrapper">
      <header class="monitor-header">
        <h1 class="monitor-title">è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆ: ç—…åã¨å‡¦æ–¹/ã‚ªãƒ¼ãƒ€ãƒ¼ç·¨é›†ã®å®Ÿè£…ï¼ˆè¿½åŠ ä½œæ¥­è©•ä¾¡ï¼‰</h1>
        <p class="monitor-description">
          ã‚¿ã‚¹ã‚¯32ã¯æ—¢å­˜å®Ÿè£…ï¼ˆmasterï¼‰ã«ã‚ˆã‚Šç—…å/å‡¦æ–¹/ã‚ªãƒ¼ãƒ€ãƒ¼ç·¨é›†UIã¨ORCA APIé€£æºãŒå®Ÿè£…æ¸ˆã¿ã€‚ä»Šå›ã®è©•ä¾¡ã¯ã€Œå„ãƒ–ãƒ©ãƒ³ãƒã®è¿½åŠ ä½œæ¥­å†…å®¹ã€ã‚’åˆç®—ã—ã¦æ¡ç‚¹ã—ãŸã€‚
        </p>
      </header>

      <section class="baseline-box">
        <div class="section-title">æ—¢å­˜å®Ÿè£…ã®æ ¹æ‹ ï¼ˆmasterï¼‰</div>
        <div class="evidence-block">
          Web: Charts å³å›ºå®šãƒ¡ãƒ‹ãƒ¥ãƒ¼/ç·¨é›†ãƒ‘ãƒãƒ«ï¼ˆ<code>web-client/src/features/charts/ChartsPage.tsx</code>ã€<code>web-client/src/features/charts/DiagnosisEditPanel.tsx</code>ã€<code>web-client/src/features/charts/OrderBundleEditPanel.tsx</code>ï¼‰
          API: <code>web-client/src/features/charts/diseaseApi.ts</code> / <code>web-client/src/features/charts/orderBundleApi.ts</code> ãŒ <code>/orca/disease</code> ã¨ <code>/orca/order/bundles</code> ã‚’å‘¼ã³å‡ºã™ã€‚
          Server: <code>server-modernized/src/main/java/open/dolphin/rest/orca/OrcaDiseaseResource.java</code> / <code>OrcaOrderBundleResource.java</code> ã«ç›£æŸ»ã‚¤ãƒ™ãƒ³ãƒˆã‚’å«ã‚€å®Ÿè£…ãŒå­˜åœ¨ã€‚
        </div>
        <div class="file-links">
          <a href="file:///Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/web-client/src/features/charts/DiagnosisEditPanel.tsx">DiagnosisEditPanel.tsx</a><br />
          <a href="file:///Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/web-client/src/features/charts/OrderBundleEditPanel.tsx">OrderBundleEditPanel.tsx</a><br />
          <a href="file:///Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/web-client/src/features/charts/diseaseApi.ts">diseaseApi.ts</a><br />
          <a href="file:///Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/web-client/src/features/charts/orderBundleApi.ts">orderBundleApi.ts</a><br />
          <a href="file:///Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/server-modernized/src/main/java/open/dolphin/rest/orca/OrcaDiseaseResource.java">OrcaDiseaseResource.java</a><br />
          <a href="file:///Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/server-modernized/src/main/java/open/dolphin/rest/orca/OrcaOrderBundleResource.java">OrcaOrderBundleResource.java</a>
        </div>
      </section>

      <section class="score-grid">
        <div class="score-card">
          <h3>task-1766875644601-41d229</h3>
          <div class="score-total">âšªï¸ 150 / 600</div>
          <div class="score-note">ç·åˆã‚¹ã‚³ã‚¢ 25 / 100ï¼ˆè©•ä¾¡: âšªï¸ï¼‰</div>
        </div>
        <div class="score-card">
          <h3>task-1766875644401-626b24</h3>
          <div class="score-total">ğŸ¥‰ 210 / 600</div>
          <div class="score-note">ç·åˆã‚¹ã‚³ã‚¢ 35 / 100ï¼ˆè©•ä¾¡: âšªï¸ï¼‰</div>
        </div>
        <div class="score-card">
          <h3>task-1766875644200-932799</h3>
          <div class="score-total">ğŸ¥‰ 240 / 600</div>
          <div class="score-note">ç·åˆã‚¹ã‚³ã‚¢ 40 / 100ï¼ˆè©•ä¾¡: âšªï¸ï¼‰</div>
        </div>
      </section>

      <table class="monitor-report">
        <colgroup>
          <col class="timestamp-column" />
          <col class="agent-column" />
          <col class="agent-column" />
          <col class="agent-column" />
        </colgroup>
        <thead>
          <tr>
            <th>Timestamp</th>
            <th>Agent task-1766875644601-41d229</th>
            <th>Agent task-1766875644401-626b24</th>
            <th>Agent task-1766875644200-932799</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="timestamp">2025-12-27 23:12 UTC</td>
            <td>
              <div class="agent-meta">
                <span class="status-badge status-badge--info">è¿½åŠ ä½œæ¥­è©•ä¾¡</span>
                <span class="agent-label">æ‡¸å¿µç‚¹è¿½è¨˜ã®ã¿ã€‚è¿½åŠ ä¾¡å€¤ã¯é™å®šçš„ã§ã€è¨¼æ˜æ›¸å‰Šé™¤å·®åˆ†ãŒãƒªã‚¹ã‚¯ã€‚</span>
              </div>
              <div class="hex-chart" data-scores="20,15,10,10,35,10"></div>
              <div class="section-title">6æŒ‡æ¨™</div>
              <ul class="metric-list">
                <li>è¦ä»¶å……è¶³ 20ç‚¹</li>
                <li>å®Ÿè£…å“è³ª 15ç‚¹</li>
                <li>ãƒ†ã‚¹ãƒˆ/æ¤œè¨¼ 10ç‚¹</li>
                <li>å®‰å…¨æ€§/ãƒªã‚¹ã‚¯ 10ç‚¹</li>
                <li>å¤‰æ›´ç®¡ç†/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 35ç‚¹</li>
                <li>é‹ç”¨é©åˆ 10ç‚¹</li>
              </ul>
              <div class="section-title">æ ¹æ‹ </div>
              <div class="evidence-block">
                æ—¢å­˜å®Ÿè£…ã¯ master ã«å­˜åœ¨ã™ã‚‹ãŸã‚ã€å½“è©²ãƒ–ãƒ©ãƒ³ãƒã®è¿½åŠ ä½œæ¥­ã¯æ‡¸å¿µç‚¹ã®è¿½è¨˜ã®ã¿ã€‚é‹ç”¨ä¸Šã®é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ãŒå«ã¾ã‚Œã‚‹ãŸã‚åŠ ç‚¹ã¯é™å®šçš„ã€‚
              </div>
              <div class="section-title">ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°</div>
              <pre>__LOG_A__</pre>
              <div class="section-title">å·®åˆ†ã‚µãƒãƒª</div>
              <pre>__DIFFSTAT_A__</pre>
              <details class="snapshot-details">
                <summary class="details-toggle">å·®åˆ†è©³ç´°</summary>
                <pre>__DIFF_A__</pre>
              </details>
            </td>
            <td>
              <div class="agent-meta">
                <span class="status-badge status-badge--info">è¿½åŠ ä½œæ¥­è©•ä¾¡</span>
                <span class="agent-label">worktreeç”¨ã‚³ãƒ³ãƒ†ãƒŠåã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹å¯¾å¿œã¯æœ‰ç”¨ã ãŒã‚¿ã‚¹ã‚¯å›ºæœ‰ã§ã¯ãªã„ã€‚</span>
              </div>
              <div class="hex-chart" data-scores="25,30,20,15,45,30"></div>
              <div class="section-title">6æŒ‡æ¨™</div>
              <ul class="metric-list">
                <li>è¦ä»¶å……è¶³ 25ç‚¹</li>
                <li>å®Ÿè£…å“è³ª 30ç‚¹</li>
                <li>ãƒ†ã‚¹ãƒˆ/æ¤œè¨¼ 20ç‚¹</li>
                <li>å®‰å…¨æ€§/ãƒªã‚¹ã‚¯ 15ç‚¹</li>
                <li>å¤‰æ›´ç®¡ç†/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 45ç‚¹</li>
                <li>é‹ç”¨é©åˆ 30ç‚¹</li>
              </ul>
              <div class="section-title">æ ¹æ‹ </div>
              <div class="evidence-block">
                ä¸¦åˆ—ä½œæ¥­æ”¯æ´ã®ç’°å¢ƒæ•´å‚™ã¯é‹ç”¨ä¸Šã®ä¾¡å€¤ãŒã‚ã‚‹ä¸€æ–¹ã€ç—…å/å‡¦æ–¹/ã‚ªãƒ¼ãƒ€ãƒ¼ç·¨é›†ã®ç›´æ¥çš„ãªå“è³ªå‘ä¸Šã§ã¯ãªã„ãŸã‚ä¸­ç¨‹åº¦ã®åŠ ç‚¹ã€‚
              </div>
              <div class="section-title">ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°</div>
              <pre>__LOG_B__</pre>
              <div class="section-title">å·®åˆ†ã‚µãƒãƒª</div>
              <pre>__DIFFSTAT_B__</pre>
              <details class="snapshot-details">
                <summary class="details-toggle">å·®åˆ†è©³ç´°</summary>
                <pre>__DIFF_B__</pre>
              </details>
            </td>
            <td>
              <div class="agent-meta">
                <span class="status-badge status-badge--info">è¿½åŠ ä½œæ¥­è©•ä¾¡</span>
                <span class="agent-label">ORCAç–é€šè¨¼è·¡ã¯æ¤œè¨¼ä¾¡å€¤ãŒé«˜ã„ãŒPhase2ç³»ãƒ­ã‚°ã§ã‚¿ã‚¹ã‚¯ç›´æ¥åº¦ã¯ä½ã‚ã€‚</span>
              </div>
              <div class="hex-chart" data-scores="30,25,30,20,55,30"></div>
              <div class="section-title">6æŒ‡æ¨™</div>
              <ul class="metric-list">
                <li>è¦ä»¶å……è¶³ 30ç‚¹</li>
                <li>å®Ÿè£…å“è³ª 25ç‚¹</li>
                <li>ãƒ†ã‚¹ãƒˆ/æ¤œè¨¼ 30ç‚¹</li>
                <li>å®‰å…¨æ€§/ãƒªã‚¹ã‚¯ 20ç‚¹</li>
                <li>å¤‰æ›´ç®¡ç†/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ 55ç‚¹</li>
                <li>é‹ç”¨é©åˆ 30ç‚¹</li>
              </ul>
              <div class="section-title">æ ¹æ‹ </div>
              <div class="evidence-block">
                ç–é€šè¨¼è·¡ãƒ»ãƒ­ã‚°è¿½åŠ ã¯å®Ÿé‹ç”¨æ¤œè¨¼ã®ä¾¡å€¤ãŒã‚ã‚‹ãŒã€ã‚¿ã‚¹ã‚¯32ã®UI/APIå®Ÿè£…ã¨ã¯é–“æ¥çš„ã€‚Phase2ãƒ­ã‚°ã§ç¾è¡Œãƒ«ãƒ¼ãƒ«å¤–ã®ãŸã‚åŠ ç‚¹ã‚’æŠ‘åˆ¶ã€‚
              </div>
              <div class="section-title">ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°</div>
              <pre>__LOG_C__</pre>
              <div class="section-title">å·®åˆ†ã‚µãƒãƒª</div>
              <pre>__DIFFSTAT_C__</pre>
              <details class="snapshot-details">
                <summary class="details-toggle">å·®åˆ†è©³ç´°</summary>
                <pre>__DIFF_C__</pre>
              </details>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <script>
      const buildHex = (el) => {
        const scores = (el.dataset.scores || '').split(',').map((v) => Number(v.trim()) || 0);
        const size = 120;
        const center = size / 2;
        const maxR = 45;
        const toPoint = (value, idx) => {
          const angle = (Math.PI / 180) * (-90 + idx * 60);
          const r = maxR * (Math.max(0, Math.min(100, value)) / 100);
          const x = center + r * Math.cos(angle);
          const y = center + r * Math.sin(angle);
          return x.toFixed(1) + ',' + y.toFixed(1);
        };
        const bgPoints = Array.from({ length: 6 }).map((_, idx) => {
          const angle = (Math.PI / 180) * (-90 + idx * 60);
          const x = center + maxR * Math.cos(angle);
          const y = center + maxR * Math.sin(angle);
          return x.toFixed(1) + ',' + y.toFixed(1);
        }).join(' ');
        const valPoints = scores.map((score, idx) => toPoint(score, idx)).join(' ');
        el.innerHTML =
          '<svg viewBox="0 0 ' + size + ' ' + size + '" width="140" height="140">' +
          '<polygon points="' + bgPoints + '" fill="#eef3f4" stroke="#c4d3d7" stroke-width="1"></polygon>' +
          '<polygon points="' + valPoints + '" fill="rgba(65, 125, 140, 0.45)" stroke="#417d8c" stroke-width="1"></polygon>' +
          '</svg>';
      };
      document.querySelectorAll('.hex-chart').forEach(buildHex);
    </script>
  </body>
</html>
