[
  {
    "id": "task-yaml-1wg7ldz-src-webclient-or",
    "name": "[webclient orca reception billing plan 20260120] 01_受付_acceptmodv2接続\n期間: 01/20 22:00 - 01/21 22:00 / 優先度: high / 緊急度: high / エージェント: claude code\n\n# 01 受付 acceptmodv2 接続\n\n- `ReceptionPage` に予約外当日受付登録/取消フォームを追加し、`/orca/visits/mutation` (acceptmodv2) を呼び出す。\n- バリデーション: patientId 必須、保険/自費選択、来院区分。\n- 送信結果をリストへ即反映し、MSW スタブを用意して E2E で受付→Charts 遷移を確認。\n- ORCA Trial の Api_Result=00/21 での挙動をバナーに反映。\n- 完了条件: acceptmodv2 正常系(Api_Result=00)・受付なし(Api_Result=21)をUIで確認し、受付リスト更新と警告表示が動作。\n- エビデンス: Playwright `tests/reception/e2e-acceptmodv2.spec.ts` スクショ・動画、コンソールログに runId/traceId。\n- 非機能確認: リクエスト遅延1s以内、監査ログに action=reception_accept で runId/traceId 記録。\n- テスト計画: Unit: vitest `src/features/reception/__tests__/acceptmodv2.test.ts`; E2E: `npx playwright test tests/reception/e2e-acceptmodv2.spec.ts`; MSW: `web-client/src/mocks/handlers/orcaReception.ts` に追加。\n- 成功指標: acceptmodv2 E2E 成功率>95%（3/3 パス）、Api_Result=21時の警告表示100%。\n- 成果物: コード `web-client/src/features/reception/pages/ReceptionPage.tsx`, `.../api.ts`; モックとテスト; ログ保存 `artifacts/webclient/orca-e2e/20260120/acceptmodv2/`.\n- Risks: ORCA Trial がデータ返さず UI空→ MSWスタブとリトライ導線で検証を保証。\n\nYAML ID: src/webclient_orca_reception_billing_plan_20260120/01_受付_acceptmodv2接続.md",
    "model": "YAML App",
    "status": "completed",
    "importance": "high",
    "urgency": "high",
    "createdAt": "2026-01-20T20:25:42.972Z",
    "updatedAt": "2026-01-21T04:21:57.325Z",
    "requiresTerminal": false,
    "createWorktree": false,
    "branchName": "task/task-yaml-1wg7ldz-src-webclient-or",
    "baseBranch": "main",
    "useTmux": false,
    "singleMode": false,
    "aiCompetitionEntry": false,
    "aiCompetitionResult": null,
    "aiCompetitionGroupId": null,
    "aiCompetitionGroupName": null,
    "aiCompetitionMonitor": false,
    "monitorTargets": null,
    "scoringConfig": null,
    "yamlSource": {
      "key": "custom-app-webclient-orca-reception-billing-pla-436f748b5c::src/webclient_orca_reception_billing_plan_20260120/01_受付_acceptmodv2接続.md",
      "appId": "custom-app-webclient-orca-reception-billing-pla-436f748b5c",
      "datasetLabel": "webclient orca reception billing plan 20260120",
      "pathId": "src/webclient_orca_reception_billing_plan_20260120/01_受付_acceptmodv2接続.md",
      "fileName": "webclient-orca-reception-billing-plan-20260120.yaml",
      "absolutePath": "/Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/.kamui/apps/webclient-orca-reception-billing-plan-20260120.yaml",
      "addedAt": "2026-01-20T20:25:42.954Z"
    },
    "labels": [
      "webclient orca reception billing plan 20260120",
      "src / webclient_orca_reception_billing_plan_20260120"
    ],
    "dependencies": [
      "task-yaml-1l5r8rg-src-webclient-or"
    ],
    "schedule": {
      "startMs": 1768914000000,
      "endMs": 1769000400000,
      "durationDays": 1
    },
    "category": "src / webclient_orca_reception_billing_plan_20260120",
    "taskType": "yaml-plan",
    "source": "yaml-app",
    "description": "# 01 受付 acceptmodv2 接続\n\n- `ReceptionPage` に予約外当日受付登録/取消フォームを追加し、`/orca/visits/mutation` (acceptmodv2) を呼び出す。\n- バリデーション: patientId 必須、保険/自費選択、来院区分。\n- 送信結果をリストへ即反映し、MSW スタブを用意して E2E で受付→Charts 遷移を確認。\n- ORCA Trial の Api_Result=00/21 での挙動をバナーに反映。\n- 完了条件: acceptmodv2 正常系(Api_Result=00)・受付なし(Api_Result=21)をUIで確認し、受付リスト更新と警告表示が動作。\n- エビデンス: Playwright `tests/reception/e2e-acceptmodv2.spec.ts` スクショ・動画、コンソールログに runId/traceId。\n- 非機能確認: リクエスト遅延1s以内、監査ログに action=reception_accept で runId/traceId 記録。\n- テスト計画: Unit: vitest `src/features/reception/__tests__/acceptmodv2.test.ts`; E2E: `npx playwright test tests/reception/e2e-acceptmodv2.spec.ts`; MSW: `web-client/src/mocks/handlers/orcaReception.ts` に追加。\n- 成功指標: acceptmodv2 E2E 成功率>95%（3/3 パス）、Api_Result=21時の警告表示100%。\n- 成果物: コード `web-client/src/features/reception/pages/ReceptionPage.tsx`, `.../api.ts`; モックとテスト; ログ保存 `artifacts/webclient/orca-e2e/20260120/acceptmodv2/`.\n- Risks: ORCA Trial がデータ返さず UI空→ MSWスタブとリトライ導線で検証を保証。"
  },
  {
    "id": "task-yaml-1g0p2fr-src-webclient-or",
    "name": "[webclient orca reception billing plan 20260120] 05_部位マスタ検索有効化\n期間: 01/21 00:00 - 01/22 00:00 / 優先度: medium / 緊急度: high / エージェント: codex\n\n# 05 部位マスタ検索 有効化\n\n- `OrderBundleEditPanel` の `bodyPartSearchQuery` を `enabled: supportsBodyPartSearch && keyword有無` へ修正し、/orca/tensu/etensu?category=2 に到達させる。\n- radiology/general エンティティでの UI を確認し、MSW モック・単体テストを追加。\n- 完了条件: radiology/general で部位検索が ORCA マスタに到達し候補表示、選択で code/name が items に保存。\n- エビデンス: vitest スナップショット `src/features/charts/__tests__/orderBundleBodyPart.test.ts`、UIキャプチャ。\n- 非機能確認: クエリレスポンス1s以内、失敗時に aria-live=assertive バナー。\n- テスト計画: Unit: vitest `.../orderBundleBodyPart.test.ts`; E2E: `npx playwright test tests/charts/e2e-bodypart-search.spec.ts`; MSW: `src/mocks/handlers/orcaMaster.ts` に bodypart 追加。\n- 成功指標: 検索成功率>95%、誤コード混入0件。\n- 成果物: `web-client/src/features/charts/OrderBundleEditPanel.tsx`, `orderMasterSearchApi.ts`; artifacts `artifacts/webclient/orca-e2e/20260120/bodypart/`.\n- Risks: Trial で etensu category=2 が空 → MSWで代替し、実 ORCA 確認を後続計画に記載。\n\nYAML ID: src/webclient_orca_reception_billing_plan_20260120/05_部位マスタ検索有効化.md",
    "model": "YAML App",
    "status": "pending",
    "importance": "medium",
    "urgency": "high",
    "createdAt": "2026-01-20T20:26:52.258Z",
    "updatedAt": "2026-01-20T20:26:52.258Z",
    "requiresTerminal": false,
    "createWorktree": false,
    "branchName": "task/task-yaml-1g0p2fr-src-webclient-or",
    "baseBranch": "main",
    "useTmux": false,
    "singleMode": false,
    "aiCompetitionEntry": false,
    "aiCompetitionResult": null,
    "aiCompetitionGroupId": null,
    "aiCompetitionGroupName": null,
    "aiCompetitionMonitor": false,
    "monitorTargets": null,
    "scoringConfig": null,
    "yamlSource": {
      "key": "custom-app-webclient-orca-reception-billing-pla-436f748b5c::src/webclient_orca_reception_billing_plan_20260120/05_部位マスタ検索有効化.md",
      "appId": "custom-app-webclient-orca-reception-billing-pla-436f748b5c",
      "datasetLabel": "webclient orca reception billing plan 20260120",
      "pathId": "src/webclient_orca_reception_billing_plan_20260120/05_部位マスタ検索有効化.md",
      "fileName": "webclient-orca-reception-billing-plan-20260120.yaml",
      "absolutePath": "/Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/.kamui/apps/webclient-orca-reception-billing-plan-20260120.yaml",
      "addedAt": "2026-01-20T20:26:52.042Z"
    },
    "labels": [
      "webclient orca reception billing plan 20260120",
      "src / webclient_orca_reception_billing_plan_20260120"
    ],
    "dependencies": [
      "task-yaml-1l5r8rg-src-webclient-or"
    ],
    "schedule": {
      "startMs": 1768921200000,
      "endMs": 1769007600000,
      "durationDays": 1
    },
    "category": "src / webclient_orca_reception_billing_plan_20260120",
    "taskType": "yaml-plan",
    "source": "yaml-app",
    "description": "# 05 部位マスタ検索 有効化\n\n- `OrderBundleEditPanel` の `bodyPartSearchQuery` を `enabled: supportsBodyPartSearch && keyword有無` へ修正し、/orca/tensu/etensu?category=2 に到達させる。\n- radiology/general エンティティでの UI を確認し、MSW モック・単体テストを追加。\n- 完了条件: radiology/general で部位検索が ORCA マスタに到達し候補表示、選択で code/name が items に保存。\n- エビデンス: vitest スナップショット `src/features/charts/__tests__/orderBundleBodyPart.test.ts`、UIキャプチャ。\n- 非機能確認: クエリレスポンス1s以内、失敗時に aria-live=assertive バナー。\n- テスト計画: Unit: vitest `.../orderBundleBodyPart.test.ts`; E2E: `npx playwright test tests/charts/e2e-bodypart-search.spec.ts`; MSW: `src/mocks/handlers/orcaMaster.ts` に bodypart 追加。\n- 成功指標: 検索成功率>95%、誤コード混入0件。\n- 成果物: `web-client/src/features/charts/OrderBundleEditPanel.tsx`, `orderMasterSearchApi.ts`; artifacts `artifacts/webclient/orca-e2e/20260120/bodypart/`.\n- Risks: Trial で etensu category=2 が空 → MSWで代替し、実 ORCA 確認を後続計画に記載。"
  },
  {
    "id": "task-yaml-1d4xxq5-src-webclient-or",
    "name": "[webclient orca reception billing plan 20260120] 06_スタンプuserName組立修正\n期間: 01/21 01:00 - 01/22 01:00 / 優先度: high / 緊急度: high / エージェント: codex\n\n# 06 スタンプ userName 組立修正\n\n- `OrderBundleEditPanel` の `userName` を `${facilityId}:${userId}` で組み立て、`fetchUserProfile` とローカルスタンプキーに適用。\n- サーバースタンプ未取得時のバナーを追加し、既存スタンプキー移行（:` → facility:user）を考慮した互換処理を実装。\n- `orderBundleStampFlow.test.tsx` を更新し、server stamp 取得の happy/404 ケースをカバー。\n- 完了条件: server stamp が取得できること、404 時はバナー表示＋ローカルスタンプ fallback が動作。\n- エビデンス: vitest `src/features/charts/__tests__/orderBundleStampFlow.test.tsx` 成功ログ、UIスクショ。\n- 非機能確認: プロファイル取得300ms以内、監査 action=order_stamp_fetch に runId/traceId。\n- テスト計画: Unit: vitest 該当テスト; E2E: `npx playwright test tests/charts/e2e-stamp-fetch.spec.ts`; MSW: `src/mocks/handlers/stampTree.ts`。\n- 成功指標: スタンプ取得成功率>95%、404時のフォールバック表示100%。\n- 成果物: `OrderBundleEditPanel.tsx`, `orderBundleApi.ts`, テスト・モック; artifacts `artifacts/webclient/orca-e2e/20260120/stamp/`.\n- Risks: 既存 localStorage キー移行漏れでスタンプ消失 → マイグレーション関数と告知バナーで緩和。\n\nYAML ID: src/webclient_orca_reception_billing_plan_20260120/06_スタンプuserName組立修正.md",
    "model": "YAML App",
    "status": "pending",
    "importance": "high",
    "urgency": "high",
    "createdAt": "2026-01-20T20:26:56.155Z",
    "updatedAt": "2026-01-20T20:26:56.155Z",
    "requiresTerminal": false,
    "createWorktree": false,
    "branchName": "task/task-yaml-1d4xxq5-src-webclient-or",
    "baseBranch": "main",
    "useTmux": false,
    "singleMode": false,
    "aiCompetitionEntry": false,
    "aiCompetitionResult": null,
    "aiCompetitionGroupId": null,
    "aiCompetitionGroupName": null,
    "aiCompetitionMonitor": false,
    "monitorTargets": null,
    "scoringConfig": null,
    "yamlSource": {
      "key": "custom-app-webclient-orca-reception-billing-pla-436f748b5c::src/webclient_orca_reception_billing_plan_20260120/06_スタンプuserName組立修正.md",
      "appId": "custom-app-webclient-orca-reception-billing-pla-436f748b5c",
      "datasetLabel": "webclient orca reception billing plan 20260120",
      "pathId": "src/webclient_orca_reception_billing_plan_20260120/06_スタンプuserName組立修正.md",
      "fileName": "webclient-orca-reception-billing-plan-20260120.yaml",
      "absolutePath": "/Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/.kamui/apps/webclient-orca-reception-billing-plan-20260120.yaml",
      "addedAt": "2026-01-20T20:26:56.139Z"
    },
    "labels": [
      "webclient orca reception billing plan 20260120",
      "src / webclient_orca_reception_billing_plan_20260120"
    ],
    "dependencies": [
      "task-yaml-1l5r8rg-src-webclient-or"
    ],
    "schedule": {
      "startMs": 1768924800000,
      "endMs": 1769011200000,
      "durationDays": 1
    },
    "category": "src / webclient_orca_reception_billing_plan_20260120",
    "taskType": "yaml-plan",
    "source": "yaml-app",
    "description": "# 06 スタンプ userName 組立修正\n\n- `OrderBundleEditPanel` の `userName` を `${facilityId}:${userId}` で組み立て、`fetchUserProfile` とローカルスタンプキーに適用。\n- サーバースタンプ未取得時のバナーを追加し、既存スタンプキー移行（:` → facility:user）を考慮した互換処理を実装。\n- `orderBundleStampFlow.test.tsx` を更新し、server stamp 取得の happy/404 ケースをカバー。\n- 完了条件: server stamp が取得できること、404 時はバナー表示＋ローカルスタンプ fallback が動作。\n- エビデンス: vitest `src/features/charts/__tests__/orderBundleStampFlow.test.tsx` 成功ログ、UIスクショ。\n- 非機能確認: プロファイル取得300ms以内、監査 action=order_stamp_fetch に runId/traceId。\n- テスト計画: Unit: vitest 該当テスト; E2E: `npx playwright test tests/charts/e2e-stamp-fetch.spec.ts`; MSW: `src/mocks/handlers/stampTree.ts`。\n- 成功指標: スタンプ取得成功率>95%、404時のフォールバック表示100%。\n- 成果物: `OrderBundleEditPanel.tsx`, `orderBundleApi.ts`, テスト・モック; artifacts `artifacts/webclient/orca-e2e/20260120/stamp/`.\n- Risks: 既存 localStorage キー移行漏れでスタンプ消失 → マイグレーション関数と告知バナーで緩和。"
  },
  {
    "id": "task-yaml-1gwluzp-src-webclient-or",
    "name": "[webclient orca reception billing plan 20260120] 02_ORCA請求送信本線化\n期間: 01/21 09:00 - 01/23 09:00 / 優先度: high / 緊急度: high / エージェント: claude code\n\n# 02 ORCA 請求送信 本線化\n\n- `ChartsActionBar` の「ORCA送信」を ORCA 公式経路 `/api21/medicalmodv2` → `/api21/medicalmodv23` に接続し、Api_Result/Invoice_Number/Data_Id を取得。\n- 成功時に Reception/OrcaSummary へ伝票番号と送信ステータスを反映し、ローカル会計キューをスキップ。\n- 失敗時は再送キューとバナーを統一し、telemetry に runId/traceId を記録。\n- 完了条件: Api_Result=00 で Invoice_Number/Data_Id を取得し UI 反映、送信失敗時は再送キュー登録・バナー表示が一致。\n- エビデンス: Playwright `tests/charts/e2e-orca-claim-send.spec.ts`、network HAR、telemetryログ保存 `artifacts/webclient/orca-e2e/20260121/claim-send/`。\n- 非機能確認: 送信→応答まで3s以内、監査ログ action=orca_claim_send 記録、例外時アラートが aria-live=assertive。\n- テスト計画: Unit: vitest `src/features/charts/__tests__/chartsActionBar.orca-send.test.ts`; E2E: `npx playwright test tests/charts/e2e-orca-claim-send.spec.ts`; MSW: `src/mocks/handlers/orcaClaim.ts` に medicalmodv2/23 ハンドラ。\n- 成功指標: Invoice_Number取得率100%、再送キュー登録エラー0件。\n- 成果物: `web-client/src/features/charts/ChartsActionBar.tsx`, `.../orcaClaimApi.ts`; テレメトリ設定; 保存物 `artifacts/webclient/orca-e2e/20260121/claim-send/`.\n- Risks: Trialで Data_Id が返らず帳票不可 → MSWで Data_Id 付与、実 ORCA 接続は運用環境で追加検証。\n\nYAML ID: src/webclient_orca_reception_billing_plan_20260120/02_ORCA請求送信本線化.md",
    "model": "YAML App",
    "status": "completed",
    "importance": "high",
    "urgency": "high",
    "createdAt": "2026-01-20T20:27:03.987Z",
    "updatedAt": "2026-01-21T04:21:49.127Z",
    "requiresTerminal": false,
    "createWorktree": false,
    "branchName": "task/task-yaml-1gwluzp-src-webclient-or",
    "baseBranch": "main",
    "useTmux": false,
    "singleMode": false,
    "aiCompetitionEntry": false,
    "aiCompetitionResult": null,
    "aiCompetitionGroupId": null,
    "aiCompetitionGroupName": null,
    "aiCompetitionMonitor": false,
    "monitorTargets": null,
    "scoringConfig": null,
    "yamlSource": {
      "key": "custom-app-webclient-orca-reception-billing-pla-436f748b5c::src/webclient_orca_reception_billing_plan_20260120/02_ORCA請求送信本線化.md",
      "appId": "custom-app-webclient-orca-reception-billing-pla-436f748b5c",
      "datasetLabel": "webclient orca reception billing plan 20260120",
      "pathId": "src/webclient_orca_reception_billing_plan_20260120/02_ORCA請求送信本線化.md",
      "fileName": "webclient-orca-reception-billing-plan-20260120.yaml",
      "absolutePath": "/Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/.kamui/apps/webclient-orca-reception-billing-plan-20260120.yaml",
      "addedAt": "2026-01-20T20:27:03.974Z"
    },
    "labels": [
      "webclient orca reception billing plan 20260120",
      "src / webclient_orca_reception_billing_plan_20260120"
    ],
    "dependencies": [
      "task-yaml-1wg7ldz-src-webclient-or"
    ],
    "schedule": {
      "startMs": 1768953600000,
      "endMs": 1769126400000,
      "durationDays": 2
    },
    "category": "src / webclient_orca_reception_billing_plan_20260120",
    "taskType": "yaml-plan",
    "source": "yaml-app",
    "description": "# 02 ORCA 請求送信 本線化\n\n- `ChartsActionBar` の「ORCA送信」を ORCA 公式経路 `/api21/medicalmodv2` → `/api21/medicalmodv23` に接続し、Api_Result/Invoice_Number/Data_Id を取得。\n- 成功時に Reception/OrcaSummary へ伝票番号と送信ステータスを反映し、ローカル会計キューをスキップ。\n- 失敗時は再送キューとバナーを統一し、telemetry に runId/traceId を記録。\n- 完了条件: Api_Result=00 で Invoice_Number/Data_Id を取得し UI 反映、送信失敗時は再送キュー登録・バナー表示が一致。\n- エビデンス: Playwright `tests/charts/e2e-orca-claim-send.spec.ts`、network HAR、telemetryログ保存 `artifacts/webclient/orca-e2e/20260121/claim-send/`。\n- 非機能確認: 送信→応答まで3s以内、監査ログ action=orca_claim_send 記録、例外時アラートが aria-live=assertive。\n- テスト計画: Unit: vitest `src/features/charts/__tests__/chartsActionBar.orca-send.test.ts`; E2E: `npx playwright test tests/charts/e2e-orca-claim-send.spec.ts`; MSW: `src/mocks/handlers/orcaClaim.ts` に medicalmodv2/23 ハンドラ。\n- 成功指標: Invoice_Number取得率100%、再送キュー登録エラー0件。\n- 成果物: `web-client/src/features/charts/ChartsActionBar.tsx`, `.../orcaClaimApi.ts`; テレメトリ設定; 保存物 `artifacts/webclient/orca-e2e/20260121/claim-send/`.\n- Risks: Trialで Data_Id が返らず帳票不可 → MSWで Data_Id 付与、実 ORCA 接続は運用環境で追加検証。"
  },
  {
    "id": "task-yaml-x1q41j-src-webclient-or",
    "name": "[webclient orca reception billing plan 20260120] 08_患者画像APIクライアント雛形\n期間: 01/21 21:00 - 01/22 21:00 / 優先度: high / 緊急度: high / エージェント: codex\n\n# 08 患者画像 API クライアント雛形\n\n- `httpClient` に `/karte/iamges`, `/karte/image/{id}`, `/karte/attachment/{id}`, `/karte/document` を追加し、runId/traceId を伝搬。\n- 画像一覧/詳細フェッチ関数と MSW モックを作成（typo `iamges` を暫定サポート）。\n- Document への添付送信 payload スキーマを整理し、最大サイズ/拡張子バリデーションを定義。\n- 完了条件: 画像一覧/詳細 API 呼び出しが通り、バリデーション付き payload で Document 送信が行える。\n- エビデンス: vitest `src/features/images/__tests__/imageApi.test.ts`、MSW ハンドラログ、HTTP モックスクショ。\n- 非機能確認: 5MB 画像で送信3s以内、監査 action=image_api_call に runId/traceId。\n- テスト計画: Unit: vitest `imageApi.test.ts`; E2E: 後続09/10で流用; MSW: `src/mocks/handlers/karteImage.ts` に iamges/image/document。\n- 成功指標: API呼び出し成功率>95%、バリデーション漏れ0件。\n- 成果物: `web-client/src/features/images/api.ts`, `libs/http/httpClient.ts`, MSW; artifacts `artifacts/webclient/orca-e2e/20260121/images-api/`.\n- Risks: サーバーに upload API 不在 → Document 埋め込み方式で一旦運用、正式APIは別チケット。\n\nYAML ID: src/webclient_orca_reception_billing_plan_20260120/08_患者画像APIクライアント雛形.md",
    "model": "YAML App",
    "status": "pending",
    "importance": "high",
    "urgency": "high",
    "createdAt": "2026-01-20T20:27:09.089Z",
    "updatedAt": "2026-01-20T20:27:09.089Z",
    "requiresTerminal": false,
    "createWorktree": false,
    "branchName": "task/task-yaml-x1q41j-src-webclient-or",
    "baseBranch": "main",
    "useTmux": false,
    "singleMode": false,
    "aiCompetitionEntry": false,
    "aiCompetitionResult": null,
    "aiCompetitionGroupId": null,
    "aiCompetitionGroupName": null,
    "aiCompetitionMonitor": false,
    "monitorTargets": null,
    "scoringConfig": null,
    "yamlSource": {
      "key": "custom-app-webclient-orca-reception-billing-pla-436f748b5c::src/webclient_orca_reception_billing_plan_20260120/08_患者画像APIクライアント雛形.md",
      "appId": "custom-app-webclient-orca-reception-billing-pla-436f748b5c",
      "datasetLabel": "webclient orca reception billing plan 20260120",
      "pathId": "src/webclient_orca_reception_billing_plan_20260120/08_患者画像APIクライアント雛形.md",
      "fileName": "webclient-orca-reception-billing-plan-20260120.yaml",
      "absolutePath": "/Users/Hayato/Documents/GitHub/OpenDolphin_WebClient/.kamui/apps/webclient-orca-reception-billing-plan-20260120.yaml",
      "addedAt": "2026-01-20T20:27:09.073Z"
    },
    "labels": [
      "webclient orca reception billing plan 20260120",
      "src / webclient_orca_reception_billing_plan_20260120"
    ],
    "dependencies": [
      "task-yaml-1l5r8rg-src-webclient-or"
    ],
    "schedule": {
      "startMs": 1768996800000,
      "endMs": 1769083200000,
      "durationDays": 1
    },
    "category": "src / webclient_orca_reception_billing_plan_20260120",
    "taskType": "yaml-plan",
    "source": "yaml-app",
    "description": "# 08 患者画像 API クライアント雛形\n\n- `httpClient` に `/karte/iamges`, `/karte/image/{id}`, `/karte/attachment/{id}`, `/karte/document` を追加し、runId/traceId を伝搬。\n- 画像一覧/詳細フェッチ関数と MSW モックを作成（typo `iamges` を暫定サポート）。\n- Document への添付送信 payload スキーマを整理し、最大サイズ/拡張子バリデーションを定義。\n- 完了条件: 画像一覧/詳細 API 呼び出しが通り、バリデーション付き payload で Document 送信が行える。\n- エビデンス: vitest `src/features/images/__tests__/imageApi.test.ts`、MSW ハンドラログ、HTTP モックスクショ。\n- 非機能確認: 5MB 画像で送信3s以内、監査 action=image_api_call に runId/traceId。\n- テスト計画: Unit: vitest `imageApi.test.ts`; E2E: 後続09/10で流用; MSW: `src/mocks/handlers/karteImage.ts` に iamges/image/document。\n- 成功指標: API呼び出し成功率>95%、バリデーション漏れ0件。\n- 成果物: `web-client/src/features/images/api.ts`, `libs/http/httpClient.ts`, MSW; artifacts `artifacts/webclient/orca-e2e/20260121/images-api/`.\n- Risks: サーバーに upload API 不在 → Document 埋め込み方式で一旦運用、正式APIは別チケット。"
  },
  {
    "id": "task-1768940872473-74e37d",
    "name": "CodexCLI2: [webclient orca reception billing plan 20260120] 01_受付_acceptmodv2接続\n期間: 01/20 22:00 - 01/21 22:00 / 優先度: high / 緊急度: high / エージェント: claude code\n\n# 01 受付 acceptmodv2 接続\n\n- `ReceptionPage` に予約外当日受付登録/取消フォームを追加し、`/orca/visits/mutation` (acceptmodv2) を呼び出す。\n- バリデーション: patientId 必須、保険/自費選択、来院区分。\n- 送信結果をリストへ即反映し、MSW スタブを用意して E2E で受付→Charts 遷移を確認。\n- ORCA Trial の Api_Result=00/21 での挙動をバナーに反映。\n- 完了条件: acceptmodv2 正常系(Api_Result=00)・受付なし(Api_Result=21)をUIで確認し、受付リスト更新と警告表示が動作。\n- エビデンス: Playwright `tests/reception/e2e-acceptmodv2.spec.ts` スクショ・動画、コンソールログに runId/traceId。\n- 非機能確認: リクエスト遅延1s以内、監査ログに action=reception_accept で runId/traceId 記録。\n- テスト計画: Unit: vitest `src/features/reception/__tests__/acceptmodv2.test.ts`; E2E: `npx playwright test tests/reception/e2e-acceptmodv2.spec.ts`; MSW: `web-client/src/mocks/handlers/orcaReception.ts` に追加。\n- 成功指標: acceptmodv2 E2E 成功率>95%（3/3 パス）、Api_Result=21時の警告表示100%。\n- 成果物: コード `web-client/src/features/reception/pages/ReceptionPage.tsx`, `.../api.ts`; モックとテスト; ログ保存 `artifacts/webclient/orca-e2e/20260120/acceptmodv2/`.\n- Risks: ORCA Trial がデータ返さず UI空→ MSWスタブとリトライ導線で検証を保証。\n\nYAML ID: src/webclient_orca_reception_billing_plan_20260120/01_受付_acceptmodv2接続.md",
    "model": "Codex CLI",
    "status": "working",
    "importance": "medium",
    "urgency": "medium",
    "createdAt": "2026-01-20T20:27:52.473Z",
    "updatedAt": "2026-01-20T22:27:28.019Z",
    "requiresTerminal": true,
    "createWorktree": true,
    "branchName": "task/task-1768940872473-74e37d",
    "baseBranch": "master",
    "useTmux": true,
    "singleMode": false,
    "aiCompetitionEntry": true,
    "aiCompetitionResult": "silver",
    "aiCompetitionGroupId": "comp-1768940872271-xvr3e3z4",
    "aiCompetitionGroupName": "[webclient orca reception billing plan 20260120] 01_受付_acceptmodv2接続\n期間: 01/20 22:00 - 01/21 22:00 / 優先度: high / 緊急度: high / エージェント: claude code\n\n# 01 受付 acceptmodv2 接続\n\n- `ReceptionPage` に予約外当日受付登録/取消フォームを追加し、`/orca/visits/mutation` (acceptmodv2) を呼び出す。\n- バリデーション: patientId 必須、保険/自費選択、来院区分。\n- 送信結果をリストへ即反映し、MSW スタブを用意して E2E で受付→Charts 遷移を確認。\n- ORCA Trial の Api_Result=00/21 での挙動をバナーに反映。\n- 完了条件: acceptmodv2 正常系(Api_Result=00)・受付なし(Api_Result=21)をUIで確認し、受付リスト更新と警告表示が動作。\n- エビデンス: Playwright `tests/reception/e2e-acceptmodv2.spec.ts` スクショ・動画、コンソールログに runId/traceId。\n- 非機能確認: リクエスト遅延1s以内、監査ログに action=reception_accept で runId/traceId 記録。\n- テスト計画: Unit: vitest `src/features/reception/__tests__/acceptmodv2.test.ts`; E2E: `npx playwright test tests/reception/e2e-acceptmodv2.spec.ts`; MSW: `web-client/src/mocks/handlers/orcaReception.ts` に追加。\n- 成功指標: acceptmodv2 E2E 成功率>95%（3/3 パス）、Api_Result=21時の警告表示100%。\n- 成果物: コード `web-client/src/features/reception/pages/ReceptionPage.tsx`, `.../api.ts`; モックとテスト; ログ保存 `artifacts/webclient/orca-e2e/20260120/acceptmodv2/`.\n- Risks: ORCA Trial がデータ返さず UI空→ MSWスタブとリトライ導線で検証を保証。\n\nYAML ID: src/webclient_orca_reception_billing_plan_20260120/01_受付_acceptmodv2接続.md",
    "aiCompetitionMonitor": false,
    "monitorTargets": null,
    "scoringConfig": null,
    "worktreePath": ".worktrees/task-1768940872473-74e37d",
    "medal": "gold",
    "aiCompetitionScore": 92
  }
]