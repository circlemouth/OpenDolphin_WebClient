ganttConfig:
  defaultView: week
  startDate: 2025-12-29
  showFilters: true
  filters:
    priorities:
      High: true
      Medium: true
      Low: true
    statuses:
      completed: true
      in_progress: true
      not_started: true
    showDependencies: true
labels:
  dayNames:
    - 日
    - 月
    - 火
    - 水
    - 木
    - 金
    - 土
  priorities:
    high: 高
    medium: 中
    low: 低
  statuses:
    completed: 完了
    inProgress: 進行中
    notStarted: 未開始
  buttons:
    filter: フィルター
    previousPeriod: 前へ
    nextPeriod: 次へ
  filterPanel:
    priorities: 優先度
    statuses: ステータス
    dependencies: 依存関係
    showDependencies: 依存関係を表示
    tasksCount: タスク数
  tooltipFields:
    startDate: 開始日
    duration: 期間
    priority: 優先度
    status: ステータス
    progress: 進捗
    agent: エージェント
    details: 詳細
    prerequisites: 前提タスク
    nextTasks: Next Tasks
filters:
  priorities:
    High: true
    Medium: true
    Low: true
  statuses:
    completed: true
    in_progress: true
    not_started: true
  showDependencies: true
src:
  webclient_productionization:
    00_RUN_IDと参照チェーン.md:
      content: |-
        # 00 RUN_ID と参照チェーン

        - RUN_ID: 20251226T232335Z
        - 参照順: `docs/DEVELOPMENT_STATUS.md` → `docs/web-client/architecture/future-web-client-design.md` → `web-client/src/*` → 本ガント。
        - 対象スコープは外来（Reception / Charts / Patients / Administration / Outpatient Mock）。入院系は対象外。
      priority: High
      status: completed
      progress: 100
      agent: codex
      api: []
      dependency: []
      schedule:
        start: 2025-12-26T23:23:35.000Z
        days: 0.5
    01_現状実装棚卸しとギャップ整理.md:
      content: |-
        # 01 現状実装棚卸しとギャップ整理

        - `web-client/src/AppRouter.tsx` / `features/*` を確認し、Login・AppShell・Reception・Charts・Patients・Administration・Outpatient Mock の実装範囲を棚卸しする。
        - `future-web-client-design.md` の画面配置/機能/トーン/監査/ARIA と照合し、未実装・暫定・デモ止まりの項目を P0/P1/P2 で分類する。
        - “本番運用可能” 判定に必要な不足項目（セキュリティ/監査/運用/テスト）を一覧化する。
      priority: High
      status: completed
      progress: 100
      agent: claude code
      api: []
      dependency:
        - src/webclient_productionization/00_RUN_IDと参照チェーン.md
      schedule:
        start: 2025-12-29T00:00:00.000Z
        days: 2
    02_本番運用DoDと受け入れ基準.md:
      content: |-
        # 02 本番運用 DoD と受け入れ基準

        - 監査（auditEvent/logUiState）・A11y（role/aria-live/キーボード）・テレメトリ（funnel/traceId）の受け入れ基準を明文化する。
        - “UI 表示/失敗時/運用導線/監査証跡” を満たすための DoD を画面別に定義する。
        - 本番時に MSW を無効化する前提の動作保証範囲を決める。
      priority: High
      status: completed
      progress: 100
      agent: codex
      api: []
      dependency:
        - src/webclient_productionization/01_現状実装棚卸しとギャップ整理.md
      schedule:
        start: 2025-12-31T00:00:00.000Z
        days: 2
    foundation:
      10_AppShell強化とグローバルUI整備.md:
        content: |-
          # 10 AppShell 強化とグローバル UI 整備

          - RUN_ID のコピー UI、通知トーストスタック、権限制御ツールチップを追加し、`future-web-client-design.md` のグローバル仕様に合わせる。
          - ナビゲーションとトップバーに `role=status`/`aria-live` を付与し、色・トーンの統一を適用する。
          - 施設/ユーザー/role 情報の表示を固定し、監査観点の可視性を担保する。
        priority: High
        status: completed
        progress: 100
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/02_本番運用DoDと受け入れ基準.md
        schedule:
          start: 2026-01-02T00:00:00.000Z
          days: 2
      11_AuthServiceフラグ統合とRUN_ID伝播.md:
        content: |-
          # 11 AuthService フラグ統合と RUN_ID 伝播

          - `AuthServiceProvider` のフラグ更新を Reception/Charts/Patients/Administration で統一し、`missingMaster/cacheHit/dataSourceTransition/fallbackUsed` を carry-over する。
          - `data-run-id` の付与と `updateObservabilityMeta` の更新タイミングを整理し、画面間遷移でぶれないようにする。
          - リロード時の復元方針を定義し、セッション切れ時の安全なリセットを実装する。
        priority: High
        status: completed
        progress: 100
        agent: gemini cli
        api: []
        dependency:
          - src/webclient_productionization/foundation/10_AppShell強化とグローバルUI整備.md
        schedule:
          start: 2026-01-04T00:00:00.000Z
          days: 1.5
      12_監査ログとテレメトリ統合.md:
        content: |-
          # 12 監査ログとテレメトリ統合

          - `auditEvent` と `logUiState` のメタデータ（runId/traceId/dataSourceTransition 等）を全画面で統一する。
          - `telemetryClient.recordOutpatientFunnel` の送信位置を整理し、失敗理由の必須化を徹底する。
          - 監査ログに含める業務キー（facilityId/patientId/appointmentId/claimId）を統一する。
        priority: High
        status: completed
        progress: 100
        agent: claude code
        api:
          - "/api/audit"
        dependency:
          - src/webclient_productionization/foundation/11_AuthServiceフラグ統合とRUN_ID伝播.md
        schedule:
          start: 2026-01-06T00:00:00.000Z
          days: 2
      13_共通エラーハンドリングと再試行UX.md:
        content: |-
          # 13 共通エラーハンドリングと再試行 UX

          - API 失敗時の共通バナーとリトライ導線（再読込/再送）を整理し、画面間で文言/トーンを統一する。
          - ネットワーク障害と業務エラーを分離し、`missingMaster`/`fallbackUsed` の表示ロジックを整備する。
        priority: Medium
        status: completed
        progress: 100
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/foundation/12_監査ログとテレメトリ統合.md
        schedule:
          start: 2026-01-08T00:00:00.000Z
          days: 1.5
    reception:
      20_Reception一覧と右ペインの完成度向上.md:
        content: |-
          # 20 Reception 一覧と右ペインの完成度向上

          - 受付テーブルに ORCA キュー状態/保険・自費/直近診療列を揃え、`future-web-client-design.md` の仕様に合わせる。
          - 右ペインの患者概要・オーダー概要・missingMaster ノート入力を監査に連携する。
          - 検索/フィルタ/ソートの URL パラメータ引継ぎを Charts まで通す。
        priority: High
        status: completed
        progress: 100
        agent: codex
        api:
          - "/api01rv2/appointment/outpatient/*"
          - "/api01rv2/claim/outpatient/*"
          - "/api/orca/queue"
        dependency:
          - src/webclient_productionization/foundation/13_共通エラーハンドリングと再試行UX.md
        schedule:
          start: 2026-01-10T00:00:00.000Z
          days: 3
      21_Reception→Charts遷移の安全性強化.md:
        content: |-
          # 21 Reception → Charts 遷移の安全性強化

          - ダブルクリック遷移時の runId/患者文脈/受付 ID を URL と state で二重保持する。
          - Charts 側のドラフト/ロック状態と衝突しない遷移ガードを追加する。
        priority: High
        status: completed
        progress: 100
        agent: claude code
        api: []
        dependency:
          - src/webclient_productionization/reception/20_Reception一覧と右ペインの完成度向上.md
        schedule:
          start: 2026-01-13T00:00:00.000Z
          days: 1.5
      22_Receptionアクセシビリティ補強.md:
        content: |-
          # 22 Reception アクセシビリティ補強

          - バナー/テーブル/右ペインのキーボードフォーカスと `aria-live` の付与を統一する。
          - バッジ/トーンの色コントラストと読み上げ内容を整備する。
        priority: Medium
        status: not_started
        progress: 0
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/reception/21_Reception→Charts遷移の安全性強化.md
        schedule:
          start: 2026-01-14T12:00:00.000Z
          days: 1
    charts:
      30_外来カルテ作業台レイアウト実装.md:
        content: |-
          # 30 外来カルテ作業台レイアウト実装

          - 3カラム＋右固定メニューのレイアウトへ移行し、患者ヘッダ/診療バー/安全表示を常設する。
          - `DocumentTimeline` を「セクション別ログ + タイムライン」構造に拡張する。
        priority: High
        status: completed
        progress: 100
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/foundation/13_共通エラーハンドリングと再試行UX.md
        schedule:
          start: 2026-01-15T12:00:00.000Z
          days: 4
      31_SOAP記載ログとテンプレート統合.md:
        content: |-
          # 31 SOAP 記載ログとテンプレート統合

          - Free/S/O/A/P のセクション別ログとテンプレート挿入を実装し、保存/更新の監査イベントを記録する。
          - 記載者職種/記載日時/テンプレート ID を保持し、履歴をタイムラインへ反映する。
        priority: High
        status: completed
        progress: 100
        agent: gemini cli
        api:
          - "/orca21/medicalmodv2/outpatient"
        dependency:
          - src/webclient_productionization/charts/30_外来カルテ作業台レイアウト実装.md
        schedule:
          start: 2026-01-19T12:00:00.000Z
          days: 4
      32_病名と処方オーダー編集の実装.md:
        content: |-
          # 32 病名と処方/オーダー編集の実装

          - 病名（主/疑い/開始/転帰）・処方（RP単位）・オーダー束の編集 UI と API 連携を実装する。
          - 右固定メニューからの編集導線に統一し、編集操作を監査イベントへ記録する。
        priority: High
        status: not_started
        progress: 0
        agent: claude code
        api:
          - "/orca21/medicalmodv2/outpatient"
        dependency:
          - src/webclient_productionization/charts/31_SOAP記載ログとテンプレート統合.md
        schedule:
          start: 2026-01-23T12:00:00.000Z
          days: 4
      33_OrcaSummaryと送信フロー統合.md:
        content: |-
          # 33 OrcaSummary と送信フロー統合

          - Claim/Appointment API を統合し、`dataSourceTransition/cacheHit/missingMaster` を UI と監査へ反映する。
          - ORCA 送信は missingMaster=false のみ許可し、送信結果をトーストと監査に記録する。
        priority: High
        status: not_started
        progress: 0
        agent: codex
        api:
          - "/api01rv2/claim/outpatient/*"
          - "/api01rv2/appointment/outpatient/*"
          - "/api/orca/queue"
        dependency:
          - src/webclient_productionization/charts/32_病名と処方オーダー編集の実装.md
        schedule:
          start: 2026-01-27T12:00:00.000Z
          days: 2
      34_Charts監査イベント統合と安全ガード.md:
        content: |-
          # 34 Charts 監査イベント統合と安全ガード

          - 患者切替/送信/印刷/キャンセルなどの重要操作に auditEvent を必須化する。
          - 承認/ロック/Do の操作定義を UI と監査イベントで統一する。
        priority: High
        status: not_started
        progress: 0
        agent: claude code
        api:
          - "/api/audit"
        dependency:
          - src/webclient_productionization/charts/33_OrcaSummaryと送信フロー統合.md
        schedule:
          start: 2026-01-29T12:00:00.000Z
          days: 2
      35_Charts印刷と出力導線整備.md:
        content: |-
          # 35 Charts 印刷と出力導線整備

          - `ChartsOutpatientPrintPage` の操作導線と権限ガードを整理し、印刷ログを auditEvent に残す。
          - 出力前の確認モーダルと失敗時の復旧導線を実装する。
        priority: Medium
        status: not_started
        progress: 0
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/charts/34_Charts監査イベント統合と安全ガード.md
        schedule:
          start: 2026-01-31T12:00:00.000Z
          days: 1
      36_Charts承認ロックと状態統一.md:
        content: |-
          # 36 Charts 承認/ロックと状態統一

          - 承認=署名確定、ロック=承認済み編集不可のルールを UI に反映する。
          - ロック状態の可視化と解除手順の監査ログを実装する。
        priority: Medium
        status: not_started
        progress: 0
        agent: gemini cli
        api: []
        dependency:
          - src/webclient_productionization/charts/35_Charts印刷と出力導線整備.md
        schedule:
          start: 2026-02-01T12:00:00.000Z
          days: 2
    patients:
      40_患者一覧と保存ビュー整備.md:
        content: |-
          # 40 患者一覧と保存ビュー整備

          - 診療科/担当医/属性のフィルタと保存済みビューを整備し、Reception からの導線を統一する。
          - 未紐付ステータスの警告表示とトーストを統合する。
        priority: Medium
        status: not_started
        progress: 0
        agent: codex
        api:
          - "/orca12/patientmodv2/outpatient"
        dependency:
          - src/webclient_productionization/charts/36_Charts承認ロックと状態統一.md
        schedule:
          start: 2026-02-03T12:00:00.000Z
          days: 2
      41_患者編集と監査ログビュー統合.md:
        content: |-
          # 41 患者編集と監査ログビュー統合

          - 右ペインの編集フォームに監査ログビューを追加し、保存結果と ORCA 反映状態を可視化する。
          - missingMaster=true の場合の編集ブロックと理由表示を実装する。
        priority: Medium
        status: not_started
        progress: 0
        agent: claude code
        api:
          - "/orca12/patientmodv2/outpatient"
          - "/api/audit"
        dependency:
          - src/webclient_productionization/patients/40_患者一覧と保存ビュー整備.md
        schedule:
          start: 2026-02-05T12:00:00.000Z
          days: 2
      42_Charts/Reception連携導線の固定.md:
        content: |-
          # 42 Charts/Reception 連携導線の固定

          - Charts から患者管理へ遷移した場合の戻り URL を保証し、フィルタ復元を安定させる。
          - 受付キーワードとの同期を維持し、誤操作防止のバナーを追加する。
        priority: Low
        status: not_started
        progress: 0
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/patients/41_患者編集と監査ログビュー統合.md
        schedule:
          start: 2026-02-07T12:00:00.000Z
          days: 1
    administration:
      50_設定配信フォームの本番要件充足.md:
        content: |-
          # 50 設定配信フォームの本番要件充足

          - `chartsDisplayEnabled/chartsSendEnabled/chartsMasterSource` の配信状態を UI とバナーに反映する。
          - 環境情報（dev/stage）と最終配信時刻の表示を更新し、監査イベントを統一する。
        priority: High
        status: not_started
        progress: 0
        agent: codex
        api:
          - "/api/admin/config"
          - "/api/admin/delivery"
        dependency:
          - src/webclient_productionization/patients/42_Charts/Reception連携導線の固定.md
        schedule:
          start: 2026-02-08T12:00:00.000Z
          days: 2
      51_配信キュー監視と再送導線.md:
        content: |-
          # 51 配信キュー監視と再送導線

          - 遅延検知閾値と warning バナーを設定し、再送/破棄の結果を監査ログに反映する。
          - キュー操作の結果を Reception/Charts にブロードキャストする。
        priority: High
        status: not_started
        progress: 0
        agent: claude code
        api:
          - "/api/orca/queue"
        dependency:
          - src/webclient_productionization/administration/50_設定配信フォームの本番要件充足.md
        schedule:
          start: 2026-02-10T12:00:00.000Z
          days: 1.5
      52_Administration権限ガードと監査.md:
        content: |-
          # 52 Administration 権限ガードと監査

          - `system_admin` 以外の操作制限を UI/ARIA で明示し、監査ログに記録する。
          - 不正操作時のメッセージとフォールバック導線を整備する。
        priority: Medium
        status: not_started
        progress: 0
        agent: gemini cli
        api: []
        dependency:
          - src/webclient_productionization/administration/51_配信キュー監視と再送導線.md
        schedule:
          start: 2026-02-11T18:00:00.000Z
          days: 1
      53_配信バナーの全画面反映.md:
        content: |-
          # 53 配信バナーの全画面反映

          - Administration の配信結果を Reception/Charts/Patients に即時反映する。
          - バナーの `aria-live` 設定と runId 表示を統一する。
        priority: Medium
        status: not_started
        progress: 0
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/administration/52_Administration権限ガードと監査.md
        schedule:
          start: 2026-02-12T18:00:00.000Z
          days: 1
    outpatient_mock:
      60_OutpatientMockのQA運用整備.md:
        content: |-
          # 60 Outpatient Mock の QA 運用整備

          - MSW シナリオ選択と `VITE_DISABLE_MSW=1` 時の警告表示を整備する。
          - QA の観点から runId と dataSourceTransition の切替操作を明示する。
        priority: Low
        status: not_started
        progress: 0
        agent: claude code
        api: []
        dependency:
          - src/webclient_productionization/administration/53_配信バナーの全画面反映.md
        schedule:
          start: 2026-02-13T18:00:00.000Z
          days: 1
    infrastructure:
      70_環境変数とビルド/配信設定の整理.md:
        content: |-
          # 70 環境変数とビルド/配信設定の整理

          - `.env` の本番/ステージ分離、プロキシ・証明書・CORS の前提を整理する。
          - MSW 無効化時の API 直接接続パスを検証し、本番向けビルド設定を確定する。
        priority: High
        status: not_started
        progress: 0
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/outpatient_mock/60_OutpatientMockのQA運用整備.md
        schedule:
          start: 2026-02-14T18:00:00.000Z
          days: 2
      71_セキュリティとログマスキング.md:
        content: |-
          # 71 セキュリティとログマスキング

          - フロントエンド側での機微情報表示/ログ出力を最小化し、マスキングルールを整理する。
          - セッション切れ時の安全なログアウトとエラー通知を統一する。
        priority: High
        status: not_started
        progress: 0
        agent: claude code
        api: []
        dependency:
          - src/webclient_productionization/infrastructure/70_環境変数とビルド/配信設定の整理.md
        schedule:
          start: 2026-02-16T18:00:00.000Z
          days: 1
      72_性能最適化とキャッシュ設計.md:
        content: |-
          # 72 性能最適化とキャッシュ設計

          - 大量データ表示時のレンダリング最適化、キャッシュ期限、再取得条件を整理する。
          - 診療中の UI ブロッキングを抑えるための非同期制御を導入する。
        priority: Medium
        status: not_started
        progress: 0
        agent: gemini cli
        api: []
        dependency:
          - src/webclient_productionization/infrastructure/71_セキュリティとログマスキング.md
        schedule:
          start: 2026-02-17T18:00:00.000Z
          days: 1.5
    quality:
      80_Playwright回帰テスト整備.md:
        content: |-
          # 80 Playwright 回帰テスト整備

          - トーンバナー/aria-live/遷移フロー/権限ガードのシナリオを自動化する。
          - `VITE_DISABLE_MSW=1` 前提のステージ接続シナリオを追加する。
        priority: High
        status: not_started
        progress: 0
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/infrastructure/72_性能最適化とキャッシュ設計.md
        schedule:
          start: 2026-02-19T06:00:00.000Z
          days: 3
      81_Vitestユニットテスト補強.md:
        content: |-
          # 81 Vitest ユニットテスト補強

          - 監査/テレメトリ/トーン判定などのユーティリティに単体テストを追加する。
          - 主要フックのエッジケースを網羅し、回帰を抑える。
        priority: Medium
        status: not_started
        progress: 0
        agent: claude code
        api: []
        dependency:
          - src/webclient_productionization/quality/80_Playwright回帰テスト整備.md
        schedule:
          start: 2026-02-22T06:00:00.000Z
          days: 1.5
      82_A11y監査とUI整合.md:
        content: |-
          # 82 A11y 監査と UI 整合

          - 主要フローのアクセシビリティチェック（色コントラスト/読み上げ/キーボード）を実施する。
          - A11y 修正を本番 DoD に反映する。
        priority: Medium
        status: not_started
        progress: 0
        agent: gemini cli
        api: []
        dependency:
          - src/webclient_productionization/quality/81_Vitestユニットテスト補強.md
        schedule:
          start: 2026-02-23T18:00:00.000Z
          days: 1
    release:
      90_運用ドキュメント整備.md:
        content: |-
          # 90 運用ドキュメント整備

          - 監視/障害時対応/ログ確認の手順をまとめ、RUN_ID を含む運用フローを確定する。
          - ロール/権限/配信の運用ルールを明文化する。
        priority: Medium
        status: not_started
        progress: 0
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/quality/82_A11y監査とUI整合.md
        schedule:
          start: 2026-02-24T18:00:00.000Z
          days: 1.5
      91_ステージ検証とリハーサル.md:
        content: |-
          # 91 ステージ検証とリハーサル

          - `WEB_CLIENT_MODE=npm ./setup-modernized-env.sh` を用い、ステージ環境で疎通と監査ログの一致を検証する。
          - 外来導線（Reception → Charts → Patients → Administration）を通し、runId とトーンの整合を確認する。
        priority: High
        status: not_started
        progress: 0
        agent: claude code
        api: []
        dependency:
          - src/webclient_productionization/release/90_運用ドキュメント整備.md
        schedule:
          start: 2026-02-26T06:00:00.000Z
          days: 2
      92_本番リリース判定.md:
        content: |-
          # 92 本番リリース判定

          - DoD/受け入れ基準の達成状況を確認し、未達項目はロールバック計画と合わせて整理する。
          - 本番リリースのチェックリストを最終化し、Go/No-Go を記録する。
        priority: High
        status: not_started
        progress: 0
        agent: codex
        api: []
        dependency:
          - src/webclient_productionization/release/91_ステージ検証とリハーサル.md
        schedule:
          start: 2026-02-28T06:00:00.000Z
          days: 1
