ganttConfig:
  defaultView: week
  startDate: 2025-12-12
  showFilters: true
  filters:
    priorities:
      High: true
      Medium: true
      Low: true
    statuses:
      completed: true
      in_progress: true
      not_started: true
    showDependencies: true
labels:
  dayNames:
    - 日
    - 月
    - 火
    - 水
    - 木
    - 金
    - 土
  priorities:
    high: 高
    medium: 中
    low: 低
  statuses:
    completed: 完了
    inProgress: 進行中
    notStarted: 未開始
  buttons:
    filter: フィルター
    previousPeriod: 前へ
    nextPeriod: 次へ
  filterPanel:
    priorities: 優先度
    statuses: ステータス
    dependencies: 依存関係
    showDependencies: 依存関係を表示
    tasksCount: タスク数
  tooltipFields:
    startDate: 開始日
    duration: 期間
    priority: 優先度
    status: ステータス
    progress: 進捗
    agent: エージェント
    details: 詳細
    prerequisites: 前提タスク
    nextTasks: Next Tasks
filters:
  priorities:
    High: true
    Medium: true
    Low: true
  statuses:
    completed: true
    in_progress: true
    not_started: true
  showDependencies: true
src:
  charts_production_outpatient:
    00_RUN_IDと参照チェーン.md:
      content: |-
        # 00 RUN_ID と参照チェーン

        - 本ガントの実行開始時に RUN_ID を `YYYYMMDDThhmmssZ` で採番し、以降の証跡・DOC_STATUS・ログに同一値を使う。
        - 参照チェーン: `AGENTS.md` → `docs/web-client/README.md` → `docs/server-modernization/phase2/INDEX.md` → `docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md` → 本ガント。
        - ローカル検証は `WEB_CLIENT_MODE=npm ./setup-modernized-env.sh` を前提に、ログイン情報は `setup-modernized-env.sh` 記載のものを使用する。
        - 2025-12-16 進捗確認: `src/modernization/module_json` 配下のタスクを完了済み。Charts ガントで修正が必要な未完了タスクは現時点なし（foundation/11 以降を予定どおり着手）。
      priority: High
      status: completed
      progress: 100
      agent: codex
      api: []
      dependency: []
      schedule:
        start: 2025-12-12T13:06:47.000Z
        days: 0.5
    01_外来機能の完全カバレッジ定義.md:
      content: |-
        # 01 外来機能の完全カバレッジ定義（商用カルテ品質のゴール）

        - 「Charts（電子カルテ画面）」を **実運用できる品質** まで引き上げるため、モダナイズ版サーバーの外来機能（予約/請求/外来医療記録/患者更新/設定配信/キュー）の UI カバレッジを “漏れなく” 一覧化する。
        - “市販カルテ相当” の要件として、監査（auditEvent/操作ログ）、アクセシビリティ（ARIA + 重要通知）、運用（障害時表示/再試行/フィクスチャ運用）を Charts の DoD に含める。
        - 本ガントの成果物は「外来: 受付→診療→会計」の経路を Charts 観点で完走できること（Reception からの遷移・患者編集・ORCA送信・状態遷移・印刷/出力）。
      priority: High
      status: completed
      progress: 100
      agent: claude code
      api:
        - "/api01rv2/claim/outpatient/*"
        - "/api01rv2/appointment/outpatient/*"
        - "/orca21/medicalmodv2/outpatient"
        - "/orca12/patientmodv2/outpatient"
        - "/api/admin/config"
        - "/api/admin/delivery"
        - "/api/orca/queue"
      dependency:
        - src/charts_production_outpatient/00_RUN_IDと参照チェーン.md
      schedule:
        start: 2025-12-12T13:19:01.000Z
        days: 1
    02_ChartsPage現状棚卸しとギャップ.md:
      content: |-
        # 02 ChartsPage 現状棚卸しとギャップ

        - `docs/web-client/planning/phase2/WEB_CLIENT_IMPLEMENTATION_PLAN.md` と実装（`web-client/src/features/charts/*`）を突き合わせ、未実装/未統合の UI・フロー・監査項目を列挙する。
        - 重要ギャップを「P0: 運用不可」「P1: 運用に支障」「P2: 品質改善」に分類し、以降タスクの優先度に反映する。
        - Charts に閉じない依存（Reception/Patients/Administration）を “入口/出口” として明示し、責務分離（Chart 内で完結すること/別画面に委譲すること）を決める。
      priority: High
      status: completed
      progress: 100
      agent: gemini cli
      api: []
      dependency:
        - src/charts_production_outpatient/01_外来機能の完全カバレッジ定義.md
      schedule:
        start: 2025-12-12T14:00:14.000Z
        days: 2
    03_モダナイズ外来API契約テーブル確定.md:
      content: |-
        # 03 モダナイズ外来 API 契約テーブル確定

        - `docs/web-client/architecture/web-client-api-mapping.md` をベースに、Charts が直接/間接に使う外来 API を “呼び出し条件・ヘッダ(runId 等)・監査(details)・UI 表示” まで確定させる。
        - `dataSourceTransition/cacheHit/missingMaster/fallbackUsed/traceId` を UI と auditEvent に **透過** するルールを Charts 観点で固め、エラー時の再試行/ガード（送信不可等）に反映する。
        - ここで確定した契約は以降の Playwright シナリオ/フィクスチャの単一ソースとして扱う。
      priority: High
      status: completed
      progress: 100
      agent: cursor cli
      api:
        - "/api01rv2/claim/outpatient/*"
        - "/api01rv2/appointment/outpatient/*"
        - "/orca21/medicalmodv2/outpatient"
        - "/orca12/patientmodv2/outpatient"
      dependency:
        - src/charts_production_outpatient/02_ChartsPage現状棚卸しとギャップ.md
      schedule:
        start: 2025-12-12T14:37:20.000Z
        days: 2
    foundation:
      10_セッションと権限ガード整理.md:
        content: |-
          # 10 セッションと権限ガード整理

          - Charts 内のアクション（診療終了/ORCA送信/患者編集/印刷）を権限でガードし、権限不足は disabled＋理由（ツールチップ/aria-describedby）で提示する。
          - セッション切れ/施設不一致/ユーザー変更時に、Charts の状態（runId、選択患者、ドラフト）を安全に破棄してログアウトへ誘導する。
          - 監査上の “誰が・いつ・どの runId で” を UI に必ず表示できるよう、Topbar/ヘッダの表示要件を確定する。
          - RUN_ID=`20251213T000432Z`。証跡: `docs/web-client/planning/phase2/logs/20251213T000432Z-charts-session-permission-guard.md`。
        priority: High
        status: completed
        progress: 100
        agent: codex
        api:
          - "/user/{facility:user}"
          - "/api/admin/config"
        dependency:
          - src/charts_production_outpatient/03_モダナイズ外来API契約テーブル確定.md
        schedule:
          start: 2025-12-13T00:04:32.000Z
          days: 0.5
      11_監査ログauditEvent統一.md:
        content: |-
          # 11 監査ログ（auditEvent）統一

          - Charts の UI 操作を `auditEvent` の語彙に揃え、重要操作（患者切替/送信/終了/印刷/失敗）を “必ず” 記録する。
          - `runId/dataSource/cacheHit/missingMaster/fallbackUsed/dataSourceTransition` を details に統一して透過し、監査ログと UI 表示が乖離しないことを DoD にする。
          - 監査ログの “個人情報” を最小化しつつ、追跡可能性（traceId/requestId）を確保するルールを整備する。
        priority: High
        status: completed
        progress: 100
        agent: claude code
        api: []
        dependency:
          - src/charts_production_outpatient/03_モダナイズ外来API契約テーブル確定.md
        schedule:
          start: 2025-12-22T00:00:00.000Z
          days: 2
      12_エラーハンドリングとリトライ規約.md:
        content: |-
          # 12 エラーハンドリングとリトライ規約

          - API 失敗（timeout/4xx/5xx/スキーマ不一致）を “運用で困らない” 表示に統一し、再試行/回復導線を明示する。
          - `missingMaster=true` のときは送信・編集をブロックし、ToneBanner（warning/aria-live=assertive）で理由と次アクションを提示する。
          - 画面全体の ErrorBoundary と、パネル単位の “部分失敗” 表示の使い分けを確定する。
          - 関連ドキュメント（`src/charts_production_outpatient/03_モダナイズ外来API契約テーブル確定.md`、`src/charts_production_outpatient/foundation/10_セッションと権限ガード整理.md`、`docs/web-client/planning/phase2/logs/20251217T125828Z-charts-error-handling.md`）の参照リンクを現行名称に更新し、3 章/10 章の要件と本タスクの成果物を整合させる。
        priority: High
        status: completed
        progress: 100
        agent: cursor cli
        api: []
        dependency:
          - src/charts_production_outpatient/03_モダナイズ外来API契約テーブル確定.md
          - src/charts_production_outpatient/foundation/10_セッションと権限ガード整理.md
        schedule:
          start: 2025-12-24T00:00:00.000Z
          days: 2
      13_データ取得レイヤの統一_fetchWithResolver.md:
        content: |-
          # 13 データ取得レイヤの統一（fetchWithResolver）

          - Charts で使う “外来 API 呼び出し” を `fetchWithResolver`/`resolveMasterSource` の方針に統一し、dataSource 系メタデータを漏れなく付与する。
          - React Query のキャッシュ判定（cacheHit）と強制リフェッチ（retry）を、UI 表示（Pill/Badge）と監査ログに同期させる。
          - API ごとの変換（DTO→ViewModel）を 1 箇所に集約し、スキーマ差異の吸収ポイントを明確化する。
        priority: High
        status: completed
        progress: 100
        agent: codex
        api:
          - "/api01rv2/claim/outpatient/*"
          - "/api01rv2/appointment/outpatient/*"
          - "/orca21/medicalmodv2/outpatient"
        dependency:
          - src/charts_production_outpatient/foundation/11_監査ログauditEvent統一.md
          - src/charts_production_outpatient/foundation/12_エラーハンドリングとリトライ規約.md
        schedule:
          start: 2025-12-26T00:00:00.000Z
          days: 3
      14_パフォーマンス予算と計測導入.md:
        content: |-
          # 14 パフォーマンス予算と計測導入

          - Charts の “開く/患者切替/タイムライン更新” の体感性能を KPI 化し、許容待ち時間（例: 初回 2s、切替 1s）を定義する。
          - ローディング表示（スケルトン/段階表示）を統一し、遅延があっても業務が止まらない UI にする。
          - 主要計測点（API latency、描画時間、エラー率）を telemetry へ出せる形で整理する。
        priority: Medium
        status: completed
        progress: 100
        agent: gemini cli
        api: []
        dependency:
          - src/charts_production_outpatient/foundation/13_データ取得レイヤの統一_fetchWithResolver.md
        schedule:
          start: 2025-12-30T00:00:00.000Z
          days: 2
    ux:
      20_ChartsシェルUI最終レイアウト.md:
        content: |-
          # 20 Charts シェル UI 最終レイアウト

          - `charts-claim-ui-policy.md` のレイアウト比率・トーン要件に沿って、ヘッダ/アクションバー/左右ペイン/本文の最終レイアウトを確定する。
          - “重要情報（患者・受付ID・保険/自費・runId・dataSourceTransition）” を常時視認できる配置に統一する。
          - 狭い画面/大きい画面の振る舞い（折りたたみ・固定）を確定し、操作回数を最小化する。
        priority: High
        status: completed
        progress: 100
        agent: claude code
        api: []
        dependency:
          - src/charts_production_outpatient/foundation/13_データ取得レイヤの統一_fetchWithResolver.md
        schedule:
          start: 2026-01-02T00:00:00.000Z
          days: 3
      21_キーボード操作とARIA監査.md:
        content: |-
          # 21 キーボード操作と ARIA 監査

          - 主要操作（患者切替/タブ移動/検索/送信/印刷）をキーボードで完結できるようにし、フォーカス順を最適化する。
          - ToneBanner/トースト/エラー表示の `role` と `aria-live` を規約化し、通知が “過不足なく” 読み上げられる状態にする。
          - モーダル/ダイアログのフォーカストラップ、Escape 閉じる、戻り先の復元を統一する。
          - キーボード操作後も Topbar の `runId`/dataSource 表示が上書きされないことを検証し、RUN_ID を DOC_STATUS・証跡に同一で残す（再宣言や初期化処理での上書きを禁止）。
          - RUN_ID=`20251217T113616Z`。証跡: `docs/web-client/planning/phase2/logs/20251217T113616Z-charts-keyboard-aria.md`。
        priority: High
        status: completed
        progress: 100
        agent: codex
        api: []
        dependency:
          - src/charts_production_outpatient/foundation/10_セッションと権限ガード整理.md
          - src/charts_production_outpatient/ux/20_ChartsシェルUI最終レイアウト.md
        schedule:
          start: 2025-12-17T11:36:16.000Z
          days: 3
      22_ToneBannerと状態Pillの一貫性.md:
        content: |-
          # 22 ToneBanner と状態 Pill の一貫性

          - `tone=server`（dataSourceTransition=server）/warning/error の表現を Charts 全域で統一し、受付（Reception）と同じ語彙で説明する。
          - `cacheHit/missingMaster/fallbackUsed` のバッジ表示と、詳細（tooltip/ヘルプ）を設計して “判断できる情報量” を担保する。
          - 重要度に応じて `aria-live` を切り替え、誤通知/過通知を防ぐ。
        priority: High
        status: completed
        progress: 100
        agent: cursor cli
        api: []
        dependency:
          - src/charts_production_outpatient/ux/20_ChartsシェルUI最終レイアウト.md
        schedule:
          start: 2026-01-06T00:00:00.000Z
          days: 2
      23_DocumentTimeline商用レベル仕上げ.md:
        content: |-
          # 23 DocumentTimeline 商用レベル仕上げ

          - 受付→診療→ORCA キューの状態遷移をタイムラインで “迷いなく” 追えるようにし、失敗/再試行/保留の状態を明示する。
          - `missingMaster=true` の行ハイライトと “次にやること” を表示し、送信不可の理由が一目で分かるようにする。
          - 大量データでも破綻しない表示（折りたたみ、仮想化、段階ロード）を導入する。
          - RUN_ID=`20251217T150614Z`。証跡: `docs/web-client/planning/phase2/logs/20251217T150614Z-document-timeline.md`。
        priority: High
        status: completed
        progress: 100
        agent: claude code
        api:
          - "/orca21/medicalmodv2/outpatient"
          - "/api/orca/queue"
        dependency:
          - src/charts_production_outpatient/ux/22_ToneBannerと状態Pillの一貫性.md
        schedule:
          start: 2025-12-17T15:06:14.000Z
          days: 4
      24_OrcaSummary_請求予約_商用レベル仕上げ.md:
        content: |-
          # 24 OrcaSummary（請求/予約）商用レベル仕上げ

          - 請求/予約サマリを “診療中の判断に必要な粒度” で表示し、データソースの説明（dataSourceTransition）を添える。
          - `fallbackUsed=true` の場合は警告を強め、計算が暫定であることを明示（業務判断ミス防止）。
          - 関連アクション（予約へ遷移、会計へ、再取得）を UI で自然に辿れるようにする。
          - RUN_ID=`20251217T130407Z`。証跡: `docs/web-client/planning/phase2/logs/20251217T130407Z-orca-summary.md`。
        priority: High
        status: completed
        progress: 100
        agent: gemini cli
        api:
          - "/api01rv2/claim/outpatient/*"
          - "/api01rv2/appointment/outpatient/*"
        dependency:
          - src/charts_production_outpatient/ux/22_ToneBannerと状態Pillの一貫性.md
        schedule:
          start: 2025-12-17T13:04:07.000Z
          days: 3
      25_患者サイドペイン_基本保険履歴_仕上げ.md:
        content: |-
          # 25 患者サイドペイン（基本/保険/履歴）仕上げ

          - Charts 内の患者情報表示を “閲覧中心” に揃え、編集は権限と missingMaster によってガードする。
          - 患者基本・保険情報の差分表示（変更前/変更後）と、保存時の監査ログを UI で確認できる導線を用意する。
          - 過去受診/直近受診の参照導線を整理し、患者切替ミスを減らす UI にする。
          - RUN_ID=`20251218T092541Z`。証跡: `docs/web-client/planning/phase2/logs/20251218T092541Z-charts-patient-sidepane.md`。
        priority: Medium
        status: completed
        progress: 100
        agent: codex
        api:
          - "/orca12/patientmodv2/outpatient"
        dependency:
          - src/charts_production_outpatient/ux/20_ChartsシェルUI最終レイアウト.md
        schedule:
          start: 2025-12-18T09:25:41.000Z
          days: 3
      26_印刷_エクスポート_診療文書.md:
        content: |-
          # 26 印刷/エクスポート（診療文書）

          - “診療記録の出力” を商用要件として実装し、印刷プレビュー（A4/余白/ヘッダ）とPDF出力を整備する。
          - 監査ログに “誰が・いつ・何を出力したか” を残し、runId と紐づける。
          - 個人情報の取り扱い（画面/印刷）と、出力時の注意喚起（tone=warning）を整備する。
          - RUN_ID=`20251217T233649Z`。証跡: `docs/web-client/planning/phase2/logs/20251217T233649Z-charts-print-export.md`。
        priority: Medium
        status: completed
        progress: 100
        agent: claude code
        api: []
        dependency:
          - src/charts_production_outpatient/ux/23_DocumentTimeline商用レベル仕上げ.md
          - src/charts_production_outpatient/ux/24_OrcaSummary_請求予約_商用レベル仕上げ.md
          - src/charts_production_outpatient/ux/25_患者サイドペイン_基本保険履歴_仕上げ.md
        schedule:
          start: 2025-12-17T23:36:49.000Z
          days: 3
    workflow:
      30_外来受診コンテキスト確立.md:
        content: |-
          # 30 外来受診コンテキスト確立（受付ID/診療日/患者）

          - Reception→Charts の遷移で “受付ID（来院コンテキスト）” を確実に受け取り、URL/タブ/復元で破綻しない状態管理にする。
          - 患者切替・複数タブ・戻る操作で “別患者の情報が混ざらない” ことを最優先にし、クリティカルガードを実装する。
          - 受付→診療→会計の状態遷移を UI に明示し、現場の “今どこ？” を迷わせない。
          - RUN_ID=`20251218T082404Z`。証跡: `docs/web-client/planning/phase2/logs/20251218T082404Z-charts-encounter-context.md`。
        priority: High
        status: completed
        progress: 100
        agent: codex
        api:
          - "/api01rv2/appointment/outpatient/*"
        dependency:
          - src/charts_production_outpatient/foundation/13_データ取得レイヤの統一_fetchWithResolver.md
        schedule:
          start: 2025-12-18T08:24:04.000Z
          days: 2
      31_診療開始終了の状態遷移.md:
        content: |-
          # 31 診療開始/終了の状態遷移

          - 診療開始（Chart open）から診療終了（完了/中止）の状態遷移を明文化し、UI の表示（Timeline/バッジ）と整合させる。
          - “未保存ドラフトあり” や “ORCA送信未完了” を理由に終了を抑止できるようにし、誤操作を防ぐ。
          - 例外系（通信断・タイムアウト）でも状態が壊れない復元戦略を定義する。
          - RUN_ID=`20251217T120220Z`（親=`20251217T114331Z`）。証跡: `docs/web-client/planning/phase2/logs/20251217T114331Z-charts-encounter-state.md` / `docs/web-client/planning/phase2/logs/20251217T120220Z-charts-encounter-state-ux.md`。
        priority: High
        status: completed
        progress: 100
        agent: claude code
        api: []
        dependency:
          - src/charts_production_outpatient/workflow/30_外来受診コンテキスト確立.md
        schedule:
          start: 2025-12-17T12:02:20.000Z
          days: 3
      32_ドラフト保存と復元.md:
        content: |-
          # 32 ドラフト保存と復元

          - 送信前の入力（メモ/所見/チェック項目等）をドラフトとして保存し、誤終了やブラウザクラッシュから復元できるようにする。
          - ドラフトの適用範囲（受付ID/患者ID/診療日）を厳密にし、取り違えを防止する。
          - 保存/復元/破棄を監査ログに残し、運用上の追跡を可能にする。
          - RUN_ID=`20251217T212600Z`。証跡: `docs/web-client/planning/phase2/logs/20251217T212600Z-charts-draft-save.md`。
        priority: Medium
        status: completed
        progress: 100
        agent: codex
        api: []
        dependency:
          - src/charts_production_outpatient/workflow/31_診療開始終了の状態遷移.md
        schedule:
          start: 2025-12-17T21:26:00.000Z
          days: 3
      33_ORCA送信フロー_送信前チェック.md:
        content: |-
          # 33 ORCA 送信フロー（送信前チェック）

          - `missingMaster=true`/権限不足/未保存ドラフト/通信不安定など “送信不可” の条件を洗い出し、UI で明確にブロックする。
          - 送信開始→進行中→成功/失敗の状態を一貫して表示し、再試行・中断・証跡（traceId/runId）を残す。
          - 送信失敗時は “次にやること（受付へ戻る/再取得/設定確認）” を提示する。
          - RUN_ID=`20251217T233430Z`。証跡: `docs/web-client/planning/phase2/logs/20251217T233430Z-charts-orca-send-precheck.md`。
        priority: High
        status: completed
        progress: 100
        agent: cursor cli
        api:
          - "/api/orca/queue"
        dependency:
          - src/charts_production_outpatient/workflow/32_ドラフト保存と復元.md
          - src/charts_production_outpatient/ux/22_ToneBannerと状態Pillの一貫性.md
        schedule:
          start: 2025-12-17T23:34:30.000Z
          days: 4
      34_並行編集とロック表示.md:
        content: |-
          # 34 並行編集とロック表示（安全性）

          - 同一患者/同一受付ID を複数タブ/複数端末で開いたときの衝突を想定し、警告/読み取り専用化/破棄のルールを整備する。
          - “最後に更新したのは誰か/いつか” の表示と、誤上書き防止の UX を実装する。
          - 衝突発生時の監査ログと、ユーザーへの説明（tone=warning）を統一する。
          - RUN_ID=`20251218T092228Z`。証跡: `docs/web-client/planning/phase2/logs/20251218T092228Z-charts-concurrent-edit-lock.md`。
        priority: Medium
        status: completed
        progress: 100
        agent: gemini cli
        api: []
        dependency:
          - src/charts_production_outpatient/workflow/31_診療開始終了の状態遷移.md
        schedule:
          start: 2025-12-18T09:22:28.000Z
          days: 2
    integration:
      40_claim_outpatient統合.md:
        content: |-
          # 40 `/api01rv2/claim/outpatient/*` 統合（請求バンドル）

          - OrcaSummary/タイムラインが参照する “請求バンドル” を API から取得し、メタデータ（runId 等）と UI を同期する。
          - “会計待ち/会計済み” の判定や、請求試算が暫定（fallbackUsed）なときの警告を実装する。
          - 失敗時の再試行導線と、監査ログ（成功/失敗）を完成させる。
          - RUN_ID=`20251218T093252Z`。証跡: `src/charts_production_outpatient/integration/logs/20251218T093252Z-claim-outpatient-integration.md`。
        priority: High
        status: completed
        progress: 100
        agent: codex
        api:
          - "/api01rv2/claim/outpatient/*"
        dependency:
          - src/charts_production_outpatient/workflow/30_外来受診コンテキスト確立.md
          - src/charts_production_outpatient/foundation/13_データ取得レイヤの統一_fetchWithResolver.md
        schedule:
          start: 2025-12-18T09:32:52.000Z
          days: 4
      41_appointment_outpatient統合.md:
        content: |-
          # 41 `/api01rv2/appointment/outpatient/*` 統合（予約/来院）

          - 予約一覧/患者別予約/来院中リストを Charts が必要とする形に正規化し、受付ID と紐づく表示を整備する。
          - 予約変更・キャンセル等 “業務で頻発する操作” は Charts からの導線（リンク/遷移）として整備する。
          - 予約データの未取得/不整合時の表示（tone=info/warning）を統一する。
          - RUN_ID=`20251217T234312Z`。証跡: `src/charts_production_outpatient/integration/logs/20251217T234312Z-appointment-outpatient-integration.md`。
        priority: High
        status: completed
        progress: 100
        agent: claude code
        api:
          - "/api01rv2/appointment/outpatient/*"
        dependency:
          - src/charts_production_outpatient/integration/40_claim_outpatient統合.md
        schedule:
          start: 2025-12-17T23:43:12.000Z
          days: 3
      42_medicalmodv2_outpatient表示セクション分割.md:
        content: |-
          # 42 `/orca21/medicalmodv2/outpatient` 表示セクション分割（医療記録）

          - 外来医療記録を “市販カルテ相当” の読みやすさで表示するため、セクション（診断/処方/検査/処置/メモ等）に分割して提示する。
          - セクションごとの “未取得/欠落/エラー” を部分的に表示できるようにし、全体停止を避ける。
          - `recordsReturned/outcome` を UI と監査ログに反映し、監査で追える形にする。
        priority: High
        status: not_started
        progress: 0
        agent: cursor cli
        api:
          - "/orca21/medicalmodv2/outpatient"
        dependency:
          - src/charts_production_outpatient/integration/41_appointment_outpatient統合.md
        schedule:
          start: 2026-01-14T00:00:00.000Z
          days: 5
      43_patientmodv2_outpatient編集導線.md:
        content: |-
          # 43 `/orca12/patientmodv2/outpatient` 編集導線（患者更新）

          - Charts の患者サイドペインから “安全に” 患者基本/保険情報を更新できる導線を整備する（権限/監査/差分表示）。
          - create/update/delete の操作種別（operation）を監査ログに残し、失敗時の巻き戻し/再試行を実装する。
          - 入力検証（形式/必須/マスタ依存）とエラー表示（role=alert）を統一する。
        priority: Medium
        status: not_started
        progress: 0
        agent: codex
        api:
          - "/orca12/patientmodv2/outpatient"
        dependency:
          - src/charts_production_outpatient/integration/42_medicalmodv2_outpatient表示セクション分割.md
          - src/charts_production_outpatient/foundation/10_セッションと権限ガード整理.md
        schedule:
          start: 2026-01-20T00:00:00.000Z
          days: 4
      44_admin_config_deliveryフラグ同期.md:
        content: |-
          # 44 `/api/admin/config` `/api/admin/delivery` フラグ同期

          - 設定配信（delivery）により、Charts の機能フラグ（表示/送信/マスタソース）を切り替えられるようにする。
          - 設定が “いつ・誰に・どの runId で” 適用されたかを UI と監査ログで追えるようにする。
          - 設定変更が Charts の状態に影響する場合（例: server→fallback）に、ToneBanner で明確に通知する。
          - RUN_ID=`20251217T233755Z`。証跡: `docs/web-client/planning/phase2/logs/20251217T233755Z-admin-config-delivery-flags.md`。
        priority: Medium
        status: completed
        progress: 100
        agent: gemini cli
        api:
          - "/api/admin/config"
          - "/api/admin/delivery"
        dependency:
          - src/charts_production_outpatient/foundation/10_セッションと権限ガード整理.md
          - src/charts_production_outpatient/foundation/13_データ取得レイヤの統一_fetchWithResolver.md
        schedule:
          start: 2025-12-17T23:37:55.000Z
          days: 3
      45_orca_queueと送信ステータス表示.md:
        content: |-
          # 45 `/api/orca/queue` と送信ステータス表示

          - ORCA キューの状態を Charts に表示し、送信の “待ち/処理中/成功/失敗” をタイムラインと整合させる。
          - キュー遅延や滞留を “現場が判断できる” 形で示し、再試行/受付確認/設定確認へ誘導する。
          - traceId/runId と紐づけて証跡を残し、問い合わせ対応（いつ何が起きたか）に耐える形にする。
        priority: High
        status: not_started
        progress: 0
        agent: claude code
        api:
          - "/api/orca/queue"
        dependency:
          - src/charts_production_outpatient/integration/42_medicalmodv2_outpatient表示セクション分割.md
          - src/charts_production_outpatient/integration/44_admin_config_deliveryフラグ同期.md
          - src/charts_production_outpatient/workflow/33_ORCA送信フロー_送信前チェック.md
        schedule:
          start: 2026-01-25T00:00:00.000Z
          days: 3
    quality:
      50_Playwright外来カルテ主要シナリオ.md:
        content: |-
          # 50 Playwright：外来カルテ主要シナリオ

          - “受付→Charts→患者確認→送信→会計” の主要シナリオを Playwright で自動化し、`dataSourceTransition` と `tone` が仕様通りであることを検証する。
          - MSW ON/OFF の両方を想定し、fixture で `missingMaster/cacheHit/fallbackUsed` を注入してバナー/ガードを再現できるようにする。
          - 失敗時に証跡（スクリーンショット/HAR/runId）を artifacts へ保存する運用を定義する。
        priority: High
        status: not_started
        progress: 0
        agent: cursor cli
        api:
          - "/api01rv2/claim/outpatient/*"
          - "/api01rv2/appointment/outpatient/*"
          - "/orca21/medicalmodv2/outpatient"
          - "/orca12/patientmodv2/outpatient"
          - "/api/orca/queue"
        dependency:
          - src/charts_production_outpatient/integration/45_orca_queueと送信ステータス表示.md
          - src/charts_production_outpatient/ux/26_印刷_エクスポート_診療文書.md
        schedule:
          start: 2026-01-28T00:00:00.000Z
          days: 5
      51_アクセシビリティ自動検査と手動監査.md:
        content: |-
          # 51 アクセシビリティ：自動検査（axe）＋手動監査

          - `aria-live`/`role`/フォーカス順の自動検査を回し、重大違反をゼロにする。
          - スクリーンリーダーでの読み上げを手動確認し、ToneBanner と “操作不能理由” が伝わることを担保する。
          - 監査結果を “直せる粒度” に落とし込み、以降の回帰テストに組み込む。
          - RUN_ID=`20251217T212939Z`。証跡: `docs/web-client/planning/phase2/logs/20251217T212939Z-charts-a11y.md`。
        priority: Medium
        status: completed
        progress: 100
        agent: gemini cli
        api: []
        dependency:
          - src/charts_production_outpatient/ux/21_キーボード操作とARIA監査.md
        schedule:
          start: 2025-12-17T21:29:39.000Z
          days: 2
      52_監査ログ_テレメトリ_証跡化.md:
        content: |-
          # 52 監査ログ/テレメトリの証跡化

          - 主要操作の auditEvent と telemetry が “同じ runId” で追えることを確認し、証跡ログへ残す。
          - `docs/server-modernization/phase2/operations/logs/<RUN_ID>-*.md` に、実施内容・期待値・結果（traceId）を記録する。
          - DOC_STATUS の該当行に RUN_ID と証跡パスを追記し、ハブ文書へ同日付で反映する。
        priority: High
        status: not_started
        progress: 0
        agent: codex
        api: []
        dependency:
          - src/charts_production_outpatient/foundation/11_監査ログauditEvent統一.md
          - src/charts_production_outpatient/quality/50_Playwright外来カルテ主要シナリオ.md
        schedule:
          start: 2026-02-04T00:00:00.000Z
          days: 2
      53_障害注入_タイムアウト_スキーマ不一致.md:
        content: |-
          # 53 障害注入（タイムアウト/スキーマ不一致）

          - タイムアウト、500、スキーマ差異、キュー滞留を意図的に再現し、Charts が “落ちずに説明できる” ことを確認する。
          - 復旧後に UI が正常復帰できること（再取得、状態の解消、ドラフト保持）を確認する。
          - 失敗の証跡（HAR/スクショ/runId/traceId）を artifacts とログへ保存する。
        priority: High
        status: not_started
        progress: 0
        agent: claude code
        api: []
        dependency:
          - src/charts_production_outpatient/integration/45_orca_queueと送信ステータス表示.md
        schedule:
          start: 2026-01-25T00:00:00.000Z
          days: 3
      54_リリース前チェックリストとDOC_STATUS更新.md:
        content: |-
          # 54 リリース前チェックリストと DOC_STATUS 更新

          - DoD（商用カルテ品質）に対して、未完了項目/既知制限/回避策を一覧化する。
          - `docs/web-client/planning/phase2/DOC_STATUS.md` を棚卸し手順に従って更新し、RUN_ID と証跡パスを備考へ追記する。
          - 形式 `【ワーカー報告】実施内容・証跡パス・DOC_STATUS 更新行・RUN_ID` を作成して共有する。
        priority: High
        status: not_started
        progress: 0
        agent: cursor cli
        api: []
        dependency:
          - src/charts_production_outpatient/quality/52_監査ログ_テレメトリ_証跡化.md
          - src/charts_production_outpatient/quality/53_障害注入_タイムアウト_スキーマ不一致.md
        schedule:
          start: 2026-02-06T00:00:00.000Z
          days: 1
