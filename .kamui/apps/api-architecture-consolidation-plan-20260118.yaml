ganttConfig:
  defaultView: day
  startDate: 2026-01-18
  showFilters: true
  filters:
    priorities:
      High: true
      Medium: true
      Low: true
    statuses:
      completed: true
      in_progress: true
      not_started: true
    showDependencies: true
labels:
  dayNames:
    - 日
    - 月
    - 火
    - 水
    - 木
    - 金
    - 土
  priorities:
    high: 高
    medium: 中
    low: 低
  statuses:
    completed: 完了
    inProgress: 進行中
    notStarted: 未開始
  buttons:
    filter: フィルター
    previousPeriod: 前へ
    nextPeriod: 次へ
  filterPanel:
    priorities: 優先度
    statuses: ステータス
    dependencies: 依存関係
    showDependencies: 依存関係を表示
    tasksCount: タスク数
  tooltipFields:
    startDate: 開始日
    duration: 期間
    priority: 優先度
    status: ステータス
    progress: 進捗
    agent: エージェント
    details: 詳細
    prerequisites: 前提タスク
    nextTasks: Next Tasks
filters:
  priorities:
    High: true
    Medium: true
    Low: true
  statuses:
    completed: true
    in_progress: true
    not_started: true
  showDependencies: true
src:
  structure.yaml:
    content: |-
      本計画は、Webクライアントとモダナイズ版サーバーの API 統合（互換ラッパー廃止）を、同一リリースで一括移行するための実装タスク集約ガントです。
      旧 API 呼び出しの完全排除、監査/可観測性メタの継承、旧 API 削除とリカバリ手順までを包含します。

      参照ドキュメント: docs/server-modernization/api-architecture-consolidation-plan.md
      RUN_ID: 20260117T194727Z
    agent選定理由: 実装と検証を横断するため、codex に統合して作業判断と変更を完結させる。
    api選定理由: OpenDolphin ネイティブ API と ORCA 公式 API のパススルーが中心のため、追加 API は不要。
    dependency: []
    agent: codex
    api: []
    ganttConfig:
      defaultView: day
      startDate: 2026-01-18
      showFilters: true
      filters:
        priorities:
          High: true
          Medium: true
          Low: true
        statuses:
          completed: true
          in_progress: true
          not_started: true
        showDependencies: true
      labels:
        dayNames:
          - 日
          - 月
          - 火
          - 水
          - 木
          - 金
          - 土
        priorities:
          high: 高
          medium: 中
          low: 低
        statuses:
          completed: 完了
          inProgress: 進行中
          notStarted: 未開始
        buttons:
          filter: フィルター
          previousPeriod: 前へ
          nextPeriod: 次へ
        filterPanel:
          priorities: 優先度
          statuses: ステータス
          dependencies: 依存関係
          showDependencies: 依存関係を表示
          tasksCount: タスク数
        tooltipFields:
          startDate: 開始日
          duration: 期間
          priority: 優先度
          status: ステータス
          progress: 進捗
          agent: エージェント
          details: 詳細
          prerequisites: 前提タスク
          nextTasks: Next Tasks
  api_architecture_consolidation:
    00_context:
      00_RUN_IDと参照チェーン.md:
        content: |-
          # 00 RUN_ID と参照チェーン

          - RUN_ID: 20260117T194727Z
          - 参照順: `docs/DEVELOPMENT_STATUS.md` → `docs/server-modernization/api-architecture-consolidation-plan.md` → `server-modernized/src` / `web-client/src` → 本ガント。
          - 互換ラッパー全廃・同一リリース移行を前提とし、削除前に切り戻しタグを作成する。
        dependency: []
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2026-01-18T00:30:00.000Z
          days: 0.25
    01_server_modernized:
      API統合移植と新規エンドポイント実装.md:
        content: |-
          # API統合移植と新規エンドポイント実装

          ## 目的
          旧互換ラッパーの機能を新 API に移植し、監査/可観測性メタを統合する。

          ## 参照
          - docs/DEVELOPMENT_STATUS.md
          - docs/server-modernization/api-architecture-consolidation-plan.md

          ## 対象
          - /orca/appointments/* と /orca/visits/* のメタ統合（runId/traceId/requestId/dataSource など）
          - 新規 /orca/claim/outpatient/* 実装（ClaimOutpatientResponse の互換メタ維持）
          - 新規 /orca/patients/local-search 実装（ローカル検索のみ）
          - AuditEventEnvelope の action/operation 語彙統一

          ## 完了条件
          - 互換ラッパー相当のレスポンス/メタが新 API で再現できる
          - サーバー側テスト/スモークの前提が整う
        dependency:
          - src/api_architecture_consolidation/00_context/00_RUN_IDと参照チェーン.md
        agent: codex
        api:
          - OpenDolphin Native API
          - ORCA Official API
        priority: High
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T01:00:00.000Z
          days: 1.5
      互換ラッパー削除とリカバリ手順整理.md:
        content: |-
          # 互換ラッパー削除とリカバリ手順整理

          ## 目的
          旧互換ラッパーを一括削除し、切り戻し手順を確実にする。

          ## 参照
          - docs/DEVELOPMENT_STATUS.md
          - docs/server-modernization/api-architecture-consolidation-plan.md

          ## 対象
          - AppointmentOutpatientResource / OutpatientClaimResource / PatientOutpatientResource の削除
          - 関連 DTO/テスト/ドキュメント参照の削除
          - 削除前コミットのタグ化（切り戻し用）

          ## 完了条件
          - 旧 API 実装と参照がリポジトリから除去される
          - タグ付きの切り戻しポイントが残る
        dependency:
          - src/api_architecture_consolidation/01_server_modernized/API統合移植と新規エンドポイント実装.md
        agent: codex
        api: []
        priority: High
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-19T13:30:00.000Z
          days: 0.75
    02_web_client:
      WebクライアントAPI差し替えと旧パス排除.md:
        content: |-
          # WebクライアントAPI差し替えと旧パス排除

          ## 目的
          Webクライアントから旧互換ラッパー呼び出しを完全排除し、新 API に統一する。

          ## 参照
          - docs/DEVELOPMENT_STATUS.md
          - docs/server-modernization/api-architecture-consolidation-plan.md

          ## 対象
          - httpClient の OUTPATIENT_API_ENDPOINTS を新 API へ置換
          - 予約/受付/請求/患者検索の API モジュール差し替え
          - MSW/Playwright モックの新パス化
          - Debug/Administration 文言から旧 API 名を削除

          ## 完了条件
          - 旧 API パスが web-client 配下から消える
          - 新 API で UI が動作する前提が揃う
        dependency:
          - src/api_architecture_consolidation/01_server_modernized/API統合移植と新規エンドポイント実装.md
        agent: codex
        api:
          - OpenDolphin Native API
          - ORCA Official API
        priority: High
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-19T14:30:00.000Z
          days: 1
    03_verification:
      起動確認と旧API未呼び出し検証.md:
        content: |-
          # 起動確認と旧API未呼び出し検証

          ## 目的
          一括移行後の動作と観測メタの連携を確認する。

          ## 参照
          - docs/DEVELOPMENT_STATUS.md
          - docs/server-modernization/api-architecture-consolidation-plan.md

          ## 対象
          - setup-modernized-env.sh で起動し Reception/Patients/Charts/Administration の主要導線が 2xx
          - runId/traceId/requestId の監査ログ出力を確認
          - ネットワーク/ログで旧 API が呼ばれていないことを確認

          ## 完了条件
          - 主要導線が 2xx
          - 旧 API パス不在がログ/トレースで証明できる
        dependency:
          - src/api_architecture_consolidation/01_server_modernized/互換ラッパー削除とリカバリ手順整理.md
          - src/api_architecture_consolidation/02_web_client/WebクライアントAPI差し替えと旧パス排除.md
        agent: codex
        api:
          - OpenDolphin Native API
          - ORCA Official API
        priority: Medium
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-20T04:00:00.000Z
          days: 0.5
