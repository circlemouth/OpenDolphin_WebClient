src:
  orca_prod_bridge:
    structure.yaml:
      content: |-
        モダナイズ版サーバー起動時に ORCAcertification 配下の接続情報を用いて webORCA 本番サーバーへ安全に接続し、取得データを WEB クライアントへ中継するためのタスクセット。
        RUN_ID を起点に証跡管理を徹底し、接続スクリプトとドキュメント整備を段階的に進める。
      agent選定理由: 接続スクリプトや手順の整備を主とするため、ローカルで即時修正しやすい codex を主担当とする。
      api選定理由: 外部 API 呼び出しは不要で、内部スクリプトと既存 ORCA 接続設定のみを参照する。
      dependency: []
      agent: codex
      api: []
      ganttConfig:
        defaultView: day
        startDate: 2025-12-10
        showFilters: true
        filters:
          priorities:
            High: true
            Medium: true
            Low: true
          statuses:
            completed: true
            in_progress: true
            not_started: true
          showDependencies: true
        labels:
          dayNames:
            - 日
            - 月
            - 火
            - 水
            - 木
            - 金
            - 土
          priorities:
            high: 高
            medium: 中
            low: 低
          statuses:
            completed: 完了
            inProgress: 進行中
            notStarted: 未開始
          buttons:
            filter: フィルター
            previousPeriod: 前へ
            nextPeriod: 次へ
          filterPanel:
            priorities: 優先度
            statuses: ステータス
            dependencies: 依存関係
            showDependencies: 依存関係を表示
            tasksCount: タスク数
          tooltipFields:
            startDate: 開始日
            duration: 期間
            priority: 優先度
            status: ステータス
            progress: 進捗
            agent: エージェント
            details: 詳細
            prerequisites: 前提タスク
            nextTasks: Next Tasks
    planning:
      接続要件整理.md:
        content: |-
          # 接続要件整理
          - ORCAcertification 配下の利用範囲と禁止事項を確認し、必要な RUN_ID 記録ポイントを洗い出す。
          - webORCA 本番宛て接続のゴール、入力・出力データ、想定ログ位置を整理。
          - 参照チェーンと更新すべきドキュメントを決定。
        dependency: []
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2025-12-10T00:00:00.000Z
          days: 1
      ORCAcertification情報棚卸し.md:
        content: |-
          # ORCAcertification 情報棚卸し
          - 既存証跡・証明書・接続先 URL・認証方式を洗い出し、機微情報の保管手順を確認。
          - RUN_ID 記録フォーマットと参照ログ (operations/logs) のパスをひとまとめにする。
        dependency:
          - src/orca_prod_bridge/planning/接続要件整理.md
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2025-12-11T00:00:00.000Z
          days: 1
      接続スクリプト設計雛形.md:
        content: |-
          # 接続スクリプト設計・雛形
          - setup-modernized-env.sh を前提に、ORCAcertification 情報を環境変数として受け取る設計をまとめる。
          - RUN_ID を引数/環境で受け取り、証跡出力先を自動生成する雛形を書く。
          - 誤用防止のガード (target 確認・確認プロンプト) を設計。
        dependency:
          - src/orca_prod_bridge/planning/接続要件整理.md
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2025-12-11T00:00:00.000Z
          days: 1
    implementation:
      接続スクリプト実装.md:
        content: |-
          # 接続スクリプト実装
          - モダナイズ版サーバー起動用のスクリプトを作成し、ORCAcertification の証明書・エンドポイントを読み込む。
          - RUN_ID 付きで operations/logs に証跡を残す処理を組み込む。
          - webORCA 本番宛て以外では abort するフェイルセーフを実装。
        dependency:
          - src/orca_prod_bridge/planning/ORCAcertification情報棚卸し.md
          - src/orca_prod_bridge/planning/接続スクリプト設計雛形.md
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2025-12-12T00:00:00.000Z
          days: 2
      API404事象再現とリクエストトレース取得.md:
        content: |-
          # API404 事象再現とリクエストトレース取得
          - server-modernized 起動手順を再実施し、404 が発生したエンドポイント・HTTP メソッド・パス・クエリを特定する。
          - access log / application log / Vite 開発プロキシの出力を RUN_ID 付きで operations/logs に保存し、リクエストヘッダー・レスポンスボディをマスキングして添付する。
          - VITE_DEV_PROXY_TARGET・WEB_CLIENT_MODE など環境変数の値を採取し、証跡にまとめる。
        dependency:
          - src/orca_prod_bridge/implementation/接続スクリプト実装.md
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2025-12-13T00:00:00.000Z
          days: 1
      ルーティング設定とAPI仕様調査.md:
        content: |-
          # ルーティング設定と API 仕様調査
          - server-modernized のルーティング/コントローラ定義と OpenAPI (docs/server-modernization/phase2/operations/ORCA_API_STATUS.md 等) を突き合わせ、404 の原因となるパスの有無・ベースパス食い違いを確認。
          - docker-compose.modernized.dev.yml や Vite 開発プロキシ設定におけるリバースプロキシ経路の差分を洗い出す。
          - API スキーマ変更の履歴がないか git log / changelog を確認し、影響範囲を整理する。
        dependency:
          - src/orca_prod_bridge/implementation/API404事象再現とリクエストトレース取得.md
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2025-12-13T00:00:00.000Z
          days: 1
      API404修正方針決定と実装.md:
        content: |-
          # API404 修正方針決定と実装
          - 調査結果を元に、server-modernized のルーティング追加/パス修正、または Vite/開発プロキシ設定の経路補正を決定する。
          - legacy server/ 配下には触れず、server-modernized または Web クライアント設定のみを修正する。
          - 必要に応じてユニットテスト/インテグレーションテストを追加し、ローカルで動作確認する。
        dependency:
          - src/orca_prod_bridge/implementation/ルーティング設定とAPI仕様調査.md
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2025-12-14T00:00:00.000Z
          days: 2
      API404回帰テストと証跡反映.md:
        content: |-
          # API404 回帰テストと証跡反映
          - 修正後に server-modernized を再起動し、404 が解消したことを ORCA_CONNECTIVITY_VALIDATION と ORCA_API_STATUS の項目に沿って確認。
          - operations/logs/<RUN_ID>-*.md に再検証結果を追記し、DOC_STATUS の同 RUN_ID 行に「API404 解消」を記載。
          - 失敗時のリスクと追加 TODO を整理し、次の WEB クライアント連携確認タスクへ引き継ぐ。
        dependency:
          - src/orca_prod_bridge/implementation/API404修正方針決定と実装.md
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2025-12-15T00:00:00.000Z
          days: 1
      モダナイズ版サーバー起動検証.md:
        content: |-
          # モダナイズ版サーバー起動検証
          - 新スクリプトで server-modernized を起動し、webORCA 本番への TLS ハンドシェイクと API 応答を確認。
          - ORCA_API_STATUS チェックリストと ORCA_CONNECTIVITY_VALIDATION 手順に沿って結果を記録。
        dependency:
          - src/orca_prod_bridge/implementation/API404回帰テストと証跡反映.md
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2025-12-15T00:00:00.000Z
          days: 1
      WEBクライアント連携確認.md:
        content: |-
          # WEB クライアント連携確認
          - WEB クライアントから ORCA 経由のデータが表示されることを受け口画面で確認し、スクリーンショットを証跡に保存。
          - 必要なら VITE_DEV_PROXY_TARGET などの設定差分をメモし、MSW 無効化条件を確認。
        dependency:
          - src/orca_prod_bridge/implementation/モダナイズ版サーバー起動検証.md
        agent: codex
        api: []
        priority: Medium
        status: not_started
        progress: 0
        schedule:
          start: 2025-12-16T00:00:00.000Z
          days: 1
      証跡ログRUN_ID記録とDOC_STATUS更新.md:
        content: |-
          # 証跡ログ RUN_ID 記録と DOC_STATUS 更新
          - operations/logs/<RUN_ID>-*.md に結果とスクリーンショットパスを追記し、DOC_STATUS に RUN_ID を記載。
          - 参照チェーン (AGENTS → README → INDEX → マネージャー指示) に沿ってリンクを反映。
        dependency:
          - src/orca_prod_bridge/implementation/モダナイズ版サーバー起動検証.md
        agent: codex
        api: []
        priority: Medium
        status: not_started
        progress: 0
        schedule:
          start: 2025-12-16T00:00:00.000Z
          days: 1
      セキュリティレビューと撤収手順.md:
        content: |-
          # セキュリティレビューと撤収手順
          - 接続に使用した証明書/秘密情報の破棄手順と撤収チェックリストをまとめる。
          - 再利用時の再発行/更新手順、ローテーション要否を記録。
        dependency:
          - src/orca_prod_bridge/implementation/WEBクライアント連携確認.md
          - src/orca_prod_bridge/implementation/証跡ログRUN_ID記録とDOC_STATUS更新.md
        agent: codex
        api: []
        priority: Low
        status: not_started
        progress: 0
        schedule:
          start: 2025-12-17T00:00:00.000Z
          days: 1
