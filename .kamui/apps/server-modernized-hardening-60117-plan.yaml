ganttConfig:
  defaultView: day
  startDate: 2026-01-18
  showFilters: true
  filters:
    priorities:
      High: true
      Medium: true
      Low: true
    statuses:
      completed: true
      in_progress: true
      not_started: true
    showDependencies: true
labels:
  dayNames:
    - 日
    - 月
    - 火
    - 水
    - 木
    - 金
    - 土
  priorities:
    high: 高
    medium: 中
    low: 低
  statuses:
    completed: 完了
    inProgress: 進行中
    notStarted: 未開始
  buttons:
    filter: フィルター
    previousPeriod: 前へ
    nextPeriod: 次へ
  filterPanel:
    priorities: 優先度
    statuses: ステータス
    dependencies: 依存関係
    showDependencies: 依存関係を表示
    tasksCount: タスク数
  tooltipFields:
    startDate: 開始日
    duration: 期間
    priority: 優先度
    status: ステータス
    progress: 進捗
    agent: エージェント
    details: 詳細
    prerequisites: 前提タスク
    nextTasks: Next Tasks
filters:
  priorities:
    High: true
    Medium: true
    Low: true
  statuses:
    completed: true
    in_progress: true
    not_started: true
  showDependencies: true
src:
  structure.yaml:
    content: |-
      server-modernized のコードレビュー未解決項目（2026-01-17/18 指摘の重大〜低リスク）を最短で解消するための実行ガント。
      RUN_ID: 20260118T003718Z。参照: docs/server-modernization/server-modernized-code-review-20260117.md。
      方針: 影響度の高い認証/公開制御を先行し、Stub/Logging/Date処理は並列ワークツリーで実施。稼働テストは全改修完了後に一括。
    agent選定理由: セキュリティ/性能/ログを並列で処理するため codex・claude code・gemini cli・cursor cli を章ごとに割当。
    api選定理由: 既存の server-modernized / ORCA Trial 接続のみで完結するため追加API不要。
    dependency: []
    agent: codex
    api: []
    ganttConfig:
      defaultView: day
      startDate: 2026-01-18
      showFilters: true
      filters:
        priorities:
          High: true
          Medium: true
          Low: true
        statuses:
          completed: true
          in_progress: true
          not_started: true
        showDependencies: true
      labels:
        dayNames:
          - 日
          - 月
          - 火
          - 水
          - 木
          - 金
          - 土
        priorities:
          high: 高
          medium: 中
          low: 低
        statuses:
          completed: 完了
          inProgress: 進行中
          notStarted: 未開始
        buttons:
          filter: フィルター
          previousPeriod: 前へ
          nextPeriod: 次へ
        filterPanel:
          priorities: 優先度
          statuses: ステータス
          dependencies: 依存関係
          showDependencies: 依存関係を表示
          tasksCount: タスク数
        tooltipFields:
          startDate: 開始日
          duration: 期間
          priority: 優先度
          status: ステータス
          progress: 進捗
          agent: エージェント
          details: 詳細
          prerequisites: 前提タスク
          nextTasks: Next Tasks
  server_modernized_60117:
    00_context:
      00_RUN_IDと前提確認.md:
        content: |-
          # RUN_ID と前提確認
          - RUN_ID: 20260118T003718Z
          - 参照チェーン: docs/DEVELOPMENT_STATUS.md → docs/server-modernization/server-modernized-code-review-20260117.md → server-modernized/src → 本ガント。
          - 目的: 6.1〜6.5 の未解決指摘を全てクローズし、最終段で稼働テストを一括実施する。
        dependency: []
        agent: codex
        api: []
        priority: High
        status: completed
        progress: 100
        schedule:
          start: 2026-01-18T01:00:00.000Z
          days: 0.1
    01_security:
      ログフィルタヘッダ認証撤去.md:
        content: |-
          # ログフィルタのヘッダ認証撤去
          - LogFilter の userName/password ヘッダ認証と SYSAD 固定バイパスを無効化または除去。
          - Elytron/標準認証のみ有効にし、ヘッダ経路は明示的に拒否レスポンスを返す。
          - web.xml / サーブレット登録への影響有無を確認。
          - 完了条件: 本番プロファイルでヘッダ認証が無効になり、既存テストが通る。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: claude code
        api: []
        priority: High
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T01:30:00.000Z
          days: 0.5
      施設IDプリンシパル分離.md:
        content: |-
          # 施設IDプリンシパル分離
          - LogFilter で facilityId:user 合成を廃止し、認証済み principal の facilityId を唯一の信頼源とする。
          - ヘッダ由来の facilityId は監査 details に情報タグとして保持。
          - 完了条件: ヘッダ改ざんで principal が変わらないことをテストで確認。
        dependency:
          - src/server_modernized_60117/01_security/ログフィルタヘッダ認証撤去.md
        agent: claude code
        api: []
        priority: High
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T12:00:00.000Z
          days: 0.3
      TouchAuth統一.md:
        content: |-
          # TouchAuthHandler の認証統一
          - TouchAuthHandler のヘッダ依存を廃止し、標準認証/トークン方式に統一。
          - 既存の touch API ルートのガードとエラーメッセージを整理。
          - 完了条件: 旧ヘッダ未送信でも認証フローが成立し、回帰テストを通過。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: cursor cli
        api: []
        priority: High
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T13:00:00.000Z
          days: 0.4
    02_exposure_control:
      DemoAPI遮断と資格情報外部化.md:
        content: |-
          # Demo API の本番遮断と資格情報外部化
          - web.xml から /demo リソース登録を本番ビルドで除外する条件分岐を追加。
          - DemoResourceAsp のハードコード ID/パスワードを設定ファイル化または削除。
          - 完了条件: 本番プロファイルで /demo が 404/未登録となり、開発プロファイルでのみ有効。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: codex
        api: []
        priority: High
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T02:00:00.000Z
          days: 0.5
      Stubエンドポイント公開範囲整理.md:
        content: |-
          # Stub/未検証エンドポイントの公開範囲整理
          - OrcaMedicalAdministrationResource / OrcaPatientResource / PatientModV2OutpatientResource など stub/未検証経路を本番で非公開にする。
          - 代替: REAL 実装 or feature flag で明示無効化。
          - 完了条件: 本番デプロイで stub 応答が露出しないことを IT 環境で確認。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: gemini cli
        api: []
        priority: Medium
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T02:00:00.000Z
          days: 0.5
    03_runid:
      固定RUN_ID撤去とヘッダー優先化.md:
        content: |-
          # RUN_ID の固定値撤去とヘッダー優先化
          - AbstractOrcaRestResource / OrcaApiProxySupport の固定 RUN_ID を廃止。
          - X-Run-Id 優先 + 無指定時は UTC 発番に統一し、監査 details に反映。
          - 完了条件: クライアント runId がレスポンスと JMS 監査に保持されることを確認。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: codex
        api: []
        priority: High
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T03:00:00.000Z
          days: 0.5
    04_resilience:
      日付フォーマッタ刷新とKarteNullセーフ.md:
        content: |-
          # 日付フォーマッタ刷新と Karte null セーフ
          - SimpleDateFormat の static 共有を DateTimeFormatter へ置換。
          - Karte 未生成時の null チェックを追加し、適切な 404/Api_Result を返す。
          - 完了条件: 高負荷テストで日付フォーマットが破損せず、null ケースで 5xx が発生しない。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: cursor cli
        api: []
        priority: Medium
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T04:00:00.000Z
          days: 0.5
      予約レンジ制限とTransportキャッシュ.md:
        content: |-
          # 予約レンジ制限と ORCA Transport キャッシュ
          - OrcaWrapperService の予約/受付レンジに上限を設定し、広範リクエストを抑制。
          - RestOrcaTransport の設定を起動時キャッシュし、明示リロード手段を追加。
          - 完了条件: 広範レンジでの性能劣化が再現しないことを負荷テストで確認。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: codex
        api: []
        priority: Medium
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T04:30:00.000Z
          days: 0.5
    05_logging_privacy:
      ORCAレスポンスマスキング強化.md:
        content: |-
          # ORCA レスポンスマスキング強化
          - OrcaHttpClient のログ出力から PHI をマスクし、数字以外のメッセージを安全に記録/抑制。
          - 監査/デバッグログの粒度を設定化し、本番では最小限に。
          - 完了条件: 本番ログに個人情報が出力されないことをサンプルレスポンスで確認。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: claude code
        api: []
        priority: Medium
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T05:00:00.000Z
          days: 0.4
      ヘッダ資格情報キャッシュTTL追加.md:
        content: |-
          # ヘッダ資格情報キャッシュの TTL 追加
          - UserCache の資格情報キャッシュに TTL と手動クリア API を追加。
          - パスワードローテーション時に古いキャッシュが残らないことを確認。
          - 完了条件: TTL 超過で再認証が走り、キャッシュクリア操作が動作。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: gemini cli
        api: []
        priority: Low
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T06:00:00.000Z
          days: 0.25
    06_subjectives:
      Subjectives既定値REAL化.md:
        content: |-
          # Subjectives 既定値を REAL に変更
          - OrcaPostFeatureFlags の既定値を stub→REAL へ変更し、設定必須を明示。
          - 本番/開発プロファイルでのデフォルト挙動を README に追記。
          - 完了条件: 本番プロファイルで Subjectives が stub 返却にならない。
        dependency:
          - src/server_modernized_60117/00_context/00_RUN_IDと前提確認.md
        agent: codex
        api: []
        priority: Low
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T06:30:00.000Z
          days: 0.2
    07_webclient:
      Webクライアント適合修正.md:
        content: |-
          # Webクライアント適合修正
          - サーバー側の認証/公開制御変更に伴い、Webクライアントがヘッダ認証や /demo・stub エンドポイントに依存していないか確認し、必要なら標準認証＋正規エンドポイントへ切り替える。
          - runId 透過、recordsReturned 参照、dataSourceTransition=server 前提の UI が成立することを再確認。
          - 開発プロファイルでのみ必要なデバッグ導線（旧ヘッダ認証依存）が残る場合は feature flag か mock へ切替。
          - 完了条件: 現行モダナイズ版 Web クライアントのビルド・主要画面（受付/患者/Charts/Administration）の簡易動作確認でエラーが出ない。
        dependency:
          - src/server_modernized_60117/01_security/ログフィルタヘッダ認証撤去.md
          - src/server_modernized_60117/01_security/施設IDプリンシパル分離.md
          - src/server_modernized_60117/01_security/TouchAuth統一.md
          - src/server_modernized_60117/02_exposure_control/DemoAPI遮断と資格情報外部化.md
          - src/server_modernized_60117/02_exposure_control/Stubエンドポイント公開範囲整理.md
          - src/server_modernized_60117/03_runid/固定RUN_ID撤去とヘッダー優先化.md
          - src/server_modernized_60117/06_subjectives/Subjectives既定値REAL化.md
        agent: codex
        api: []
        priority: Medium
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-18T07:00:00.000Z
          days: 0.3
    08_validation:
      統合稼働テストと証跡集約.md:
        content: |-
          # 統合稼働テスト（一括）
          - すべての改修後に server-modernized を起動し、認証/予約/subjectives/ログ出力を通しで確認。
          - ORCA Trial への疎通を最小ケースで実行し、artifacts/<RUN_ID>/ に証跡保存。
          - 完了条件: 全テストが 0 エラー、証跡が揃い docs/server-modernization/server-modernized-code-review-20260117.md の未解消項目が閉じられる。
        dependency:
          - src/server_modernized_60117/01_security/ログフィルタヘッダ認証撤去.md
          - src/server_modernized_60117/01_security/施設IDプリンシパル分離.md
          - src/server_modernized_60117/01_security/TouchAuth統一.md
          - src/server_modernized_60117/02_exposure_control/DemoAPI遮断と資格情報外部化.md
          - src/server_modernized_60117/02_exposure_control/Stubエンドポイント公開範囲整理.md
          - src/server_modernized_60117/03_runid/固定RUN_ID撤去とヘッダー優先化.md
          - src/server_modernized_60117/04_resilience/日付フォーマッタ刷新とKarteNullセーフ.md
          - src/server_modernized_60117/04_resilience/予約レンジ制限とTransportキャッシュ.md
          - src/server_modernized_60117/05_logging_privacy/ORCAレスポンスマスキング強化.md
          - src/server_modernized_60117/05_logging_privacy/ヘッダ資格情報キャッシュTTL追加.md
          - src/server_modernized_60117/06_subjectives/Subjectives既定値REAL化.md
          - src/server_modernized_60117/07_webclient/Webクライアント適合修正.md
        agent: codex
        api:
          - OpenDolphin Modernized API
          - ORCA Trial API
        priority: High
        status: not_started
        progress: 0
        schedule:
          start: 2026-01-19T03:00:00.000Z
          days: 0.75
