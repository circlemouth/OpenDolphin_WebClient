# 旧来型画面構成の棚卸し（RUN_ID: 20260106T064741Z）

## 参照元
- `client/src/main/java/open/dolphin/client/resources/MacMenuFactory_ja.properties`
- `client/src/main/java/open/dolphin/client/resources/WindowsMenuFactory_ja.properties`
- `client/src/main/java/open/dolphin/client/MacMenuFactory.java`
- `client/src/main/java/open/dolphin/client/WindowsMenuFactory.java`
- `client/src/main/java/open/dolphin/client/GUIConst.java`
- `client/src/main/java/open/dolphin/client/Dolphin.java`
- `client/src/main/java/META-INF/plugins/open.dolphin.client.MainComponent`
- `client/src/main/java/open/dolphin/impl/pvt/resources/WatingListImpl_ja.properties`
- `client/src/main/java/open/dolphin/impl/psearch/resources/PatientSearchImpl_ja.properties`
- `client/src/main/java/open/dolphin/impl/schedule/resources/PatientScheduleImpl_ja.properties`
- `client/src/main/java/open/dolphin/impl/labrcv/resources/NLaboTestImporter_ja.properties`
- `client/src/main/java/open/dolphin/stampbox/resources/StampBoxPlugin_ja.properties`
- `client/src/main/java/open/dolphin/client/resources/ChartImpl_ja.properties`
- `client/src/main/java/open/dolphin/client/resources/KarteDocumentViewer_ja.properties`
- `client/src/main/java/open/dolphin/client/resources/ImageBox_ja.properties`
- `client/src/main/java/open/dolphin/client/resources/NewKarteDialog_ja.properties`

## 前提
- 旧来クライアント（Swing）のメニュー/タブ/導線をコードから抽出して整理。
- 利用頻度は画面用途からの推定（高/中/低/不明）。
- 導線は「メニュー/タブ/右クリック/ツールバー/ダイアログ」を明記。

## 旧来メニュー/ツールバー導線（画面/機能別）
| 画面名 | 機能 | 導線 | 権限 | 利用頻度 | 備考 |
| --- | --- | --- | --- | --- | --- |
| メニュー: ファイル>新規カルテ | 新規カルテ作成 | メニュー/ツールバー | isReadOnly では編集不可 | 高 | 旧来カルテ編集の起点 |
| メニュー: ファイル>新規文書 | 文書作成 | メニュー/ツールバー | isReadOnly では編集不可 | 中 | 紹介状等 |
| メニュー: ファイル>開く | カルテ/文書を開く | メニュー | 不明 | 高 | 受付/患者検索からの起動もあり |
| メニュー: ファイル>閉じる | カルテ/文書を閉じる | メニュー | 不明 | 高 | 編集中のウィンドウ対象 |
| メニュー: ファイル>保存 | カルテ/文書保存 | メニュー/ツールバー | isReadOnly では編集不可 | 高 |  |
| メニュー: ファイル>削除 | カルテ/文書削除 | メニュー | 不明 | 中 | `delete.karte.enable` 設定依存 |
| メニュー: ファイル>ページ設定 | 印刷設定 | メニュー | othercare では無効化 | 低 |  |
| メニュー: ファイル>プリント | 印刷 | メニュー/ツールバー | 不明 | 低 |  |
| メニュー: ファイル>終了 | アプリ終了 | メニュー | 全ユーザー | 低 |  |
| メニュー: 編集>修正 | 過去カルテ修正 | メニュー/ツールバー | isReadOnly では編集不可 | 中 |  |
| メニュー: 編集>取り消し/やり直し | Undo/Redo | メニュー/ツールバー | isReadOnly では編集不可 | 中 |  |
| メニュー: 編集>カット/コピー/ペースト | テキスト/スタンプ/画像操作 | メニュー/ツールバー | isReadOnly では編集不可 | 中 |  |
| メニュー: カルテ>処方日数変更 | 処方日数一括変更 | メニュー | 不明 | 中 |  |
| メニュー: カルテ>CLAIM送信 | ORCA/CLAIM送信 | メニュー | canAccessToOrca など条件あり（詳細不明） | 中 |  |
| メニュー: カルテ>相互作用チェック | 併用禁忌チェック | メニュー | 不明 | 低 |  |
| メニュー: カルテ>昇順/降順/修正履歴 | 文書履歴の並び替え/履歴表示 | メニュー | 不明 | 低 |  |
| メニュー: カルテ>環境設定 | カルテ/動作環境設定 | メニュー | 全ユーザー | 低 |  |
| メニュー: カルテ>処方箋印刷 | 処方箋出力 | メニュー | 不明 | 低 | メニュー項目コメントアウトのため起動不可 |
| メニュー: 挿入>傷病名/テキスト/シェーマ/添付/スタンプ | カルテ挿入 | メニュー | isReadOnly では編集不可 | 高 |  |
| メニュー: テキスト>サイズ/スタイル/揃え/色 | SOAPテキスト書式 | メニュー | isReadOnly では編集不可 | 中 |  |
| メニュー: ツール>新患登録 | 患者新規登録 | メニュー | 全ユーザー | 中 |  |
| メニュー: ツール>スタンプボックス | スタンプ箱表示 | メニュー | othercare では非表示 | 高 |  |
| メニュー: ツール>シェーマボックス | シェーマ箱表示 | メニュー | 全ユーザー | 中 |  |
| メニュー: ツール>プロフィール変更 | パスワード変更 | メニュー | 全ユーザー | 低 |  |
| メニュー: ツール>施設情報編集 | 施設情報編集 | メニュー | admin のみ | 低 |  |
| メニュー: ツール>院内ユーザー登録 | ユーザー追加/管理 | メニュー | admin のみ | 低 |  |
| メニュー: ツール>統計情報 | 活動統計表示 | メニュー | 全ユーザー | 低 |  |
| メニュー: ツール>医療機関コード読込 | 施設コード取得 | メニュー | canSearchMaster で有効 | 低 |  |
| メニュー: ツール>受付バーコード | 受付バーコード | メニュー | 不明 | 低 | メニュー項目コメントアウトのため起動不可 |
| メニュー: ツール>一括カルテPDF | 全患者PDF出力 | メニュー | 不明 | 低 |  |
| メニュー: ヘルプ>ドルフィン/オルカ/CLAIM規格 | 外部サイト表示 | メニュー | 全ユーザー | 低 |  |
| メニュー: 情報>稼働確認/情報 | 稼働確認・バージョン表示 | メニュー | 全ユーザー | 低 |  |
| ツールバー: 新規カルテ/新規文書 | カルテ/文書作成 | ツールバー | isReadOnly では編集不可 | 高 | Mac/Windows 共通 |
| ツールバー: 保存/印刷 | 保存/印刷 | ツールバー | 不明 | 中 | Mac/Windows 共通 |
| ツールバー: 修正/Undo/Redo | 修正/取り消し/やり直し | ツールバー | isReadOnly では編集不可 | 中 | Mac/Windows 共通 |
| ツールバー: カット/コピー/ペースト | 編集操作 | ツールバー | isReadOnly では編集不可 | 中 | Mac/Windows 共通 |

## 旧来メイン画面（タブ）一覧
| 画面名 | 機能 | 導線 | 権限 | 利用頻度 | 備考 |
| --- | --- | --- | --- | --- | --- |
| メインウィンドウ | タブ/メニュー集約、ログイン状態の中心画面 | ログイン後自動表示 | 全ユーザー | 高 |  |
| 受付リスト | 来院患者の受付管理・カルテ起動 | メインタブ（index=0） | othercare では非表示 | 高 | 右クリックで「カルテを開く/受付削除/コピー/キャンセル取消」など |
| 患者検索 | 患者検索・カルテ起動 | メインタブ | 全ユーザー | 高 | 右クリックで「カルテを開く/受付登録/コピー/年齢表示」 |
| 予定患者 | 予定患者（予定カルテ）管理 | メインタブ | `Project.USE_SCHEDULE_KARTE` かつ othercare では非表示 | 中 |  |
| ラボレシーバ | ラボ結果ファイル取り込み | メインタブ | othercare では非表示 | 低 |  |

## 旧来サブ画面/ダイアログ一覧
| 画面名 | 機能 | 導線 | 権限 | 利用頻度 | 備考 |
| --- | --- | --- | --- | --- | --- |
| ログイン | 認証/施設選択 | 起動時 | 全ユーザー | 高 |  |
| カルテ画面（編集） | 患者カルテ閲覧・編集 | 受付/患者検索/ファイル>開く/新規カルテ | isReadOnly では編集不可 | 高 | ツールバーにテキスト/シェーマ/スタンプ/保険選択の導線あり |
| カルテ参照ビュー | 参照専用ビュー/更新タブ | カルテ画面内タブ | 不明 | 中 | KarteDocumentViewer の tabTitle=更新 |
| 文書エディタ | 紹介状等の文書作成 | ファイル>新規文書 | isReadOnly では編集不可 | 中 |  |
| 新規カルテダイアログ | 新規カルテ作成方法の選択 | ファイル>新規カルテ | isReadOnly では編集不可 | 中 | 「全てコピー/前回処方適用/空白」「タブ追加/別ウィンドウ」 |
| カルテ削除ダイアログ | 文書削除理由選択 | メニュー: ファイル>削除 | 不明 | 低 | 参照ビューの削除理由選択 |
| カルテ印刷ダイアログ | 印刷/PDF作成 | メニュー: ファイル>プリント | 不明 | 低 | 参照ビューの印刷確認 |
| 新患登録 | 患者の新規登録 | メニュー: ツール>新患登録 | 全ユーザー | 中 |  |
| スタンプ箱 | スタンプ管理・挿入 | メニュー: ツール>スタンプボックス | othercare では非表示 | 高 |  |
| シェーマボックス | シェーマ管理・挿入 | メニュー: ツール>シェーマボックス | 全ユーザー | 中 | 画像ボックスの表示名は「シェーマボックス」 |
| パスワード変更 | ユーザーパスワード変更 | メニュー: ツール>プロフィール変更 | 全ユーザー | 低 |  |
| 施設情報編集 | 施設情報の編集 | メニュー: ツール>施設情報編集 | admin のみ | 低 |  |
| 院内ユーザー登録 | ユーザー追加/管理 | メニュー: ツール>院内ユーザー登録 | admin のみ | 低 |  |
| 統計情報 | 活動統計の表示 | メニュー: ツール>統計情報 | 全ユーザー | 低 |  |
| 医療機関コード読込 | 施設コード取得/表示 | メニュー: ツール>医療機関コード読込 | canSearchMaster で有効 | 低 |  |
| 受付バーコード | 受付バーコード入力 | メニュー: ツール>受付バーコード | 不明 | 低 | メニュー項目コメントアウトのため起動不可 |
| 一括カルテPDF | 全患者カルテPDF出力 | メニュー: ツール>一括カルテPDF | 不明 | 低 |  |
| 稼働確認 | PVT/CLAIMなど稼働状況の確認 | メニュー: 情報>稼働確認 | 全ユーザー | 低 |  |
| バージョン情報 | OpenDolphin情報表示 | メニュー: 情報>情報 | 全ユーザー | 低 |  |
| 患者検索 日付入力 | 検索条件の日付入力 | 右クリック（テキストフィールド） | 全ユーザー | 低 | カレンダーポップアップ表示 |

## 権限・表示条件まとめ
- admin のみ: 施設情報編集、院内ユーザー登録。
- othercare: 受付リスト/予定患者/ラボレシーバ非表示、スタンプ箱非表示、ページ設定無効化。
- canSearchMaster: 医療機関コード読込のみ有効化。
- isReadOnly: カルテ/文書編集操作全般で制限される前提（編集系メニュー/ツールバー）。

## 導線メモ
- メイン導線は「受付リスト/患者検索」→「カルテ画面」。
- 右クリック導線は受付リスト/患者検索に集中（カルテ起動、受付登録/削除、表示切替）。
- 一部機能はメニュー項目がコメントアウトされ、起動不可（処方箋印刷、受付バーコード）。
