# 旧来型画面構成の棚卸し（RUN_ID: 20260106T052435Z）

## 参照元
- `client/src/main/java/open/dolphin/client/resources/MacMenuFactory_ja.properties`
- `client/src/main/java/open/dolphin/client/resources/WindowsMenuFactory_ja.properties`
- `client/src/main/java/open/dolphin/client/GUIConst.java`
- `client/src/main/java/open/dolphin/client/Dolphin.java`
- `client/src/main/java/META-INF/plugins/open.dolphin.client.MainComponent`
- `client/src/main/java/open/dolphin/impl/pvt/resources/WatingListImpl_ja.properties`
- `client/src/main/java/open/dolphin/impl/psearch/resources/PatientSearchImpl_ja.properties`
- `client/src/main/java/open/dolphin/impl/schedule/resources/PatientScheduleImpl_ja.properties`
- `client/src/main/java/open/dolphin/impl/labrcv/resources/NLaboTestImporter_ja.properties`
- `client/src/main/java/open/dolphin/stampbox/resources/StampBoxPlugin_ja.properties`

## 前提
- 旧来クライアント（Swing）のメニュー/タブ/導線をコードから抽出して整理。
- 利用頻度は画面用途からの推定（高/中/低/不明）として記録。

## 旧来メニュー構成（トップレベル）
| メニュー | 項目 | 画面/機能 | 権限/条件 | 利用頻度(推定) |
| --- | --- | --- | --- | --- |
| ファイル | 新規カルテ | 新規カルテ作成ダイアログ→カルテ画面 | 医師ライセンス(編集権限) | 高 |
| ファイル | 新規文書 | 文書作成ダイアログ→文書エディタ | 医師ライセンス(編集権限) | 中 |
| ファイル | 開く | 患者カルテ/文書を開く | 受付/患者検索からのオープン | 高 |
| ファイル | 保存/削除/閉じる | カルテ/文書の保存・削除・終了 | 編集中カルテのみ | 高 |
| ファイル | ページ設定/プリント | 印刷設定/印刷 | othercare では無効化 | 低 |
| ファイル | 終了 | アプリ終了 | 全ユーザー | 低 |
| 編集 | 修正 | 過去カルテ修正モード | 医師ライセンス(編集権限) | 中 |
| 編集 | 取り消し/やり直し | 編集操作の Undo/Redo | 編集中のみ | 中 |
| 編集 | カット/コピー/ペースト | テキスト・スタンプ・画像操作 | 編集中のみ | 中 |
| カルテ | 処方日数変更 | 処方日数の一括変更 | カルテ編集中 | 中 |
| カルテ | 処方せん出力 | 処方箋出力 | カルテ編集中 | 中 |
| カルテ | CLAIM送信 | ORCA/CLAIM 送信 | ORCA接続可 | 中 |
| カルテ | 相互作用チェック | 薬剤相互作用チェック | カルテ編集中 | 低 |
| カルテ | 昇順/降順/修正履歴表示 | 文書履歴の並び替え/履歴表示 | 文書ビュー | 低 |
| カルテ | 環境設定 | カルテ/動作環境設定 | 全ユーザー | 低 |
| 挿入 | 傷病名/テキスト/シェーマ/添付/スタンプ | カルテへの挿入 | 編集中カルテのみ | 高 |
| テキスト | サイズ/スタイル/揃え/色 | SOAPテキスト書式 | 編集中テキストのみ | 中 |
| ツール | 新患登録 | 新患登録画面 | 全ユーザー | 中 |
| ツール | スタンプボックス | スタンプ箱ウィンドウ | othercare では非表示 | 高 |
| ツール | シェーマボックス | シェーマ箱ウィンドウ | 全ユーザー | 中 |
| ツール | プロフィール変更 | パスワード変更 | 全ユーザー | 低 |
| ツール | 施設情報編集 | 施設情報編集 | 管理者(ROLE_ADMIN)のみ | 低 |
| ツール | 院内ユーザー登録 | ユーザー登録 | 管理者(ROLE_ADMIN)のみ | 低 |
| ツール | 統計情報 | 活動統計ダイアログ | 全ユーザー | 低 |
| ツール | 医療機関コード読込 | 施設コード取得 | canSearchMaster で有効 | 低 |
| ツール | 受付バーコード | 受付バーコード処理 | 導入施設のみ | 低 |
| ツール | 一括カルテPDF | 全患者カルテPDF出力 | 管理運用向け | 低 |
| ヘルプ | ドルフィン/オルカ/CLAIM規格 | 外部サイト表示 | 全ユーザー | 低 |
| 情報 | 稼働確認/情報 | 稼働状態確認・バージョン情報 | 全ユーザー | 低 |

## 旧来メイン画面（タブ）一覧
| 画面名 | 目的/機能 | 導線 | 権限/条件 | 利用頻度(推定) |
| --- | --- | --- | --- | --- |
| メインウィンドウ | タブ/メニュー集約、ログイン状態の中心画面 | ログイン後に表示 | 全ユーザー | 高 |
| 受付リスト | 来院患者の受付管理・カルテ起動 | メインタブ（index=0） | othercare では非表示 | 高 |
| 患者検索 | 患者検索・カルテ起動 | メインタブ | 全ユーザー | 高 |
| 予定患者 | 予定患者（予定カルテ）管理 | メインタブ | 設定(Project.USE_SCHEDULE_KARTE) + othercare では非表示 | 中 |
| ラボレシーバ | ラボ結果ファイル取り込み | メインタブ | othercare では非表示 | 低 |

## 旧来サブ画面/ダイアログ一覧
| 画面名 | 目的/機能 | 導線 | 権限/条件 | 利用頻度(推定) |
| --- | --- | --- | --- | --- |
| ログイン | 認証/施設選択 | アプリ起動時 | 全ユーザー | 高 |
| カルテ画面 | 患者カルテ閲覧・編集 | 受付/患者検索/ファイル→開く/新規 | 医師ライセンスで編集可 | 高 |
| 文書エディタ | 紹介状等の文書作成 | ファイル→新規文書 | 医師ライセンスで編集可 | 中 |
| 新患登録 | 患者の新規登録 | ツール→新患登録 | 全ユーザー | 中 |
| スタンプ箱 | スタンプ管理・挿入 | ツール→スタンプボックス | othercare では非表示 | 高 |
| シェーマボックス | シェーマ管理・挿入 | ツール→シェーマボックス | 全ユーザー | 中 |
| パスワード変更 | ユーザーパスワード変更 | ツール→プロフィール変更 | 全ユーザー | 低 |
| 施設情報編集 | 施設情報の編集 | ツール→施設情報編集 | 管理者(ROLE_ADMIN)のみ | 低 |
| 院内ユーザー登録 | ユーザー追加/管理 | ツール→院内ユーザー登録 | 管理者(ROLE_ADMIN)のみ | 低 |
| 統計情報 | 活動統計の表示 | ツール→統計情報 | 全ユーザー | 低 |
| 医療機関コード読込 | 施設コード取得/表示 | ツール→医療機関コード読込 | canSearchMaster で有効 | 低 |
| 受付バーコード | 受付バーコード入力 | ツール→受付バーコード | 導入施設のみ | 低 |
| 一括カルテPDF | 全患者カルテPDF出力 | ツール→一括カルテPDF出力 | 管理運用向け | 低 |
| 稼働確認 | PVT/CLAIMなど稼働状況の確認 | 情報→稼働確認 | 全ユーザー | 低 |
| バージョン情報 | OpenDolphin情報表示 | 情報→情報 | 全ユーザー | 低 |

## 権限・表示条件まとめ
- 管理者(ROLE_ADMIN)のみ: 施設情報編集、院内ユーザー登録。
- othercare 権限: 受付リスト/予定患者/ラボレシーバ非表示、スタンプ箱非表示、ページ設定無効化。
- canSearchMaster: 医療機関コード読込のみ有効化。
- 医師ライセンス以外(isReadOnly): カルテ編集操作は制限される前提。

## 導線メモ
- メイン導線は「受付リスト/患者検索」→「カルテ画面」。
- カルテ編集の挿入・書式機能はメニュー（挿入/テキスト）とツールボタン経由で利用。
- スタンプ箱/シェーマ箱は別ウィンドウとして常時参照し、カルテ編集から挿入する運用が前提。
