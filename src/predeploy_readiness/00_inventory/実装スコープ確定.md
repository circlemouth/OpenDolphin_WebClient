# 実装スコープ確定（predeploy readiness）

- RUN_ID: `20251220T105730Z`
- 期間: 2025-12-22 09:00 - 2025-12-23 09:00 (JST)
- 優先度: high / 緊急度: high
- YAML ID: `src/predeploy_readiness/00_inventory/実装スコープ確定.md`

## 目的
- ギャップ台帳から「最終デプロイ前テスト」を除外し、実装対象の範囲を確定する。
- 依存関係とリスクを整理し、実装順序を固定する。
- 実装対象外（最終デプロイ前テスト）を明示する。

## 参照ソース（現行タスクの根拠）
- `docs/DEVELOPMENT_STATUS.md`
- `src/predeploy_readiness/00_inventory/API・機能ギャップ台帳作成.md`

---

## 1. 実装対象（最終デプロイ前テスト除外）

### 1-1. 未実装（着手必須）
- ORCA Master: ORCA-01/02/05/06/07/08（REST/DB/DataSource/DTO/監査）
- 監査/JMS: AUD-02, JKT-03
- カルテ/添付: KRT-01/02/03/04
- Jakarta/認証: JKT-01/02/04/05/06
- Web/API: WEB-API-01/02/03

### 1-2. 部分実装（追加対応）
- Jakarta: JKT-07/08
- 監査/JMS: MSG-01（ACK 実装の実運用前安定化）
- 外部 API: EXT-01/02/03
- Web/API: WEB-API-04/05

### 1-3. 証跡未取得（実装はあるが証跡不足）
- ORCA-API-01/02/03/04
- JMS-ACK-01

---

## 2. 実装対象外（最終デプロイ前テスト）
- Stage/Preview 環境での再検証（`VITE_DISABLE_MSW=1` + `VITE_DEV_PROXY_TARGET` + Playwright/curl）
- 最終デプロイ前テストとしての E2E / 本番想定リハーサル
- 「最終デプロイ前テスト」に該当する検証結果の証跡取得

---

## 3. 依存関係（実装順序固定）

### 3-1. 実装順序（固定）
1. ORCA Master
2. 監査・JMS
3. 外部 API
4. Jakarta 設定
5. カルテ/添付（Jakarta 設定完了後）
6. Web クライアント側 UI/監査連携（対象 API 実装 + 200 証跡取得後）

### 3-2. 依存マッピング（抜粋）
- ORCA Master → 外部 API / Web/API / Reception/Charts/Patients
- 監査・JMS → 全 API / UI 監査連携
- Jakarta/認証 → 全 API / 運用設定

---

## 4. リスク整理（実装順に影響するもののみ）
- 認証移行（JKT-04/05/06）が遅延すると、全 API の実運用前テストへ波及する。
- ORCA Master の DataSource 化（ORCA-07）が遅延すると、ORCA Master/外部 API の安定性が低下する。
- 監査/JMS の ACK 証跡不足（MSG-01/JMS-ACK-01）は、Web クライアントの監査 UI 判定に影響する。

---

## 5. 実装順序の固定ルール（再掲）
- 実装順は **ORCA Master → 監査・JMS → 外部 API → Jakarta 設定** を最優先とする。
- カルテ/添付と Ops/Security は Jakarta 設定完了後に着手する。
- Web クライアント側の UI/監査連携は、対象 API のサーバ実装完了 + 200 証跡取得後に着手する。

