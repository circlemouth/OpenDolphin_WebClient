# 性能回帰/ロードテスト
- 期間: 2026-01-12 09:00 - 2026-01-14 09:00 / 優先度: low / 緊急度: low
- YAML ID: `src/server_modernized_gap_20251221/07_quality_release/性能回帰_ロードテスト.md`

## 目的
- ORCA-08/PHR/Touch の P99 とメモリ監視を行い、基準を検証する。

## 参照
- `src/server_modernized_gap_20251221/02_orca08_etensu/ORCA-08_E2E_証跡.md`
- `src/server_modernized_gap_20251221/03_phr/PHR_E2E_証跡.md`
- `docs/DEVELOPMENT_STATUS.md`

## 実施手順（準備）
1. 対象 API（ORCA-08/PHR/Touch）と測定条件（P99/メモリ/キャッシュ）を決定。
2. 計測対象の環境変数/設定値を整理し、RUN_ID を付与。
3. ロードテストの実行コマンドと計測対象ログの保存先を確定。

## コードレビュー（対象APIの根拠）
- ORCA-08: `server-modernized/src/main/java/open/orca/rest/OrcaMasterResource.java` の `/orca/tensu/etensu`
  - `buildEtensuPerformanceHeaders()` がパフォーマンスヘッダを付与。
  - `recordMasterAudit()` が 200/304/404/422/503 を監査記録。
- PHR: `server-modernized/src/main/java/open/dolphin/adm20/rest/PHRResource.java`
  - `requireTraceHeader()` / `requireFacilityHeader()` で 400/403 系の挙動が監査対象。
- Touch: `server-modernized/src/main/java/open/dolphin/touch/TouchAuthHandler.java`
  - 必須ヘッダー欠落時の 400/401/403 を監査に記録（`TouchFailureAuditLogger`）。

## Evidence 記録（取得物の保存先）
- ロードテスト結果:
  - `artifacts/perf/<RUN_ID>/loadtest/`
- サーバーメトリクス:
  - `artifacts/perf/<RUN_ID>/metrics/`
- 監査ログ:
  - `artifacts/perf/<RUN_ID>/audit/`

## 実装状況
- 未着手（実測前の準備項目のみ追記）。
