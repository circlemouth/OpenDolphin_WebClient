# 22 スペーシングとカード規約定義

- RUN_ID: `20260111T004220Z`
- 期間: 2026-01-11 19:00 〜 2026-01-12 19:00 (JST) / 優先度: medium / 緊急度: high / エージェント: codex
- YAML ID: `src/webclient_charts_compact_layout_plan_20260111/design/22_スペーシングとカード規約定義.md`

## 参照
- `docs/DEVELOPMENT_STATUS.md`
- `src/webclient_charts_compact_layout_plan_20260111/discovery/10_現状UI棚卸し.md`
- `docs/web-client/ux/charts-compact-layout-proposal-20260110.md`

---

## 1. スペーシング変数（--charts-space-*）の定義

### 1-1. スケール
| トークン | 値 | 用途（代表） |
| --- | --- | --- |
| `--charts-space-2xs` | 4px | アイコン間隔、細かいラベルの内側 |
| `--charts-space-xs` | 6px | バッジ/チップ間隔、ヘッダ行内余白 |
| `--charts-space-sm` | 10px | コンパクトカードの内側、密度高いリスト |
| `--charts-space-md` | 14px | 標準カードの内側、段落間隔 |
| `--charts-space-lg` | 18px | セクション間の区切り、カード内ブロック間隔 |
| `--charts-space-xl` | 24px | カラム間の大きい余白、外枠のゆとり |
| `--charts-space-2xl` | 32px | 主要ブロック間の強い分離 |

### 1-2. 使い分けルール（要点）
- **カード内パディングは `sm` or `md` に統一**し、`lg` 以上はカード外の分離に使う。
- **連続情報の行間は `xs`〜`sm`**、ラベル + 値の密集表示でも読みやすさを維持。
- `md` は標準、`sm` は密度重視、`lg` は段落やブロックの区切り用途とする。

---

## 2. 角丸・影トークンの定義

### 2-1. 角丸（Radius）
| トークン | 値 | 主な用途 |
| --- | --- | --- |
| `--charts-radius-sm` | 10px | 小型カード、バッジ、内側パネル |
| `--charts-radius-md` | 14px | 標準カード（`.charts-card`） |
| `--charts-radius-lg` | 18px | 強調パネル、ドロワー等 |

- **標準カードは `md` を既定**とし、従来の大きな角丸は使用しない。

### 2-2. 影（Shadow）
| トークン | 値 | 主な用途 |
| --- | --- | --- |
| `--charts-shadow-none` | none | タイムライン等の一体化セクション |
| `--charts-shadow-1` | `0 8px 18px rgba(15, 23, 42, 0.08)` | 標準カード（既定） |
| `--charts-shadow-2` | `0 12px 28px rgba(15, 23, 42, 0.12)` | ドロワー/アクション領域 |

- **影は「浅く・細く」**を原則とし、情報密度を損なう厚い影は避ける。

---

## 3. カード適用範囲の整理

### 3-1. `.charts-card`（Charts 画面の共通カード）
- **適用範囲**: Charts 画面の主要パネルを包む外枠（上段/左/中央/右の各カード）。
- **既定スタイル**
  - padding: `--charts-space-md`
  - gap（内部ブロック間）: `--charts-space-sm`〜`--charts-space-md`
  - radius: `--charts-radius-md`
  - shadow: `--charts-shadow-1`
- **例**: `charts-patient-header` / `charts-clinical-bar` / `charts-safety-display` / `charts-soap-note` / `charts-document-timeline` / `charts-orca-summary`

### 3-2. `.patients-tab__card`（Patients タブ内カード）
- **適用範囲**: 患者履歴や受付切替の小カード群。
- **扱い**: `.charts-card` の **密度高めサブカード** と位置付ける。
- **既定スタイル**
  - padding: `--charts-space-sm`
  - radius: `--charts-radius-sm`
  - shadow: `--charts-shadow-1`（リストの連続性を保ちたい場合は `--charts-shadow-none` でも可）
- **ルール**: `.patients-tab__card` は独自トークンを持たず、**`--charts-space-*` を共通利用**する。

### 3-3. `.document-timeline`（タイムライン本体）
- **適用範囲**: DocumentTimeline コンポーネントの本体ラッパ。
- **扱い**: 画面の中心的な情報密度が高い領域のため、**枠は軽く**。
- **既定スタイル**
  - 外枠: `.charts-card` が包む
  - 内部セクションの余白: `--charts-space-sm`〜`--charts-space-md`
  - shadow: `--charts-shadow-none`（内側は影なし）
- **ルール**: `.document-timeline` 自身は **カードの外枠を持たない**。外枠は `.charts-card` に統一。

---

## 4. 余白/影/角丸の共通規約表

| 対象 | padding | gap | radius | shadow | 備考 |
| --- | --- | --- | --- | --- | --- |
| `.charts-card` | `--charts-space-md` | `--charts-space-sm`〜`md` | `--charts-radius-md` | `--charts-shadow-1` | Charts 画面の標準カード |
| `.charts-card--compact` | `--charts-space-sm` | `--charts-space-xs`〜`sm` | `--charts-radius-md` | `--charts-shadow-1` | 緊密表示用（必要時のみ） |
| `.patients-tab__card` | `--charts-space-sm` | `--charts-space-xs`〜`sm` | `--charts-radius-sm` | `--charts-shadow-1` or `none` | リスト連続性を優先 |
| `.document-timeline`（内部） | `--charts-space-sm` | `--charts-space-sm` | `--charts-radius-sm` | `--charts-shadow-none` | 外枠は `.charts-card` 側 |
| 右ドロワー/ユーティリティ | `--charts-space-md` | `--charts-space-sm` | `--charts-radius-lg` | `--charts-shadow-2` | 展開時の視認性優先 |

---

## 5. 適用方針メモ
- **カードの外枠は `.charts-card` に集約**し、内側コンポーネントの影や角丸を極力なくす。
- **情報密度が高い領域ほど影を抑え、余白を縮小**して視線移動を短くする。
- `.patients-tab__card` と `.document-timeline` は **独自ルールを増やさず**、`--charts-space-*` で統一管理する。

---

## 6. 未決事項
- `--charts-shadow-1` / `--charts-shadow-2` の最終トーンは、`ChartsPatientSummaryBar` と `DockedUtilityPanel` のモック確認後に微調整。
- `.charts-card--compact` の適用先（対象カードの候補）の決定。
