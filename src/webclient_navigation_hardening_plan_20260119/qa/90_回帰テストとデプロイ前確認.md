# 90_回帰テストとデプロイ前確認

- RUN_ID: 20260120T061247Z
- 期間: 2026-01-23 15:00 JST - 2026-01-24 15:00 JST
- ステータス: done
- 進捗: 1.0
- YAML ID: src/webclient_navigation_hardening_plan_20260119/qa/90_回帰テストとデプロイ前確認.md
- 参照ガント: docs/web-client/architecture/web-client-navigation-review-20260119.md

## 進捗メモ
- 担当者: codex
- 更新日: 2026-01-20
- 根拠: 403/401/419 回帰テスト追加、BroadcastChannel デバウンス結合テスト、Playwright 実行完了、VITE_BASE_PATH 自動検証スクリプト追加と実測完了。
- 次アクション: 追加なし。

## 目的
- ナビゲーション・セッション共有の回帰テストとデプロイ前確認（403/401/419、BroadcastChannel/StorageEvent、タブ間 auth/runId 共有、VITE_BASE_PATH 再配信）。

## Done 定義
- 403/401/419 の失効挙動が単体/結合テストでカバーされる。
- タブ間 auth/runId 共有と session-expired ブロードキャストが E2E で検証される。
- VITE_BASE_PATH=/foo/ 配信時の直接リロードで 404 が発生しないことを確認する。
- ドキュメントと UAT チェックリストが更新される。

## 実施ログ
- 2026-01-20 (RUN_ID=20260120T061247Z): `httpClient.test.ts` に理由マッピングテスト追加、`sessionExpiry.test.ts` に BroadcastChannel デバウンス結合テスト追加。Playwright シナリオ `tests/e2e/navigation-broadcast.spec.ts` を実装・実行し成功（RUN_ID=20260120T061247Z, port=4173, backend 未起動のため proxy ECONNREFUSED はログのみ）。サブパス検証スクリプト `web-client/scripts/verify-subpath-preview.mjs` を追加し、`VITE_BASE_PATH=/foo npm run test:subpath-preview` で `/foo/` と `/foo/f/0001/reception` の 200 を確認。ドキュメント反映済み。
