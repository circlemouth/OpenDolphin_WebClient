# 設計と手順書アップデート（module_json / server-modernized）

- RUN_ID: `20251214T082236Z`
- 期間: 2025-12-19 09:00 〜 2025-12-20 09:00 (JST) / 優先度: medium / 緊急度: medium / エージェント: cursor cli
- 親 RUN_ID: `20251214T022944Z`（module_json ガント起点）
- YAML ID: `src/docs/modernization/設計と手順書アップデート.md`

## 目的
- モダナイズ版サーバーにおける module_json の JSON 化仕様と開発手順を README / operations ハブへ反映し、Web クライアント側の計画書・棚卸しと同一 RUN_ID で同期する。
- 証跡ログのリンク先を整理し、module_json 依存ドキュメント（Flyway, Converter, KarteServiceBean 組み込み）の参照を一箇所に集約する。

## 参照チェーン
1. `AGENTS.md`
2. `docs/web-client/README.md`
3. `docs/server-modernization/phase2/INDEX.md`
4. `docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md`
5. `src/modernization/module_json/キックオフ_RUN_ID採番.md`
6. 本ドキュメント

## 作業範囲
- `docs/web-client/planning/phase2/DOC_STATUS.md` への RUN_ID 追記と Active 行の更新。
- `docs/web-client/README.md` 最新更新サマリの刷新（RUN_ID 差し替え、module_json ドキュメント反映）。
- `docs/server-modernization/phase2/README.md` へ module_json 開発手順リンクを追加。
- `docs/server-modernization/phase2/operations/MODULE_JSON_DEVELOPMENT.md` を新規作成し、JSON 化仕様（beanJson 優先・beanBytes フォールバック、polymorphic typing 設定、Flyway 要件）を整理。
- 証跡ログ（web-client/operations）の作成とリンク整備。

## 成果物一覧（予定）
- `docs/web-client/planning/phase2/DOC_STATUS.md`: RUN_ID=`20251214T082236Z` を追記し、module_json 参照チェーンを棚卸し。
- `docs/web-client/README.md`: 最新更新サマリを本 RUN に更新し、server-modernized 側の JSON 化手順への導線を追加。
- `docs/server-modernization/phase2/README.md`: Operations セクションへ module_json 開発手順のリンクを掲載。
- `docs/server-modernization/phase2/operations/MODULE_JSON_DEVELOPMENT.md`: module_json JSON 化仕様と検証ステップを集約した新規 Runbook。
- `docs/web-client/planning/phase2/logs/20251214T082236Z-module-json-docs.md` / `docs/server-modernization/phase2/operations/logs/20251214T082236Z-module-json-docs.md`: 証跡ログ。

## 次アクション（フォローアップ）
- Flyway `V0225__alter_module_add_json.sql` の実行結果が取得でき次第、本 Runbook の確認ステップに実測ログを追記する。
- ModuleJsonConverter の allow-list 拡充や mvn テスト結果を追跡し、必要に応じて `MODULE_JSON_DEVELOPMENT.md` に Q&A/FAQ を追加する。
