# 対象範囲と成果物定義（webclient non chart gap audit plan）

RUN_ID: 20251230T111233Z

## 目的
「カルテ入力画面以外」の対象画面・機能を明確化し、洗い出し対象の境界を固定する。

## 対象範囲（In Scope）
### 1) 画面/機能（Web クライアント）
- 受付 / 患者一覧 / 予約・受付ステータス / 帳票・印刷 / 設定 / 配信 / 管理
- Charts 画面のうち「カルテ入力以外」
  - 監査（audit）
  - 印刷（outpatient/document 印刷）
  - 検索・履歴（ドキュメント履歴/タイムライン）
  - 権限・承認・ロック（閲覧/操作ガード）

#### 画面リスト（ルーティング基準）
- `/reception` 受付・予約・会計ステータス（`web-client/src/features/reception/pages/ReceptionPage.tsx`）
- `/patients` 患者管理（`web-client/src/features/patients/PatientsPage.tsx`）
- `/administration` 配信/管理（`web-client/src/features/administration/AdministrationPage.tsx`）
- `/charts` Charts 本体（カルテ入力以外を対象）（`web-client/src/features/charts/pages/ChartsPage.tsx`）
- `/charts/print/outpatient` 外来印刷（`web-client/src/features/charts/pages/ChartsOutpatientPrintPage.tsx`）
- `/charts/print/document` 文書印刷（`web-client/src/features/charts/pages/ChartsDocumentPrintPage.tsx`）

#### Charts 画面の「カルテ入力以外」サブ範囲（実装箇所）
- 監査/監査表示: `web-client/src/features/charts/audit.ts`, `web-client/src/features/charts/DocumentTimeline.tsx`
- 印刷/帳票: `web-client/src/features/charts/pages/ChartsOutpatientPrintPage.tsx`, `web-client/src/features/charts/pages/ChartsDocumentPrintPage.tsx`, `web-client/src/features/charts/print/*`
- 検索/履歴: `web-client/src/features/charts/DocumentTimeline.tsx`, `web-client/src/features/charts/encounterContext.ts`
- 権限/承認/ロック: `web-client/src/features/charts/authService.tsx`, `web-client/src/features/charts/approvalState.ts`, `web-client/src/features/charts/editLock.ts`
- 監査/操作記録の共通 UI: `web-client/src/features/shared/*`, `web-client/src/libs/audit/*`

### 2) 対象外（Out of Scope）
- Charts の「カルテ入力」領域（SOAP 入力/病名/処方/オーダー編集・保存）
  - 例: `web-client/src/features/charts/SoapNotePanel.tsx`, `DiagnosisEditPanel.tsx`, `OrderBundleEditPanel.tsx`, `orderMasterSearchApi.ts`
- server/（Legacy サーバー）の変更・改修
- 入院系ワークフロー

## 成果物定義
- 対象画面リスト（本書 §対象範囲・画面リスト）
- 参照ドキュメント一覧（本書 §参照ドキュメント）
- 旧来版ソースの参照箇所（本書 §旧来版ソース参照）

## 参照ドキュメント一覧
- `docs/DEVELOPMENT_STATUS.md`
- `web-client/README.md`
- `web-client/src/AppRouter.tsx`（画面ルーティング）
- `docs/web-client/ux/reception-schedule-ui-policy.md`
- `docs/web-client/ux/patients-admin-ui-policy.md`
- `docs/web-client/ux/admin-delivery-validation.md`
- `docs/web-client/ux/config-toggle-design.md`
- `docs/web-client/ux/charts-claim-ui-policy.md`

## 旧来版ソース参照（Legacy クライアント）
### 受付/予約/会計
- `client/src/main/java/open/dolphin/impl/pvt/WatingListImpl.java`
- `client/src/main/java/open/dolphin/impl/pvt/WatingListView.java`
- `client/src/main/java/open/dolphin/impl/server/PVTReceptionLink.java`
- `client/src/main/java/open/dolphin/impl/schedule/PatientScheduleImpl.java`
- `client/src/main/java/open/dolphin/impl/schedule/PatientScheduleView.java`

### 患者管理/検索
- `client/src/main/java/open/dolphin/impl/psearch/PatientSearchImpl.java`
- `client/src/main/java/open/dolphin/impl/psearch/PatientSearchView.java`
- `client/src/main/java/open/dolphin/dto/PatientSearchSpec.java`

### 帳票/印刷
- `client/src/main/java/open/dolphin/letter/*`
- `client/src/main/java/open/dolphin/hiro/PrescriptionPDFMaker.java`
- `client/src/main/java/open/dolphin/client/KartePDFSender.java`

### 設定/管理/配信
- `client/src/main/java/open/dolphin/project/ProjectSettingDialog.java`
- `client/src/main/java/open/dolphin/project/Project.java`
- `client/src/main/java/open/dolphin/impl/profile/AddUserImpl.java`
- `client/src/main/java/open/dolphin/impl/profile/FacilityEditorView.java`
- `client/src/main/java/open/dolphin/impl/claim/SendClaimImpl.java`

### Charts（非カルテ入力領域）
- `client/src/main/java/open/dolphin/client/DocumentHistory.java`
- `client/src/main/java/open/dolphin/client/DocumentHistoryView.java`
- `client/src/main/java/open/dolphin/client/DocHistoryTipsTable.java`
- `client/src/main/java/open/dolphin/client/DocumentViewer.java`
- `client/src/main/java/open/dolphin/dto/DocumentSearchSpec.java`
- `client/src/main/java/open/dolphin/dto/ModuleSearchSpec.java`

## 備考
- 本書は「カルテ入力画面以外」の洗い出し境界を固定するための対象範囲定義であり、実装変更は含まない。
- 参照先の Phase2 系ドキュメントは Legacy/Archive 扱いのため、現行ルールとしては参照しない。
