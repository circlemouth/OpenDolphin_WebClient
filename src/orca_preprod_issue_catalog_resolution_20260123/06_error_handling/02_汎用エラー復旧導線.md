# 02_汎用エラー復旧導線

- RUN_ID: 20260126T063842Z
- 作業日: 2026-01-26
- YAML ID: src/orca_preprod_issue_catalog_resolution_20260123/06_error_handling/02_汎用エラー復旧導線.md
- 対象IC: IC-43 / IC-44 / IC-45 / IC-46
- 前提ドキュメント:
  - docs/preprod/implementation-issue-inventory/issue-catalog-resolution-prerequisites-20260123.md
  - src/charts_production_outpatient/foundation/12_エラーハンドリングとリトライ規約.md
  - src/charts_production_outpatient/quality/53_障害注入_タイムアウト_スキーマ不一致.md

## 実施内容
- 共通エラーバナー生成ルールを拡張し、HTTP/Network 失敗の文言・トーン・次アクションを統一した。
- 401/403 は再ログイン CTA を最優先で表示し、セッション失効通知でログアウト導線へ統一した。
- 404 は info トーンの空状態メッセージとして扱い、条件変更と再取得の案内を共通化した。
- 5xx は再取得ボタンに 5 秒クールダウンを付与し、復旧までの行動指針を画面間で揃えた。
- ApiFailureBanner 経由の画面（Reception/Patients/Charts など）で上記ルールが同一になるようにした。

## 変更ファイル
- web-client/src/features/shared/apiError.ts
- web-client/src/features/shared/ApiFailureBanner.tsx
- web-client/src/features/shared/apiError.test.ts

## 検証
- 実行コマンド:
  - npm --prefix web-client test -- apiError
- 結果: パス
