# 後続実装タスク分割とロードマップ

- RUN_ID: `20260103T101839Z`
- 目的: 画面割当とサーバ連携整理を基に、実装タスクを画面単位で分割し優先度順に並べる。
- 前提: `src/implementation_planning/未実装項目の画面割当と実装箇所整理.md` / `src/implementation_planning/モダナイズ版サーバー連携整理.md`
- 期間: 2026-01-05 09:00 - 2026-01-06 09:00

## タスク分割（画面別）
- 認証/権限（BKL-003/004/016）
- Administration/配信（BKL-001/002/009/012）
- Reception（BKL-006/010/011/013）
- Patients（BKL-007/014/015）
- Charts 非カルテ（BKL-005/008/017/018）
- 共通（BKL-019/020）

## 画面別ロードマップ（P0→P3）
### P0（業務完結性/権限の前提）
- 認証/権限（BKL-003/004）
  - BKL-003: 施設/ユーザ選択 UI と権限境界の明示
  - BKL-004: 施設/ユーザ切替フロー（安全な再ログイン）
- Administration/配信（BKL-001/002）
  - BKL-001: 管理メニュー全体設計の確定（マスタ/権限/セット/通知/監査）
  - BKL-002: system_admin ガードと拒否理由表示の整備
- Charts 非カルテ（BKL-005）
  - BKL-005: 診療終了/送信の実処理連携と結果反映
- Reception（BKL-006）
  - BKL-006: 例外一覧（未承認/送信エラー/遅延）の可視化
- Patients（BKL-007）
  - BKL-007: ORCA 反映状態/同期ステータスの提示

### P1（運用可視化/画面拡張）
- Charts 非カルテ（BKL-008）
  - BKL-008: 印刷/エクスポートの状態・例外ハンドリング整備
- Administration/配信（BKL-009/012）
  - BKL-009: 配信タイミング/環境ラベルの明示
  - BKL-012: 配信バージョン/ETag/反映遅延の証跡設計
- Reception（BKL-010/011）
  - BKL-010: 右ペインの情報整理と操作導線の整備
  - BKL-011: 一覧列の拡張と状態表示の統一

### P2（監査/安全性の強化）
- Reception（BKL-013）
  - BKL-013: 受付監査履歴の検索 UI
- Patients（BKL-014/015）
  - BKL-014: 監査履歴ビューの拡張
  - BKL-015: 未紐付/警告の強調表示と通知
- 認証/権限（BKL-016）
  - BKL-016: 権限境界の運用フロー確立
- Charts 非カルテ（BKL-017/018）
  - BKL-017: 患者安全ヘッダ（氏名強調/年齢/和暦）
  - BKL-018: ドキュメント履歴（検索/フィルタ/ガード）
- 共通（BKL-019）
  - BKL-019: data-run-id/aria-live の統一

### P3（運用支援の追加）
- 共通（BKL-020）
  - BKL-020: RUN_ID コピー/通知トースト/ナビバッジ

## 依存関係（再確認）
- 認証/権限（BKL-003/004）が Administration の権限ガード（BKL-002）より先行。
- 監査メタの統一（BKL-019）が 監査検索 UI（BKL-013/014/018）の前提。
- 配信設計（BKL-001）が 配信表示/証跡（BKL-009/012）の前提。

## 実装順の最終化（推奨シーケンス）
1. BKL-003 → BKL-004 → BKL-001 → BKL-002（権限/管理の前提整備）
2. BKL-005 → BKL-006 → BKL-007（送信/例外/反映状態の横断反映）
3. BKL-008 → BKL-009 → BKL-010 → BKL-011 → BKL-012（運用 UI の拡張）
4. BKL-019 → BKL-013 → BKL-014 → BKL-018（監査メタ基盤 → 監査 UI）
5. BKL-016 → BKL-017 → BKL-015 → BKL-020（運用フロー/安全性/通知）

## 成果物
- 画面別の実装ロードマップ（P0→P3）
- 依存関係の最終化

## 参照
- `src/implementation_planning/未実装項目の画面割当と実装箇所整理.md`
- `src/implementation_planning/モダナイズ版サーバー連携整理.md`
