# 後続実装タスク分割とロードマップ

- RUN_ID: `20260103T101839Z`
- 目的: 画面割当とサーバ連携整理を基に、実装タスクを画面単位で分割し優先度順に並べる。
- 前提: `src/implementation_planning/未実装項目の画面割当と実装箇所整理.md` / `src/implementation_planning/モダナイズ版サーバー連携整理.md`
- 期間: 2026-01-05 09:00 - 2026-01-06 09:00

## タスク分割（画面別）
- 認証/権限（BKL-003/004/016）
- Administration/配信（BKL-001/002/009/012/04）
- Reception（BKL-006/010/011/013/05）
- Patients（BKL-007/014/015）
- Charts 非カルテ（BKL-005/008/017/018）
- 共通（BKL-019/020）

## 画面別ロードマップ（P0→P2）
### P0（中核連携の整備）
- 認証/権限（BKL-003/004/016）
  - BKL-003: 権限チェック基盤と API ガード整備
  - BKL-004: 画面遷移/リンクの権限制御とガード理由表示
  - BKL-016: ロール/権限の運用フロー定義・管理 UI への反映
- Administration/配信（BKL-001/002/009/012/04）
  - BKL-001: 配信設計の確定（データソース/環境優先順/配信状態の根拠）
  - BKL-002: 管理画面の権限ガード・操作監査の前提整備
  - BKL-009/012/04: 配信状態の表示・証跡・操作ログの整備（管理画面起点）
- Charts 非カルテ（BKL-005）
  - BKL-005: 送信/連携ステータスの表示とガード（配信・権限前提）
- Reception（BKL-006）
  - BKL-006: 受付例外/アラートの表示と連携状態の即時反映
- Patients（BKL-007）
  - BKL-007: 反映状態/同期ステータスの提示（master/ORCA 連携の基準化）

### P1（運用効率と監査の強化）
- Charts 非カルテ（BKL-008/017）
  - BKL-008: 印刷/エクスポートの状態・例外ハンドリング整備
  - BKL-017: 監査/履歴ビューの UI 連携（共通監査メタを前提）
- Reception（BKL-010/011）
  - BKL-010: 右ペインの情報整理と操作導線の整備
  - BKL-011: 一覧列の拡張と状態表示の統一
- Reception（BKL-013）
  - BKL-013: 監査検索 UI の整備（共通監査メタ前提）
- Administration/配信（BKL-012/04）
  - BKL-012/04: 配信証跡/監査出力の運用整理（BKL-001/002 前提）
- Patients（BKL-014）
  - BKL-014: 監査/履歴の可視化強化（共通監査メタ前提）

### P2（共通整備と残課題の解消）
- 共通（BKL-019/020）
  - BKL-019: 監査メタ（runId/dataSource/operation）統一
  - BKL-020: data-run-id/ログ規約の統一と観測性向上
- Patients（BKL-015）
  - BKL-015: 安全ヘッダ・ドキュメント履歴の補完
- Charts 非カルテ（BKL-018）
  - BKL-018: 監査履歴 UI の仕上げ（共通メタの後段）

## 依存関係（再確認）
- 認証/権限（BKL-003/004/016）が Administration の権限ガード（BKL-002）より先行。
- 監査メタの統一（BKL-019）が 監査検索 UI（BKL-013/014/018）の前提。
- 配信設計（BKL-001）が 配信表示/証跡（BKL-009/012/04）の前提。

## 実装順の最終化（推奨シーケンス）
1. BKL-003 → BKL-004 → BKL-016（権限基盤を先に確定）
2. BKL-001 → BKL-002 → BKL-009 → BKL-012 → BKL-04（配信と監査の主導線）
3. BKL-005 → BKL-006 → BKL-007（送信/例外/反映状態の横断反映）
4. BKL-008 → BKL-010 → BKL-011 → BKL-014 → BKL-017（運用 UI 強化）
5. BKL-019 → BKL-020 → BKL-015 → BKL-018（共通規約と残タスク）

## 成果物
- 画面別の実装ロードマップ（P0→P2）
- 依存関係の最終化

## 参照
- `src/implementation_planning/未実装項目の画面割当と実装箇所整理.md`
- `src/implementation_planning/モダナイズ版サーバー連携整理.md`
