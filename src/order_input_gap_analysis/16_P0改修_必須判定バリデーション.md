# 16 P0 改修：必須判定バリデーション

RUN_ID: 20251229T081044Z

- 目的: 旧来版の必須判定（処方/処置/検査/指示/リハビリ）を Web バリデーションに反映する。
- 対象: OrderBundleEditPanel / BaseEditor 系（Charts 右パネル）。
- 実装観点:
  - 処方: 薬剤≥1、用法必須、用法検索必須を保存前に検証。
  - BaseEditor: entity 別必須項目の定義を整理し、保存ブロックとメッセージを統一。
  - readOnly/missingMaster/fallbackUsed ガードと競合しない判定順序を明確化。
- 依存/前提: entity 定義・必須項目一覧の整備（不足時は前提ドキュメントに追記）。
- テスト: 必須違反時の保存ブロック/メッセージ/監査ログの整合。

## 必須項目定義（Web 反映）
RUN_ID: 20251229T081044Z

| entity | 旧来版の必須条件 | Web での必須判定 | メッセージ方針 |
| --- | --- | --- | --- |
| medOrder（処方/RP） | 薬剤/その他が1件以上、用法がちょうど1件 | 薬剤/項目が1件以上、用法入力必須 | 「薬剤/項目を1件以上入力してください。」「用法を入力してください。」 |
| generalOrder（BaseEditor 系: 処置/検査/指示/リハビリ） | 診療行為またはその他が1件以上（entity 条件あり） | 項目が1件以上 | 「項目を1件以上入力してください。」 |

### 補足
- Web は用法検索 UI が未実装のため、用法検索必須は「用法入力必須」で暫定反映する。
- entity が追加される場合は本表に必須項目を追記し、UI の保存ブロック/メッセージを統一する。
