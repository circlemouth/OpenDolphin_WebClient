# 10 ドキュメント化とレビュー

RUN_ID: 20251229T014154Z

## 参照
- docs/DEVELOPMENT_STATUS.md
- src/order_input_gap_analysis/00_RUN_IDと調査範囲確定.md
- src/order_input_gap_analysis/09_差分マトリクス統合.md

## 配置
- 本ファイル: src/order_input_gap_analysis/10_ドキュメント化とレビュー.md
- 前工程の差分統合: src/order_input_gap_analysis/09_差分マトリクス統合.md

## 調査結果サマリ（差分の全体像）
- 旧来版はスタンプボックス/エディタ中心で、マスタ検索・スタンプ保存・展開/展開継続が業務フローに組み込まれている。
- Web は右パネルフォームから /orca/order/bundles API へ直接保存する設計で、検索/テンプレ/スタンプ系 UI が未実装。
- Web は readOnly/missingMaster/fallbackUsed による入力ブロックを追加しており、旧来版とは安全ガードの方針が異なる。
- 文書領域は Web が外来サマリ印刷のみで、旧来版の文書作成/テンプレ/フォームとの差が大きい。

## 実装漏れ候補（差分マトリクス整理 + 再現手順）

### A. 共通オーダー入力（処方/処置/検査/指示/リハビリ共通）

| 項目 | 調査結果・差分 | 旧来版 参照（画面/コード） | Web 参照（画面/コード） | 再現手順 | 優先度 |
| --- | --- | --- | --- | --- | --- |
| マスタ検索（RT/部分一致/件数） | 旧来版は検索欄 + 結果テーブルで追加。Web は手入力のみ。 | スタンプボックス＋エディタ / client/src/main/java/open/dolphin/order/BaseEditor.java | Charts 右パネル / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: スタンプタブで検索欄に入力→結果を選択。Web: Charts→右固定メニュー→処方/オーダー編集を開いても検索UIが存在しない。 | P0 |
| 検索結果テーブル（行選択追加） | 旧来版は結果行選択で追加。Web は行追加 UI なし。 | スタンプボックス / client/src/main/java/open/dolphin/order/BaseEditor.java | Charts 右パネル / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 検索結果テーブルから項目追加。Web: 手入力以外の追加導線がない。 | P0 |
| ドラッグ&ドロップ並べ替え | 旧来版はDnDで並び替え。Web は並べ替え UI なし。 | エディタテーブル / client/src/main/java/open/dolphin/order/BaseEditor.java | Charts 右パネル / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: テーブル行をドラッグ。Web: 行順変更のUIが存在しない。 | P1 |
| 行削除/全クリア | 旧来版は行削除/全クリアあり。Web は行削除のみ。 | BaseEditor / client/src/main/java/open/dolphin/order/BaseEditor.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: クリア操作で一括削除。Web: 行削除のみで全クリア操作がない。 | P1 |
| スタンプ保存（新規/置換） | 旧来版はスタンプ保存が可能。Web はUIなし。 | スタンプボックス / client/src/main/java/open/dolphin/stampbox/StampBoxResource_ja.java | Charts 右パネル / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 矢印ボタンで保存。Web: スタンプ保存導線がない。 | P0 |
| スタンプ取り込み | 旧来版は既存スタンプを取込可能。Web はUIなし。 | スタンプボックス / client/src/main/java/open/dolphin/stampbox/StampBoxResource_ja.java | Charts 右パネル / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 左矢印で取込。Web: 取込導線がない。 | P0 |
| 展開/展開継続（カルテ展開） | 旧来版は展開/展開継続でカルテへ展開。Web はAPI保存のみ。 | EditorSetPanel / client/src/main/java/open/dolphin/order/EditorSetPanel.java | OrderBundle API / web-client/src/features/charts/orderBundleApi.ts | 旧来版: 展開/展開継続ボタンでカルテ反映。Web: 保存ボタンで /orca/order/bundles のみ。 | P0 |

### B. 処方オーダー（Rp）

| 項目 | 調査結果・差分 | 旧来版 参照（画面/コード） | Web 参照（画面/コード） | 再現手順 | 優先度 |
| --- | --- | --- | --- | --- | --- |
| 薬剤/用法の必須判定 | 旧来版は薬剤/その他≥1かつ用法=1が必須。Web はRP名のみ必須。 | RpEditor / client/src/main/java/open/dolphin/order/RpEditor.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 薬剤/用法が不足すると保存不可。Web: RP名さえ入力すれば保存可能。 | P0 |
| 用法検索・用法フィルタ | 旧来版はマスタ検索/フィルタがある。Web はテキスト入力のみ。 | RpView / client/src/main/java/open/dolphin/order/RpView.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 用法検索から選択。Web: admin を手入力。 | P0 |
| 院内/院外・頓用/臨時 | 旧来版はラジオ/チェックで設定。Web はUI/送信項目なし。 | RpView / client/src/main/java/open/dolphin/order/RpView.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 院内/院外や頓用/臨時を選択。Web: 該当UIがない。 | P1 |
| 日数/回数（用法行） | 旧来版は用法行に日数/回数入力。Web は回数のみ手入力。 | RpEditor / client/src/main/java/open/dolphin/order/RpEditor.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 用法行で日数/回数を設定。Web: bundleNumber のみ入力。 | P1 |
| 展開/展開継続 | 旧来版はカルテ展開。Web は API 保存のみ。 | RpEditor / client/src/main/java/open/dolphin/order/RpEditor.java | orderBundleApi / web-client/src/features/charts/orderBundleApi.ts | 旧来版: 展開/展開継続でカルテ反映。Web: /orca/order/bundles 保存のみ。 | P0 |

### C. 注射/放射線/処置/検査/指示（BaseEditor/RadEditor）

| 項目 | 調査結果・差分 | 旧来版 参照（画面/コード） | Web 参照（画面/コード） | 再現手順 | 優先度 |
| --- | --- | --- | --- | --- | --- |
| 注射「手技料なし」 | 旧来版はチェックあり。Web はUIなし。 | InjectionEditor / client/src/main/java/open/dolphin/order/InjectionEditor.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 注射エディタで「手技料なし」を切替。Web: 該当UIがない。 | P1 |
| 放射線 部位検索ボタン | 旧来版は部位検索がある。Web はUIなし。 | RadEditor / client/src/main/java/open/dolphin/order/RadEditor.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 部位検索ボタンから選択。Web: 手入力のみ。 | P1 |
| 放射線 部位チェック表示 | 旧来版は部位チェック表示/必須条件あり。Web はなし。 | RadView / client/src/main/java/open/dolphin/order/RadView.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 部位欄のチェック表示が出る。Web: 表示なし。 | P1 |
| コメントコード編集 | 旧来版はコメントコード行のみ編集可。Web はテキスト行のみ。 | BaseEditor / client/src/main/java/open/dolphin/order/BaseEditor.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: コメントコード行を選択/編集。Web: コメントコード概念がない。 | P1 |
| 材料（SLOT_ZAIRYO） | 旧来版は材料マスタ追加。Web はUIなし。 | BaseEditor / client/src/main/java/open/dolphin/order/BaseEditor.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 材料検索→追加。Web: 材料用UIがない。 | P1 |
| 必須判定（診療行為/部位/その他） | 旧来版は entity 別必須判定あり。Web はバリデーションなし。 | BaseEditor / client/src/main/java/open/dolphin/order/BaseEditor.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: 必須条件を満たさないと保存不可。Web: 条件不足でも保存可能。 | P0 |

### D. リハビリ（その他/一般オーダー）

| 項目 | 調査結果・差分 | 旧来版 参照（画面/コード） | Web 参照（画面/コード） | 再現手順 | 優先度 |
| --- | --- | --- | --- | --- | --- |
| 部位入力（マスタ検索） | 旧来版は部位マスタ検索。Web は手入力のみ。 | ClaimResource / client/src/main/java/open/dolphin/order/ClaimResource_ja.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: その他タブでリハビリ項目を検索/選択。Web: generalOrder で手入力のみ。 | P1 |
| 指示/コメント（コメントコード） | 旧来版はコメントコード行編集。Web はメモ欄のみ。 | BaseEditor / client/src/main/java/open/dolphin/order/BaseEditor.java | OrderBundleEditPanel / web-client/src/features/charts/OrderBundleEditPanel.tsx | 旧来版: コメントコード行で指示入力。Web: memo のみ。 | P1 |
| 予約/スケジュール連携 | 旧来版は別画面で連携。Web はUIなし。 | 旧来版スケジュール関連 / （別モジュール） | Web なし | 旧来版: スケジュール画面で登録。Web: 連携画面が存在しない。 | P2 |

### E. 文書オーダー

| 項目 | 調査結果・差分 | 旧来版 参照（画面/コード） | Web 参照（画面/コード） | 再現手順 | 優先度 |
| --- | --- | --- | --- | --- | --- |
| 新規文書作成メニュー | 旧来版は文書作成メニューから起動。Web はUIなし。 | ChartImpl / client/src/main/java/open/dolphin/client/ChartImpl.java | Charts 右パネル / web-client/src/features/charts/pages/ChartsPage.tsx | 旧来版: 文書作成メニュー→テンプレ選択。Web: 右パネルに文書登録導線はあるが入力UIなし。 | P0 |
| 文書フォーム（紹介状/診断書/返信書） | 旧来版は文書フォーム入力あり。Web は未実装。 | ChartImpl / client/src/main/java/open/dolphin/client/ChartImpl.java | Charts 右パネル / web-client/src/features/charts/pages/ChartsPage.tsx | 旧来版: 文書フォームを開いて入力・保存。Web: 文書フォームがない。 | P0 |
| ODT差し込みテンプレ | 旧来版はODTテンプレ選択。Web は未実装。 | ChartImpl / client/src/main/java/open/dolphin/client/ChartImpl.java | Charts 右パネル / web-client/src/features/charts/pages/ChartsPage.tsx | 旧来版: ODTテンプレを選択して文書生成。Web: テンプレ選択UIなし。 | P1 |
| 多種文書の印刷出力 | 旧来版はPDF/フォーム印刷。Web は外来サマリのみ。 | ChartImpl / client/src/main/java/open/dolphin/client/ChartImpl.java | Charts 右パネル / web-client/src/features/charts/pages/ChartsPage.tsx | 旧来版: 文書別の印刷/プレビュー。Web: 外来サマリ以外は出力不可。 | P1 |

## 引き継ぎメモ
- 優先度は 09 の定義に準拠（P0: 業務必須 / P1: 品質・安全 / P2: 便利機能）。
- 実装漏れ修正タスク化の際は、本ファイルの「項目」「再現手順」「優先度」をそのままチケット化する。
- Web 側の readOnly/missingMaster/fallbackUsed ガードは差分ではあるが安全性向上のため「仕様差」として扱う。
- 追加調査が必要な場合は 00/01-08/09 を参照し、差分が増えた際は 09 → 本ファイルの順で更新する。
