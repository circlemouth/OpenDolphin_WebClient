# 17 P0 改修：マスタ検索 UI

RUN_ID: 20251229T081044Z

- 目的: OrderBundleEditPanel にマスタ検索/検索結果テーブル/行選択導線を追加する。
- 対象: 処方/処置検査/指示/リハビリ共通の検索補助 UI。
- 実装観点:
  - 検索入力→結果テーブル→行選択で入力反映。
  - 既存の readOnly/missingMaster/fallbackUsed ガードを維持。
  - 検索結果の表示項目と選択反映の仕様を明文化。
- 依存/前提: /orca/master/* の検索 API スキーマ確認（不足時は server-modernized タスク起票）。
- テスト: 検索条件変更時の結果更新、行選択反映、readOnly 時のブロック。

## 検索 UI 仕様（Web）

### 検索対象
- `medOrder`（処方）: 薬効分類 / 用法 / 材料
- `generalOrder`（処置・検査・指示・リハビリ）: 点数 / 検査区分 / 材料 / 用法
- 取得 API:
  - 薬効分類: `/orca/master/generic-class?keyword=...`
  - 用法: `/orca/master/youhou?keyword=...`
  - 材料: `/orca/master/material?keyword=...`
  - 検査区分: `/orca/master/kensa-sort?keyword=...`
  - 点数: `/orca/tensu/etensu?keyword=...`

### 検索結果テーブル表示項目
- コード
- 名称
- 単位
- 区分/点数（点数系は points、それ以外は category）
- 有効期間（validFrom〜validTo）

### 行選択時の反映仕様
- `youhou`（用法）:
  - `admin` へ反映（`code + name` をセット）。
- それ以外:
  - `items` に追加。
  - 追加ルール:
    1) 空欄行があればその行を置換。
    2) 空欄行が無い場合は末尾に追加。
  - `items` 反映内容:
    - `name`: `code + name`（コードが無い場合は `name` のみ）
    - `unit`: マスタの単位（無い場合は空欄）
    - `quantity`: 空欄のまま
