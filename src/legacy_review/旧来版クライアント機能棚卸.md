# 旧来版クライアント機能棚卸（非チャート系も含む）

RUN_ID: 20251230T173955Z
対象: 旧来版クライアント（client/ 配下の Java Swing 実装）
作成日: 2025-12-30

## 旧来版画面一覧

| 区分 | 画面/機能名 | 主な実装クラス/パッケージ | 備考 |
| --- | --- | --- | --- |
| 認証 | ログイン（単一/複数施設・複数ユーザ） | open.dolphin.impl.login.* | 施設選択・ユーザ選択・サインイン |
| メイン | メインウィンドウ | open.dolphin.client.Dolphin / MainView | メニュー/ステータス/タブ群 |
| メインタブ | 受付リスト | open.dolphin.impl.pvt.WatingListImpl | 来院受付一覧・状態/メモ/キャンセル |
| メインタブ | 患者検索 | open.dolphin.impl.psearch.PatientSearchImpl | 検索・並び替え・仮保存カルテ取得 |
| メインタブ | 予定カルテ | open.dolphin.impl.schedule.PatientScheduleImpl | 予定検索・未来処方適用 |
| メインタブ | 検体検査受信 | open.dolphin.impl.labrcv.NLaboTestImporter | 検査ファイル取込・エラー/成功管理 |
| カルテ | カルテウィンドウ | open.dolphin.client.ChartImpl / EditorFrame | 患者情報/履歴/編集/閲覧 |
| カルテ | 新規/修正カルテダイアログ | open.dolphin.client.NewKarteDialog | 作成モード/コピー/未来処方 |
| カルテ | 文書履歴 | open.dolphin.client.DocumentHistory | 期間/種別/修正版表示/並び順 |
| カルテ | SOAP/診療録編集 | open.dolphin.client.KarteEditor | SOAP/スタンプ/処方/オーダー |
| カルテ | カルテ閲覧 | open.dolphin.client.KarteViewer* | 閲覧/印刷/PDF |
| カルテ | 病名/アレルギー/身体所見 | open.dolphin.client.DiagnosisDocument / Allergy* / Physical* | 編集/監査/転帰等 |
| カルテ | スタンプボックス | open.dolphin.stampbox.* | スタンプ管理/配布/取込 |
| カルテ | 画像・シェーマ編集 | open.dolphin.impl.schema.* / impl.scheam.* | 手書きスキーマ/ツールパレット |
| カルテ | 画像ブラウザ連携 | open.dolphin.impl.img.* | FCR/TFS/Unitea 等の外部画像 |
| カルテ | 検査結果閲覧 | open.dolphin.impl.lbtest.LaboTestPanel | 検査結果表示/印刷/PDF |
| カルテ | ケアマップ/履歴 | open.dolphin.impl.care.* | 診療履歴/予定/画像履歴 |
| 管理 | ユーザ追加 | open.dolphin.impl.profile.AddUserImpl | ユーザ登録/権限 |
| 管理 | パスワード変更 | open.dolphin.impl.profile.ChangePasswordImpl | パスワード変更 |
| 管理 | 施設情報編集 | open.dolphin.impl.profile.FacilityEditorView | 施設情報の編集 |
| 連携 | CLAIM 送信 | open.dolphin.impl.claim.SendClaimImpl | レセプト/CLAIM 送信 |
| 連携 | MML 送信 | open.dolphin.impl.mml.SendMmlImpl | MML 出力/送信 |
| 参考 | About/活動履歴 | open.dolphin.client.About* | バージョン/活動履歴 |

## 画面別機能メモ

### ログイン（単一/複数施設・複数ユーザ）
- 主要機能: 施設選択、ユーザ選択、資格情報入力、サインイン。
- 操作フロー: アプリ起動 → 施設/ユーザ選択 → 認証 → メインウィンドウ表示。
- 差分候補(未確認): 複数施設/複数ユーザ切替 UI、ログイン方式の細分化。

### メインウィンドウ
- 主要機能: メニュー/ツールバー/ステータスパネル、MainComponent タブの切替。
- 操作フロー: ログイン後に起動、タブで業務画面へ遷移。
- 差分候補(未確認): メニュー構成の網羅（帳票/設定/外部連携）とタブ構成の完全一致。

### 受付リスト（来院受付）
- 主要機能: 受付一覧（来院時間/保険/担当医/メモ/状態）、担当医フィルタ、送信状態/取消表示。
- 操作フロー: 受付一覧を自動更新 → 患者選択 → カルテオープン/受付キャンセル/削除。
- 差分候補(未確認): 受付キャンセル/取消、メモ編集、状態ビット（OPEN/CLAIM 送信）同期、バーコード連携。

### 患者検索
- 主要機能: キーワード検索、並び替え、家族/施設患者検索、仮保存カルテ取得。
- 操作フロー: キーワード入力 → 検索 → 患者選択 → カルテオープン or 仮保存カルテ取得。
- 差分候補(未確認): 仮保存カルテ取得、権限制御による検索/操作制限、状態列表示。

### 予定カルテ
- 主要機能: 予定日/担当医の検索、未来処方の適用、CLAIM 送信連携。
- 操作フロー: 予定日指定 → 予定一覧取得 → 未来処方適用 → カルテ作成/送信。
- 差分候補(未確認): 未来処方適用 UI、CLAIM 送信フロー、予定カルテ専用フィルタ。

### 検体検査受信（ラボ取込）
- 主要機能: DAT/HL7/TXT/CSV 取込、患者紐付け、成功/失敗一覧、カルテオープン。
- 操作フロー: 検査ファイル取込 → 解析 → 受信一覧 → カルテへ反映/閲覧。
- 差分候補(未確認): 取込ファイル形式、受信一覧/エラー表示、検査結果への導線。

### カルテウィンドウ
- 主要機能: 患者基本情報表示、文書履歴、編集/閲覧タブ、スタンプ・スキーマ・画像連携。
- 操作フロー: 受付/検索からカルテオープン → 履歴確認 → 新規/修正カルテ作成。
- 差分候補(未確認): 文書履歴の抽出条件、編集/閲覧の二面構成、外部連携ボタン群。

### 新規/修正カルテダイアログ
- 主要機能: 新規作成/修正/コピー/未来処方適用のモード選択。
- 操作フロー: 新規/修正押下 → 作成モード選択 → 編集画面へ遷移。
- 差分候補(未確認): 作成モードの選択肢（空/全コピー/未来処方）と UI 仕様。

### 文書履歴
- 主要機能: 期間/文書種別/修正版表示の切替、履歴一覧と選択。
- 操作フロー: 抽出条件指定 → 履歴取得 → 閲覧/編集に遷移。
- 差分候補(未確認): 履歴抽出条件 UI、修正版表示、複数選択操作。

### SOAP/診療録編集（KarteEditor）
- 主要機能: SOAP 入力、スタンプ・処方・オーダー編集、保存/送信。
- 操作フロー: 新規/修正カルテ → SOAP/スタンプ入力 → 保存/CLAIM 送信。
- 差分候補(未確認): スタンプ操作体系（ドラッグ&ドロップ）、CLAIM 送信タイミング。

### カルテ閲覧（KarteViewer）
- 主要機能: 既存文書の閲覧、印刷/PDF 生成、オフィス文書挿入。
- 操作フロー: 文書履歴から閲覧 → 必要に応じて印刷/PDF。
- 差分候補(未確認): PDF 生成/オフィス文書挿入、閲覧 UI と印刷条件。

### 病名/アレルギー/身体所見
- 主要機能: 病名編集/転帰、アレルギー登録、身体所見の入力/更新。
- 操作フロー: 編集画面で項目入力 → 保存 → カルテ反映。
- 差分候補(未確認): アレルギー/身体所見専用の編集 UI、転帰/期間管理。

### スタンプボックス
- 主要機能: ユーザスタンプ管理、インポート/エクスポート、スタンプ配布。
- 操作フロー: スタンプ編集 → 登録 → カルテへ適用。
- 差分候補(未確認): スタンプボックス UI、インポート/エクスポート、配布フロー。

### 画像・シェーマ編集
- 主要機能: 手書きスキーマ、ツールパレット、画像貼付。
- 操作フロー: スキーマエディタ起動 → 描画 → カルテへ保存。
- 差分候補(未確認): 手書きツール/図形/テキスト、別ウィンドウ構成。

### 画像ブラウザ連携
- 主要機能: FCR/TFS/Unitea 等の画像システム参照、検索/一覧表示。
- 操作フロー: 画像ブラウザ起動 → 患者画像検索 → 閲覧/取込。
- 差分候補(未確認): 外部画像システム連携 UI と設定画面。

### 検査結果閲覧（LaboTestPanel）
- 主要機能: 検査結果表示、PDF/印刷、患者別の検査履歴。
- 操作フロー: 検査受信/カルテから閲覧 → 印刷/PDF。
- 差分候補(未確認): 検査結果ビューア、印刷/PDF 出力。

### ケアマップ/履歴
- 主要機能: 診療履歴・予定・画像履歴の集約表示。
- 操作フロー: ケアマップ表示 → 履歴確認 → 必要に応じてカルテ遷移。
- 差分候補(未確認): ケアマップ画面自体、履歴の統合ビュー。

### ユーザ追加/パスワード変更/施設情報編集
- 主要機能: ユーザ登録、パスワード更新、施設情報編集。
- 操作フロー: 管理メニュー → 対象画面 → 変更保存。
- 差分候補(未確認): 管理系 UI の提供範囲と権限設定の細部。

### CLAIM/MML 送信
- 主要機能: CLAIM 送信、MML 出力/送信の連携。
- 操作フロー: カルテ確定 → 送信 → 結果/ログ確認。
- 差分候補(未確認): 送信 UI/ログ表示、送信条件のカスタム。

### About/活動履歴
- 主要機能: バージョン/活動履歴の表示。
- 操作フロー: メニューから表示 → 閉じる。
- 差分候補(未確認): 情報表示の有無、ログ/履歴の粒度。

## 補足
- 上記は client/ 配下の実装クラスから抽出した「旧来版の画面構成と機能」。
- 差分候補は「モダナイズ版の実装状況未確認」を前提に列挙しているため、照合時に要精査。
