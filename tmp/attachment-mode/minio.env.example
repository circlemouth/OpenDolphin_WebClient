# MinIO / S3 mock secrets for attachment-mode CLI
# コピーして `tmp/attachment-mode/minio.env` として保存し、`source tmp/attachment-mode/minio.env` で読み込む。

export MODERNIZED_STORAGE_MODE=${MODERNIZED_STORAGE_MODE:-database}
export ATTACHMENT_STORAGE_CONFIG_PATH=${ATTACHMENT_STORAGE_CONFIG_PATH:-/opt/jboss/config/attachment-storage.yaml}

# Facility placeholder used by attachment-storage templates
export FACILITY_ID=${FACILITY_ID:-9001}

# MinIO service ports / credentials
export MINIO_API_PORT=${MINIO_API_PORT:-9000}
export MINIO_CONSOLE_PORT=${MINIO_CONSOLE_PORT:-9001}
export MINIO_ROOT_USER=${MINIO_ROOT_USER:-opendolphin}
export MINIO_ROOT_PASSWORD=${MINIO_ROOT_PASSWORD:-opendolphin-secret}

# Attachment S3 parameters (override per environment)
export ATTACHMENT_S3_ENDPOINT=${ATTACHMENT_S3_ENDPOINT:-http://minio:9000}
export ATTACHMENT_S3_ACCESS_KEY=${ATTACHMENT_S3_ACCESS_KEY:-opendolphin}
export ATTACHMENT_S3_SECRET_KEY=${ATTACHMENT_S3_SECRET_KEY:-opendolphin-secret}
export ATTACHMENT_S3_BUCKET=${ATTACHMENT_S3_BUCKET:-opendolphin-attachments}
export ATTACHMENT_S3_REGION=${ATTACHMENT_S3_REGION:-ap-northeast-1}
export ATTACHMENT_S3_BASE_PATH=${ATTACHMENT_S3_BASE_PATH:-clinics/${FACILITY_ID}/documents}
export ATTACHMENT_S3_FORCE_PATH_STYLE=${ATTACHMENT_S3_FORCE_PATH_STYLE:-true}
export ATTACHMENT_S3_SERVER_SIDE_ENCRYPTION=${ATTACHMENT_S3_SERVER_SIDE_ENCRYPTION:-AES256}
export ATTACHMENT_S3_KMS_KEY_ID=${ATTACHMENT_S3_KMS_KEY_ID:-}
export ATTACHMENT_S3_MULTIPART_THRESHOLD_MB=${ATTACHMENT_S3_MULTIPART_THRESHOLD_MB:-64}

# Optional: override HTTP port when smoke-testing an already running stack
export MODERNIZED_APP_HTTP_PORT=${MODERNIZED_APP_HTTP_PORT:-9080}
