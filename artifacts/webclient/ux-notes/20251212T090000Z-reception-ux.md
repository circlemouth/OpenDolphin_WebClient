# RUN_ID=20251212T090000Z Reception UX 実装ノート

## スクリーンショット
- `artifacts/webclient/ux-notes/20251212T090000Z-reception-ux.png` に ReceptionPage のヘッダー直下バナー（tone=server、aria-live=assertive）、OrderConsole の resolveMasterSource バッジ、missingMaster コントロール、cacheHit/missingMaster badge を含む画面を捕捉する。
- Carries over tone/carry semantics with `data-run-id` をあわせて撮影し、Charts/Patients から戻ったときに banner がコンシステントかつ `aria-atomic=false` で抑止されていることを示す。

## ARIA 調整メモ
- tone=server バナーは `role=alert` + `aria-live=assertive` で新しい `data-run-id` を持つ更新のみを announce し、`aria-atomic=false` で二重読み上げを抑制。完了/Info トーンは `aria-live=polite` に切り替えてシステムの安定性を示す。
- missingMaster/ cacheHit StatusBadge は `role=status` + `aria-live` を `assertive`/`polite` で制御し、Charts/Patients でも同じ `status-badge` CSS を再利用することで cross-screen announcement を一定化。
- ResolveMasterBadge は `aria-live=polite` で `resolveMasterSource` の `dataSourceTransition` を示し、server entry > fallback drop の sequence を記録。`data-run-id` を追加して Playwright で carry-over を検証しやすくした。

## API 依存・監査メタ
- `resolveMasterSource(masterType)` から `dataSourceTransition` を継承し、`/orca12/patientmodv2/outpatient`、`/api01rv2/appointment/outpatient/*`、`/api01rv2/claim/outpatient/*` などの runId/ cacheHit/ missingMaster/ fallbackUsed を `OrderConsole` でも `audit.logUiState` へ送信して tone=server の照合作業をサポート。
- missingMaster 入力は ORCA/master snapshot の欠損を補う `missingMaster=true` の判定と同期し、解消まで再送をブロックする `tone=server` ループを観察できるよう `audit.logUiState` に `missingMaster` フラグを含める。
- cacheHit のトグルは React Query TTL を想定した状態遷移（`cacheHit=false` → `true`）を模したもので、Playwright/a11y 観察で `Patients` 画面の cache badge に同じ tone と aria-live を伝播させるための基準となる。
