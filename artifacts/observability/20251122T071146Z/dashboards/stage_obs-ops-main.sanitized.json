{
  "title": "Ops Main (Stage, sanitized)",
  "uid": "obs-ops-main-stage",
  "run_id": "20251122T071146Z",
  "description": "Stage Ops dashboard template. No PII; queries use env/service/facility only.",
  "schemaVersion": 39,
  "version": 1,
  "editable": false,
  "timezone": "browser",
  "time": { "from": "now-1h", "to": "now" },
  "refresh": "30s",
  "templating": {
    "list": [
      {"name": "env", "type": "custom", "query": "stage", "current": {"text": "stage", "value": "stage"}},
      {"name": "service", "type": "custom", "query": "modernized-api,async-worker", "current": {"text": "modernized-api", "value": "modernized-api"}},
      {"name": "facility", "type": "textbox", "query": "", "current": {"text": "*", "value": "*"}}
    ]
  },
  "panels": [
    {
      "id": 1,
      "type": "stat",
      "title": "API latency p95 (s)",
      "targets": [ {"expr": "service:api_latency_p95_seconds{deployment_environment=\"$env\",service=~\"$service\",facility=~\"$facility\"}"} ],
      "fieldConfig": {"defaults": {"unit": "s", "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null},{"color": "orange", "value": 1},{"color": "red", "value": 2}]}}}
    },
    {
      "id": 2,
      "type": "stat",
      "title": "API latency p99 (s)",
      "targets": [ {"expr": "service:api_latency_p99_seconds{deployment_environment=\"$env\",service=~\"$service\",facility=~\"$facility\"}"} ],
      "fieldConfig": {"defaults": {"unit": "s", "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null},{"color": "orange", "value": 2},{"color": "red", "value": 3}]}}}
    },
    {
      "id": 3,
      "type": "stat",
      "title": "API error ratio",
      "targets": [ {"expr": "service:api_error_ratio{deployment_environment=\"$env\",service=~\"$service\",facility=~\"$facility\"}"} ],
      "fieldConfig": {"defaults": {"unit": "percentunit", "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null},{"color": "orange", "value": 1},{"color": "red", "value": 5}]}}}
    },
    {
      "id": 4,
      "type": "stat",
      "title": "ORCA error ratio",
      "targets": [ {"expr": "service:orca_error_ratio{deployment_environment=\"$env\",service=~\"$service\",facility=~\"$facility\"}"} ],
      "fieldConfig": {"defaults": {"unit": "percentunit", "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null},{"color": "orange", "value": 1},{"color": "red", "value": 5}]}}}
    },
    {
      "id": 5,
      "type": "stat",
      "title": "DB pool utilization",
      "targets": [ {"expr": "service:db_pool_utilization{deployment_environment=\"$env\",service=~\"$service\",facility=~\"$facility\"}"} ],
      "fieldConfig": {"defaults": {"unit": "percentunit", "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null},{"color": "orange", "value": 70},{"color": "red", "value": 90}]}}}
    },
    {
      "id": 6,
      "type": "stat",
      "title": "JMS queue depth",
      "targets": [ {"expr": "service:jms_queue_depth{deployment_environment=\"$env\",service=~\"$service\",facility=~\"$facility\"}"} ],
      "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null},{"color": "orange", "value": 50},{"color": "red", "value": 200}]}}}
    },
    {
      "id": 7,
      "type": "stat",
      "title": "SSE disconnect ratio",
      "targets": [ {"expr": "service:sse_disconnect_ratio{deployment_environment=\"$env\",service=~\"$service\",facility=~\"$facility\"}"} ],
      "fieldConfig": {"defaults": {"unit": "percentunit", "thresholds": {"mode": "percentage", "steps": [{"color": "green", "value": null},{"color": "orange", "value": 1},{"color": "red", "value": 3}]}}}
    }
  ],
  "annotations": {"list": []}
}
