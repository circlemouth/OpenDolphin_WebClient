# Charts UI 改善案C（UIのみ / 機能変更禁止）

RUN_ID: 20260207T121235Z-cmd_20260207_13_sub_3-charts-ui-proposal-c

証跡:
- screenshots/1366x768-current.png
- screenshots/1440x900-current.png
- screenshots/1366x768-mock.png
- screenshots/1440x900-mock.png

## 現状の課題（UIのみ / 5-10行）
1. 上部（タイトル説明 + RUN_ID/flags + 監査/配信など）の縦占有が大きく、1366x768 では主作業（SOAP/Timeline）が初期表示で埋もれやすい。
2. StatusPill が横に長く、重要度の差（必須/参考）が見た目で均質になり、視線の優先順位が付けにくい。
3. 主要操作（保存/送信/印刷など）の位置が情報群と同じ密度で並び、操作導線と参照情報が混線しやすい。
4. 右ペイン（参照）とユーティリティ（ドック）が同時に存在するため、横幅の圧迫と視線移動が増えやすい。
5. カード境界（影/角丸/余白）が強く、情報密度に比べて視覚ノイズが勝つ場面がある。
6. 「どこが編集領域か」を示す視覚的な帯（入力エリアの輪郭/背景差）が弱く、迷いが発生しやすい。

## 改善案C（UIのみ）
### ねらい
- 上部を「1行サマリ」に圧縮して、初期表示で主作業（中央）を最大化。
- 情報の優先順位を UI の階層（帯/密度/色）で揃え、視線移動と誤操作を減らす。

### 提案C: “Sticky 1-line Summary + 3カラム + 右ドック”
1. **上部ヘッダを 1行サマリへ**
   - 患者/受付/重要flags/RUN_ID/安全（禁忌・注意）を 1行に集約し sticky 化。
   - 詳細（説明文/監査詳細/配信詳細）は 2段目（折りたたみ）へ退避。
2. **ワークスペースを 3カラムへ再整理（左=参照 / 中央=入力 / 右=参照）**
   - 中央（入力）を “編集帯” として背景差・境界を弱く付け、ここが主戦場であることを明示。
3. **右端は「ユーティリティドック（アイコン列）」に寄せる**
   - 同時展開の前提を崩し、通常時は最小幅のドックで存在感を抑える。
4. **ピル（StatusPill）の圧縮と階層化**
   - 重要flags は短ラベル＋アイコンで 1行に収め、詳細値は hover/詳細行で補う。
5. **密度規約（余白/影/角丸）を Charts 範囲で統一**
   - カードの影を弱め、境界はボーダー主体へ。余白を 1段階詰め、スクロール量を削減。

## UIのみ根拠（機能変更に該当しない理由）
- 1: 上部サマリ化は既存データの**表示順/表示量/折りたたみ**の調整であり、API・状態遷移・業務ロジックは不変。
- 2: 3カラム再整理は**レイアウト（CSS grid）**の変更で、データ取得・保存・監査イベント生成には手を入れない。
- 3: ユーティリティドックは**見せ方（常時幅/初期開閉）**の変更で、各機能の中身（操作）を追加しない。
- 4: ピル圧縮は**ラベル/タイポ/アイコン/ツールチップ**の UI 表現で、flags 定義や判定ロジックは不変。
- 5: 密度規約は**スタイル**のみで、機能・データ・導線の追加はしない。

## 懸念（UI観点）
- sticky 化によりキーボードフォーカス/スキップリンク/見出し階層が崩れないよう a11y を再点検する。
- 既存の “説明文” を畳む場合、初見ユーザーのオンボーディングは別導線（ヘルプ/ツールチップ）で補う必要がある。

## 実装コスト見積（目安）
- S: ピル圧縮・余白調整（CSS中心）
- M: 1行サマリ + 3カラム再整理（ChartsPage 周辺の構造/レスポンシブ調整）
