# Charts UI Proposal A (UI-only)

## Metadata

- RUN_ID: 20260207T120517Z-cmd_20260207_13_sub_1-charts-ui-proposal-A
- Verified at (UTC): 2026-02-07T12:05:17Z
- Repo: OpenDolphin_WebClient master @ bb4d26377
- Scope: UI only (no API/logic/data changes)

## 現状課題（5-10行）

1. 中央のSOAP入力と周辺情報/操作（右ドック、上部バー、患者情報）が同じ強さで並び、視線誘導が弱い。
2. 主要アクション（保存/送信/印刷/ユーティリティ起動等）の位置が分散し、状態（draft/dirty/lock）が見落とされやすい。
3. 右ドックのタブ/内容が長く、切替時に「今どこを操作しているか」が曖昧になり誤操作を誘発しうる。
4. スクロールが縦に長くなりがちで、入力欄の見出し・現在セクションが視界から消えやすい。
5. エラー/警告/成功などのメッセージが散発し、重要度の差（致命/注意/情報）が視覚的に揃っていない。
6. ショートカットが存在しても画面上で発見しづらく、学習コストが下がりにくい。

## 改善案A（UIのみ）

A1. **「入力（SOAP）」を最優先の視覚階層に**
- 中央カラムの余白/見出し/区切りを整理し、SOAPの各セクション（S/O/A/P）に“今入力中”の強調（細い左ライン+ヘッダ固定）を付ける。
- UIのみ根拠: DOM構造/スタイル/スクロール補助の変更であり、保存/送信ロジックは不変。

A2. **状態バー（draft/dirty/lock）を1箇所に集約**
- 「未保存」「署名確定」「同期中」「保存成功」などを上部の1つのステータス帯に統一し、色/アイコンでトーンを統一。
- UIのみ根拠: 表示の集約・ラベル整形であり、状態判定ロジック自体は流用。

A3. **右ドックは “作業モード” の見出しを強める**
- 現在タブ名をドック上部に大きめに表示し、タブ列はアイコン+短名（ツールチップで正式名）。
- UIのみ根拠: タブUIの見た目/ラベル/配置変更のみ。データ取得/APIは変更しない。

A4. **主要アクションの配置を固定（誤クリック耐性）**
- 保存/送信/ユーティリティ開閉など頻出操作を、上部アクションバー右側に固定し、危険操作は間隔を広げる。
- UIのみ根拠: ボタン配置とスタイル調整のみ。機能追加はしない。

A5. **ショートカットを“見える化”**
- ユーティリティ開閉（例: Ctrl+Shift+U）などをボタンのサブラベルとして常時表示（コンパクト表示ではホバー表示）。
- UIのみ根拠: ラベル追加のみ。ショートカット実装自体は既存のまま。

## 証跡

- screenshots:
  - Viewport（要件: 1366x768 / 1440x900）:
    - charts-1366x768-viewport.png / charts-docked-1366x768-viewport.png
    - charts-1440x900-viewport.png / charts-docked-1440x900-viewport.png
  - Full page（参考）:
    - charts-1366x768.png / charts-docked-1366x768.png
    - charts-1440x900.png / charts-docked-1440x900.png

## 懸念 / 実装コスト（概算）

- 1-2日: スタイル/レイアウト変更（CSS-in-JSの整理、見出し固定、ステータス帯の共通化）
- 追加0.5-1日: 右ドックのタブ表現（アイコン化、ツールチップ、現在地強調）
- リスク: 既存のcompact flags（VITE_CHARTS_COMPACT_UI等）との整合。flagごとの差分を最小化する設計が必要。
