# Charts 左カラムと固定フッター干渉解消ノート（2025-11-03）

## 背景
- Charts 画面左カラム（今日の流れ／イベントタイムライン）でスクロール終端のカードが固定アクションフッター（保存／署名ボタン群）と重なり、内容確認や操作が困難だった。
- `LeftRail` は `position: sticky` かつ `overflow-y: auto` で構成されているが、スクロール領域にフッター高さ分の余白がなく、最下部がビューポート下端に吸着していた。

## 実装概要
- 対象ファイル: `web-client/src/features/charts/pages/ChartsPage.tsx`
  - `LeftRail` に `padding-bottom` と `scroll-padding-bottom` を `calc(var(--charts-footer-height, 0px) + 24px)` で新設し、固定フッター高さ＋余裕分を常に確保。
  - 余白追加に伴い `box-sizing: border-box` を指定し、要素の総高さが `calc()` 指定を超えないよう調整。
  - モバイル幅（`max-width: 999px`）でも 24px の下余白と `scroll-padding-bottom` を付与し、縦積みレイアウト時の読みやすさを維持。

## 再現手順
1. Charts 画面を開き、イベントタイムラインに複数カードが存在する状態を用意。
2. 左カラムをスクロールして末尾の「イベント詳細」カードを表示。
3. 画面下部の保存／署名ボタンを含む固定フッターがタイムライン末尾に重なり、内容の選択・コピー・フォーカスが阻害されることを確認。

## 確認結果
- Chrome 130（macOS 14.6, ローカル開発ビルド）で修正後に再度スクロールし、末尾カード全体が常に可視領域内に収まることを確認。
- キーボード操作: タイムライン項目を `Tab` で進めた後、固定フッターの保存ボタンにフォーカス → `Shift+Tab` で直前のタイムライン項目へ戻る際にフォーカスリングが遮られないことを確認。
- スクリーンリーダー影響: DOM 構造や ARIA 属性は変更しておらず、フォーカス移動時の `scrollIntoView` で `scroll-padding-bottom` が適用されるため読み上げ順に変化なし。
- 自動テスト: 該当 UI の Storybook／E2E が未整備のため実行なし。`npm run lint` は既存未解消エラー（`Button.tsx` の未使用変数など）で失敗するが、本差分によるものではない。

## 影響範囲とフォローアップ
- 左カラムのみにスタイル追加しており、`CentralColumn` `RightRail` には変更なし。
- Safari（macOS）と Edge（Windows）での余白表示を QA グループへ引き継ぎ（スクロールバー表示幅が異なるケースを確認予定）。
- 追加のアクセシビリティ改善として、タイムライン末尾までのスクロールをショートカットで行うケースを想定し、必要ならヘルパーリンク（`ページ先頭へ戻る`）検討を backlog に登録する。
