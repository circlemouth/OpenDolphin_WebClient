# カルテ全般管理画面 設計ドラフト（RUN_ID=`20251130T120000Z`）

⸻

1. カルテ全般の管理画面の役割

この管理画面は、
	•	「日々の診療で使う画面（受付・カルテ・オーダー）」の
裏側のルール・マスタ・権限を決める場所

というポジションです。

主にやることは：
	1.	ユーザー（医師・看護師・事務）の登録と権限設定
	2.	診療フロー（受付ステータス・診療終了・ORCA連携）のルール設定
	3.	診療録の記載方式・テンプレ・セット入力の管理
	4.	WebORCAとの連携設定（サーバー情報・マスタ同期・薬剤⇔病名チェック設定）
	5.	自費診療のメニュー設定
	6.	DICOM連携の設定
	7.	セキュリティ／ログ／バックアップなどのシステム全般設定

これを踏まえて、管理メニューを「左メニュー＋右に詳細」という構成で考えます。

⸻

2. 管理メニュー全体の構成イメージ

┌──────────────────────────────┬──────────────────┐
│ 左：管理メニュー一覧                        │ 右：選択中の設定画面 │
│  1. 施設・システム基本設定                  │                      │
│  2. ユーザー／権限管理                       │                      │
│  3. 受付・診療ステータス設定                │                      │
│  4. カルテ記載設定（SOAP/フリー・テンプレ等）│                      │
│  5. オーダー・セット管理                     │                      │
│  6. ORCA連携・マスタ設定                     │                      │
│  7. 自費診療メニュー設定                     │                      │
│  8. DICOM連携設定                            │                      │
│  9. セキュリティ・ログ・バックアップ         │                      │
│ 10. 画面表示・カスタマイズ設定               │                      │
└──────────────────────────────┴──────────────────┘

以下、それぞれのメニューごとに「何ができるか」「どんな画面か」を書いていきます。

⸻

3. 施設・システム基本設定

機能
	•	施設情報
	•	医療機関名、住所、電話、FAX
	•	ロゴ画像
	•	診療科設定
	•	内科／小児科…などの診療科一覧
	•	表示順・略称
	•	診療日・受付時間帯の設定
	•	外来の曜日・受付時間
	•	午前・午後などの区分（受付画面での絞り込みに使う）
	•	システム共通設定
	•	日付フォーマット
	•	タイムアウト時間（無操作で自動ログアウトするまでの時間）
	•	ログイン失敗時のロックルール など

画面構成イメージ

右側にタブを切って、
	•	[施設情報]
	•	[診療科]
	•	[診療日・時間]
	•	[その他]

みたいに分けてフォーム入力＋保存ボタン、というシンプルな構成。

⸻

4. ユーザー／権限管理


「誰が医師で、誰が看護師で、誰が事務で、それぞれどこまで権限を持つか」
「看護師がオーダー入力 → 医師が確認した証拠を残す」

を実現するパートです。

4-1. ロール（役割）設定
	•	ロール種別の定義
	•	医師
	•	看護師
	•	事務（受付／医事）
	•	システム管理者
	•	など
	•	ロールごとに許可する操作
	•	例：
	•	診療録の閲覧／編集／削除可否
	•	オーダー入力の可否
	•	オーダー承認（署名）の可否
	•	受付情報編集の可否
	•	ORCA送信の実行可否
	•	管理画面へのアクセス可否

※細かく「項目単位」で権限を持たせるか、「操作単位」で持たせるかは設計次第ですが、少なくとも「看護師の入力を医師が承認する」という流れを作れるようにする。ただし、承認時代はなるべく医師の手を煩わせないように、毎日０時に自動承認する、といった設定ができるようにする。だれが記載し、誰が承認したことになるかを必ず記録として残せるようにすること。この保存要件はカルテ本体と同様であるい。

4-2. ユーザー管理
	•	ユーザー一覧
	•	氏名、ログインID、ロール、所属診療科、在職／退職フラグ
	•	ユーザー詳細
	•	ログイン情報
	•	所属（何科か）
	•	個別設定
	•	初期表示カルテ方式（SOAP／フリー）
	•	よく使う診療科・病名・セットの初期表示
	•	パスワード初期化・ロック解除
	•	パスワードポリシー（最低文字数、期限 etc.）は「セキュリティ設定」と連携

⸻

1. 受付・診療ステータス設定

受付管理画面・カルテ画面で使う「状態」の一覧と遷移ルールを管理。

機能
	•	ステータス一覧
	•	例）受付済／診察待ち／診察中／検査中／診察終了／会計中／会計済み
	•	表示色・アイコン
	•	どの画面のどのタブに出すか（受付状況タブ／診察終了タブなど）
	•	ステータス遷移ルール
	•	「受付登録時 → 受付済」
	•	「医師がカルテを開いたとき → 診察中」
	•	「診療終了ボタン押下 → 診察終了」
	•	「ORCA送信成功 → 会計済み」
	•	手動変更の制限
	•	どのロールがどのステータスに変更可能か

画面構成
	•	左にステータス一覧
	•	クリックすると右側に詳細（表示名・色・遷移ルール etc.）がフォームで出る形。

⸻

6. カルテ記載設定（SOAP／フリー・テンプレ等）

ここは
	•	「カルテ入力の好み（SOAP派／フリー派）」
	•	「テンプレートやタグ」
	•	「患者メモの扱い」

を決めるところです。

6-1. 診療録方式の設定
	•	システム全体のデフォルト
	•	初期表示：SOAP／フリー
	•	SOAPとフリー両方を常時表示するか、モード切替にするか
	•	ユーザー単位の上書き設定可否
	•	「自分だけフリーモードをデフォルトにしたい」など

6-2. 診療録テンプレート管理
	•	テンプレート一覧
	•	診療科別／病名別／目的別に分類
	•	テンプレート編集画面
	•	SOAPのS/O/A/Pそれぞれに定型文を入れる
	•	フリー入力用の定型文
	•	利用範囲設定
	•	施設全体で共有するテンプレ
	•	特定医師だけの個人テンプレ

6-3. サマリ入力設定
	•	サマリ欄の項目定義
	•	「長期経過」「治療目標」「問題リスト」など、サマリに使うフィールドを設定
	•	サマリ欄の表示位置
	•	カルテ画面のどのタブに出すか（専用タブ or 診療録タブ内）

6-4. 患者メモ設定
	•	メモのカテゴリ
	•	一般メモ（受付・診察共通）
	•	医師専用メモ
	•	注意事項（アラートではないが強調表示したいもの）
	•	閲覧・編集権限
	•	例：受付は一般メモのみ編集可、医師はすべて閲覧可、など

⸻

7. オーダー・セット管理

ここは
	•	処方セット
	•	検査セット
	•	病名＋オーダーの診療セット
	•	医師個人のお気に入りセット

など、日々の診療でよく使う「ひとまとめ入力」を管理する場所です。

7-1. セットの種類の定義
	•	セット種別：
	•	診療セット（病名＋処方＋検査など一式）
	•	処方セット（薬の組み合わせ）
	•	検査セット
	•	接種セット（予防接種）
	•	セット単位で、
	•	利用可能なロール
	•	利用可能な診療科
	•	表示順序
を設定。

7-2. セット作成／編集画面
	•	セット名
	•	対象診療科・ロール（誰が使えるか）
	•	セット内容編集
	•	薬：薬剤コード／用量／回数／日数／用法
	•	検査：検査コードのリスト
	•	処置／リハ／予防接種：必要なオーダーのリスト
	•	必要に応じて紐付け推奨病名
	•	医師個人のお気に入りフラグ
	•	「このセットは●●先生用」、など

※ 診療中に「今の入力をセット化」したときに、ここにレコードが増えるイメージです（カルテ画面側はあくまで“登録”トリガー、詳細編集は管理画面で）。

7-3. 自動サジェストのロジック設定（任意）

会話で出てきた

「今入力されている病名」や「よく使うオーダー」を元に候補を上げる

の部分。
	•	サジェスト対象
	•	病名→よく使うオーダーセット
	•	患者→よく使うオーダー・処方
	•	閾値設定
	•	どれくらいの頻度で「よく使う」と判定するか
	•	表示上限
	•	上位何件まで候補に出すか


⸻

1. ORCA連携・マスタ設定

ここはWebORCAとの接続と、「適用病名マスタ」などを含めたマスタ周りを扱うところ。

8-1. 接続設定
	•	ORCAサーバーURL／ポート
	•	認証情報（ID／パスワード）
	•	タイムアウト・リトライ回数
	•	接続テストボタン（結果を表示）

8-2. マスタ同期設定
	•	病名マスタの同期タイミング
	•	薬剤マスタの同期タイミング
	•	検査・処置マスタの同期
	•	手動で「今すぐ同期」ボタン

8-3. 適用病名マスタ・薬剤⇔病名チェック設定

会話で出てきたところ：

WebORCAの「適用病名マスタ」「薬剤と病名のデータチェック」を使う。

	•	チェック機能 ON/OFF
	•	薬剤⇔病名関連マスタの参照方法
	•	チェックの厳しさ
	•	警告のみ／エラーで保存させない など
	•	エラー表示の文言（医師向けのメッセージ）

8-4. ORCA送信ルール
	•	どのタイミングでORCAに送信するか
	•	診療終了時／会計時／明細確定時 など
	•	どのオーダー／病名が送信対象になるか
	•	エラー発生時の挙動
	•	受付画面でエラーフラグ表示
	•	管理画面で詳細ログ確認

⸻

9. 自費診療メニュー設定

ユーザー要望：

保険カルテと自費カルテを切り替えられるように、自費診療カルテも扱いたい。

機能
	•	自費メニュー一覧
	•	自費項目名
	•	金額（税込／税別）
	•	所要時間の目安
	•	文書作成が必要なものかどうか など
	•	カテゴリ分け
	•	美容／健診／自由診療（AGAなど）…
	•	自費診療セット
	•	自費メニュー＋オーダー＋文書テンプレをまとめたセット
	•	保険カルテとの住み分けルール
	•	自費カルテ側では保険病名を使わない／別タグにする etc.

画面構成
	•	上部にカテゴリタブ
	•	下に項目一覧＋編集フォームというシンプルな構成。

⸻

10. DICOM連携設定

ユーザー要望：

DICOMサーバーと通信して画像を取り込めるようにしたい。

機能
	•	DICOMサーバー接続情報
	•	AE Title
	•	ホスト名／IP
	•	ポート番号
	•	モダリティごとの設定
	•	CT/MR/CR/US などどのモダリティを対象にするか
	•	自動取得ルール
	•	患者ID／氏名／生年月日でマッチングするか
	•	撮影日から何日以内の検査を“今日の診療候補”として表示するか

⸻

11. セキュリティ・ログ・バックアップ

ここはシステム全体の“守り”の部分。

11-1. セキュリティ設定
	•	パスワードポリシー
	•	文字数／有効期限／履歴
	•	ログイン制限
	•	連続失敗回数
	•	ロック時間
	•	自動ログアウト
	•	無操作◯分でログアウト
	•	IP制限（必要なら）
	•	院内ネットワークのみからアクセス可など

11-2. 監査ログ／操作ログ
	•	ログの種類
	•	ログイン／ログアウト
	•	診療録表示・編集・削除
	•	オーダー入力・変更・削除・承認
	•	ORCA送信
	•	管理設定変更
	•	ログ閲覧画面
	•	条件で検索：ユーザー／患者／操作種別／期間 など
	•	ログの保存期間設定

11-3. バックアップ・リストア設定
	•	定期バックアップのスケジュール
	•	保存先設定
	•	手動バックアップ実行ボタン
	•	復元手順（実行は慎重に：権限を絞る）

⸻

12. 画面表示・カスタマイズ設定

最後に「見た目・使い勝手」を調整するためのエリア。

機能
	•	受付一覧の表示列の選択・順番
	•	氏名／年齢／ステータス／メモアイコン等をオンオフ
	•	カルテ画面のタブ構成カスタマイズ
	•	画像タブを使わない施設は非表示にする など
	•	カラー設定
	•	ステータスごとの色（受付中は青、診察終了は緑…）
	•	初期表示タブ設定
	•	カルテ開いたときにどのタブを最初に開くか
（診療録／オーダー／サマリなど）

⸻

まとめ

ここまでのやり取りをベースにすると、
カルテ全般の管理画面に必要なのはざっくり以下の塊です：
	1.	施設・システムの基本設定
	2.	ユーザー／ロール（医師・看護師・事務）の権限設定
	3.	受付〜診察〜診察終了〜ORCA連携までのステータス設計
	4.	診療録の記載方式（SOAP／フリー）・テンプレ・サマリ・患者メモ設定
	5.	処方／オーダー／診療セット・医師お気に入りセットの管理
	6.	WebORCA連携（接続・マスタ同期・適用病名チェック・送信ルール）
	7.	自費診療カルテを支える自費メニューと自費セットの設定
	8.	DICOM連携の各種設定
	9.	セキュリティ・ログ・バックアップなどのシステム保全
	10.	各画面の表示項目・色・初期タブなどのカスタマイズ

これらを「左メニュー＋右詳細」の管理画面に整理しておくと、
運用中に少しずつ調整したいところ（セットの中身、権限、見た目など）を、
安全にメンテしやすい構成になると思います。

