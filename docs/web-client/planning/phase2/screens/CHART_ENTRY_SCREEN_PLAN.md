# カルテ記入画面 設計ドラフト（RUN_ID=`20251130T120000Z`）
個別カルテ画面は、要素が一番ぎゅっと集まる「本丸」です。
受付管理画面から患者を選んで開いたときに出てくる、“1人の患者について今日の診療も過去の情報も全部扱う画面”という前提で整理します。

⸻

1. 個別カルテ画面の位置づけと全体イメージ

役割
	•	当該患者の
	•	診療録入力（フリー／SOAP切替）
	•	保険病名の登録と転帰入力
	•	処方・注射・リハビリ・予防接種・検査・処置・文書オーダー
	•	過去の診療サマリ／処方・オーダー履歴の参照
	•	保険カルテ／自費カルテの切り替え
	•	DICOM画像の参照・貼り付け
	•	を1つの画面（ブラウザ内の“擬似タブ”）で完結させる。

ざっくりレイアウト（テキストイメージ）

┌──────────────────────────────────────────┐
│ [患者基本情報]  [保険カルテ｜自費カルテ 切替]  [今日の日付・担当医] │ ヘッダー
├──────────────────────────────────────────┤
│ [診療録] [病名] [オーダー・処方] [結果・履歴] [画像(DICOM)] [文書] [サマリ] │ タブ
├─────────────────────────────┬────────────┤
│ タブごとのメイン領域                     │ 右サイドバー             │
│ ・診療録入力（フリー／SOAP）             │ ・患者メモ               │
│ ・オーダー一覧／入力                     │ ・当日の要チェック項目   │
│ ・結果表示など                           │ ・よく使うオーダー候補   │
└─────────────────────────────┴────────────┘


⸻

2. 画面上部ヘッダーで必要なもの

2-1. 患者基本情報バー

常に画面上部に固定して表示します。
	•	患者氏名・カナ
	•	年齢・生年月日・性別
	•	患者ID／診察券番号
	•	連絡先の一部（電話・携帯のアイコン程度）
	•	注意フラグ（アレルギー、要配慮事項があればアイコンで表示）
	•	受付情報
	•	今日の受付番号／受付時間
	•	今日の診療科・担当医

2-2. 保険／自費カルテの切替 UI

ユーザー要望ど真ん中の部分です。
	•	トグルボタン：
	•	[保険カルテ] [自費カルテ] の2択（選択中を強調）
	•	内部的には
	•	診療録
	•	オーダー
	•	病名（保険病名は保険カルテ側のみ）
	•	をモード別に分けて保持するイメージです。

※ 自費カルテ側では、保険病名や保険オーダーは扱わず、自費メニュー用オーダーや自費用のテンプレートセットを中心に表示／入力。

2-3. 操作系
	•	「保存」ボタン
	•	「一時保存（下書き）」ボタン
	•	「診療終了」ボタン
→ 押したタイミングで受付管理画面上のステータスを「診療終了」に変更し、WebORCA連携のトリガーにもできる
	•	「署名」ボタン（医師のみ表示）
	•	看護師が入力したオーダー・診療録を医師が確認した証跡を残す

⸻

3. タブ構成ごとの必要機能

ここからは、中央のタブごとに、必要な機能をもれなく整理します。

⸻

3-1. 診療録タブ（フリー入力／SOAP切替）

3-1-1. 入力方式の切り替え
要件：

フリー入力方式とSOAP方式がある。
SOAPの４系統＋フリーで５つの欄。
フリー派とSOAP派で切り替えられるようにしたい。

UI案：
	•	診療録タブ内に方式切り替えトグル
	•	[フリー入力] [SOAP入力]
	•	初期表示方式はユーザー単位の設定で記憶（管理画面で設定可能に）

実体としては常に5フィールド持っておく：
	•	S：主観的情報（Subjective）
	•	O：客観所見（Objective）
	•	A：評価・診断（Assessment）
	•	P：計画（Plan）
	•	F：フリーコメント欄

表示の仕方：
	•	SOAPモード
	•	S/O/A/P/F 各テキストエリアを縦に並べてラベル付きで表示
	•	フリーモード
	•	大きな1つのテキストエリアを表示（実体はF欄に保存）
	•	SOAPフィールドは裏で空のまま or 必要なら後から編集可能に

3-1-2. テンプレート・定型文
診療効率の観点から：
	•	診療録テンプレート
	•	病名別や疾患グループ別の定型SOAP／フリーテキスト
	•	「テンプレ呼出」ボタンで挿入
	•	自己登録テンプレート
	•	医師ごとにマイテンプレを登録
	•	診療中に入力した内容をそのまま「この内容をテンプレに登録」もできると便利

3-1-3. 過去診療録への簡易アクセス
ユーザーの「これまでのサマリが見たい」要望に対応：
	•	今日の診療録編集欄の下か横に「過去数回分の診療要約」をサイド表示
	•	前回・前々回の診療日と主病名、SOAPのA/Pなど
	•	詳細は「前回カルテを開く」ボタンで別ビュー表示

⸻

3-2. 病名タブ（保険病名＋転帰管理）

ユーザー要望：

ORCA側に送る保険病名をカルテ側で入力できる欄が必要。
その病名ごとの「治癒」「終了」「中止」といった転帰入力も必要。

3-2-1. 病名一覧
	•	今日の診療で使用する保険病名一覧
	•	列例：
	•	病名
	•	開始日
	•	転帰（未設定／治癒／中止／終了…）
	•	転帰日
	•	ORCA送信対象フラグ
	•	過去から継続中の病名も同じ一覧で管理し、必要に応じて今日の診療に紐付け

3-2-2. 病名の追加・編集
	•	病名検索
	•	WebORCAの病名マスタを検索（コード／名称）
	•	直接入力（病名文字列）も可能（運用でどこまで認めるかは要検討）
	•	転帰入力
	•	プルダウンで「治癒」「中止」「終了」「不変」などから選択
	•	転帰日をカレンダーで指定

3-2-3. オーダーとのひも付け・チェック
事前に話した「薬と病名の適用チェック」「病名未設定オーダーの警告」をここに集約：
	•	「オーダー未紐付病名一覧」エリア
	•	今日の処方・検査・処置の中で、保険病名との関連付けがないものをリスト
	•	クリックすると、候補の保険病名リストが出て選択可能
	•	WebORCAの適用病名マスタを用いた候補表示
	•	オーダー側で薬剤を選んだときに、病名候補をこのタブに反映
	•	逆に病名を選択したときに、その病名でよく使うオーダー候補をオーダータブ側に反映

⸻

3-3. オーダー・処方タブ

ここが一番ボリュームが出るところです。

3-3-1. サブタブ構成
1つの「オーダー」タブの中をさらに分割：
	•	[処方薬]
	•	[注射薬]
	•	[検査]
	•	[処置／指導]
	•	[リハビリ]
	•	[予防接種]
	•	[文書オーダー]（診断書・紹介状など）

3-3-2. 共通の入力項目
すべてのオーダーに共通する基本フィールド：
	•	実施日（実施予定日）
	•	回数・期間
	•	担当者（医師／看護師）※入力者
	•	保険／自費区分（自費カルテ側では自費メニュー一覧を表示）
	•	セット名からの呼び出し（後述）

3-3-3. 処方薬オーダー
ユーザー要望：

回数・期間・処方日数・用法などをORCAに送る前提で入力できるように。

	•	薬剤検索（WebORCAの薬剤マスタ）
	•	一般名／商品名／コード検索
	•	入力項目：
	•	用量
	•	1日回数
	•	投与日数 or 投与回数
	•	用法（毎食後、就寝前 など）
	•	追加コメント（「頓用」「増減可」など）
	•	保険病名候補表示
	•	薬を選んだ瞬間に、適用病名候補をサジェスト
	•	ここで病名を選ぶと、「病名タブ」側にも反映

3-3-4. 注射薬オーダー
	•	薬剤名（注射用）
	•	投与量
	•	ルート（皮下・筋肉・静注・点滴など）
	•	投与回数・期間
	•	実施場所・時間（外来処置室 or 病棟など）
	•	保険病名との関連付け（同様に候補表示）

3-3-5. 検査オーダー
	•	検体検査（採血・尿検査など）
	•	画像検査（X線・CT・MRI 等）
	•	生理検査（心電図など）
	•	項目選択 → 検査セット（「糖尿病セット」「定期健診セット」など）呼び出し

3-3-6. リハビリ・予防接種・文書
	•	リハビリ：
	•	種類（PT/OT/STなど）
	•	単位数／週回数／期間
	•	予防接種：
	•	ワクチン名、接種回数（○回目）、体重など（必要に応じ）
	•	文書オーダー：
	•	診断書・紹介状などの種別
	•	文書作成画面へのリンク（別タブ or ダイアログ）

3-3-7. セット入力機能（重要）
ここまでの会話で出た要件を全部まとめると、セットには3レイヤーあります：
	1.	標準診療セット
	•	疾患別（例：高血圧初診セット、糖尿病フォローセット）
	•	病名＋処方＋検査などをひとまとめ
	2.	医師個人のお気に入りセット
	•	よく使う薬の組合せ、よく使う注射・処置の組合せ
	•	処方タブを開いたときに、医師ごとの「お気に入り」エリアを上部に表示
	3.	患者・病名ごとのサジェストセット
	•	「今選択されている病名」と「これまでのオーダー履歴」を元に
よく使われているオーダーを自動で上位に表示する候補リスト
	•	例：糖尿病＋高血圧の患者なら、その組み合わせで頻出の検査セットを上に出す

セット作成のワークフロー（ユーザー要望）：
	•	診療中に普通にオーダーを入力
	•	「今入力している組み合わせをセット登録」ボタンを押す
	•	小さなダイアログで
	•	セット名
	•	自分だけ用／施設共通 など
	•	を決めて保存 → 次回以降の「セット一覧」に表示

セットの管理は別の「管理画面」で詳細に行う前提ですが、
カルテ画面側では「呼び出し」と「現在の内容から即席セット登録」ができればOK。

⸻

3-4. 結果・履歴タブ

診療録とは別に、オーダーの結果・過去のオーダー履歴をまとまって見る場所。
	•	検査結果一覧
	•	日付順・項目別・グラフ表示など
	•	処方履歴
	•	過去の処方を一覧表示し、クリックで「今日の処方にコピー」が可能
	•	オーダー履歴
	•	検査・処置・リハビリ・予防接種などの履歴
	•	「保険病名未紐付オーダー」一覧へのショートカット
→ 病名タブでの修正に飛ぶ

⸻

3-5. 画像（DICOM）タブ

ユーザー要望：

DICOMサーバーと通信して画像を取り込んで、カルテに貼り付けたい。

	•	左側：検査履歴一覧（撮影日・部位・モダリティ）
	•	右側：簡易DICOMビューア
	•	拡大縮小・階調調整・スクロール（シリーズ切替）
	•	「この画像を診療録に貼り付けメモ」ボタン
	•	診療録に「この画像を参照」リンクを残す
	•	必要に応じて代表サムネイルを埋め込む

⸻

3-6. 文書タブ
	•	紹介状、診断書、意見書などを作成・管理
	•	文書オーダータブからのオーダーに応じて、ここに下書きが自動生成されるイメージ
	•	既存テンプレート＋カルテ情報差し込みで半自動作成
	•	作成した文書のPDF表示・印刷

⸻

3-7. サマリタブ（長期経過まとめ）
	•	長期の経過をまとめる「サマリ入力」欄
	•	慢性疾患や長期フォロー患者の全体像を整理する場所
	•	タイムライン表示
	•	来院日ごとの主病名・主なオーダー・重要イベント（入院・手術など）

⸻

4. 右サイドバーで持たせたいもの

受付画面にも出した「患者メモ」などを、個別カルテ画面でも常に見えるように。
	•	患者メモ
	•	一般メモ（受付・看護・医師共通）
	•	医師専用メモ（権限で非表示も可）
	•	今日の診療チェックリスト
	•	「保険病名が1つもない」
	•	「オーダーに紐付いていない保険病名がある」
	•	「ORCA送信エラーが残っている」 などをアイコンで表示
	•	よく使うオーダー候補
	•	医師ごとのお気に入り処方リスト
	•	現在の病名から自動サジェストされた検査・処置

⸻

5. 権限・署名・ログ（カルテ画面での扱い）

先ほどのユーザー管理の話を、カルテ画面側に落とすと：
	•	看護師
	•	診療録の一部入力（予診など）
	•	オーダー入力の「案」作成（ステータス：未承認）
	•	医師
	•	診療録の最終確定（「署名」ボタン）
	•	オーダー承認（ORCAへ送る前の最終確認）
	•	事務
	•	原則閲覧のみ（必要に応じてオーダー内容の一部修正権限など）

画面上の見せ方：
	•	各診療録に「作成者」「最終更新者」「署名済／未署名」
	•	各オーダーに「入力者」「承認医」「承認日時」
	•	署名済みの診療録・オーダーは原則修正不可（訂正は「追記」として扱い、監査ログに残す）

⸻

6. あると便利な共通機能

カルテ画面全体に共通する細かいところです。
	•	キーボードショートカット
	•	F1：テンプレ呼び出し
	•	F2：セット入力
	•	Ctrl+S：保存 など
	•	自動保存（一定時間ごと／タブ遷移時）
	•	印刷（診療録やオーダー内容を紙で出す必要がある場合）
	•	画面幅に応じたレスポンシブレイアウト
	•	大きい画面ではタブ＋サイドバー
	•	小さい画面ではサイドバーを折りたたみ

⸻

まとめ

個別患者カルテ入力画面に必要なのはざっくり言うと：
	1.	ヘッダーでの「患者基本情報」と「保険カルテ／自費カルテ切替」
	2.	診療録タブでの フリー／SOAP入力切替＋テンプレート＋過去カルテ参照
	3.	病名タブでの 保険病名入力と転帰管理＋オーダーとのひも付け・チェック
	4.	オーダータブでの
	•	薬／注射／検査／処置／リハ／予防接種／文書
	•	WebORCAマスタに基づく詳細項目
	•	セット入力（標準セット・医師お気に入り・自動サジェスト）
	5.	結果・履歴タブでの 検査結果・処方／オーダー履歴閲覧
	6.	画像タブでの DICOMサーバー連携＋画像閲覧・カルテへの貼り付け
	7.	文書タブ・サマリタブでの 文書作成と長期経過まとめ
	8.	サイドバーでの 患者メモ・今日の要チェック項目・よく使うオーダー候補
	9.	医師／看護師／事務ごとの 権限・署名・ログ管理

このあたりを押さえて画面設計すれば、
受付〜診療〜ORCA連携までをスムーズにつなぐ「使えるカルテ画面」になると思います。
