# RUN_ID=`20251130T120000Z`。Web クライアントはログイン画面のみの構成に再編済みのため、関連ドキュメントは最小のハブ＋計画のセットのみを保持します。Phase2 のガバナンスチェーン（`AGENTS.md` → `docs/web-client/README.md` → `docs/server-modernization/phase2/INDEX.md` → 各 manager checklist）と同一 RUN_ID/証跡を共有し、必要な証跡は `docs/web-client/planning/phase2/logs/20251130T120000Z-login-rework.md` に記録しています。
RUN_ID=`20251202T090000Z` の screens 棚卸しを UX 草稿へ反映したため、下表に UX/Features 行と証跡ログ（`docs/server-modernization/phase2/operations/logs/20251202T090000Z-screens.md`）を追加しています。
- RUN_ID=`20251204T064209Z` では外来 API マッピング + `auditEvent` 要件を `src/outpatient_ux_modernization/03_モダナイズAPIマッピング.md` に整理し、`docs/server-modernization/phase2/operations/logs/20251204T064209Z-api-gap.md` に gap を記録しています。
- RUN_ID=`20251204T120000Z` では `web-client/src/libs/http/httpClient.ts` の `OUTPATIENT_API_ENDPOINTS` を定義し、`docs/web-client/architecture/web-client-api-mapping.md`・`docs/web-client/ux/ux-documentation-plan.md` に `resolveMasterSource`/監査メタ図を追加、`docs/server-modernization/phase2/operations/logs/20251204T120000Z-integration-design.md` と `artifacts/webclient/ux-notes/20251204T120000Z-integration-design.md` を証跡としています。
- RUN_ID=`20251204T210000Z` では `src/outpatient_ux_modernization/04C2_WEBクライアントAPI統合実装.md` に実装計画を整理し、`docs/web-client/ux/reception-schedule-ui-policy.md`/`docs/web-client/ux/ux-documentation-plan.md` に接続フロー図と差分を盛り込んだ上で `docs/server-modernization/phase2/operations/logs/20251204T210000Z-integration-implementation.md` に API パス一覧・telemetry funnel 実装予定を記録しています。
- RUN_ID=`20251204T230000Z` では ReceptionPage/OrderConsole を画面直下の `ToneBanner` + `ResolveMasterBadge` へ再配置し、`missingMaster` 入力/メモを OrderConsole に集中させて `aria-live` を一元化した上で `web-client/src/features/reception/styles.ts` に `tone-banner`/`resolve-master`/`status-badge` セレクタを移動し Charts/Patients とトーンを共有しています。証跡: `docs/server-modernization/phase2/operations/logs/20251204T230000Z-reception-ux.md` + `artifacts/webclient/ux-notes/20251204T230000Z-reception-ux-implementation.md` + `docs/web-client/ux/reception-schedule-ui-policy.md`。
- RUN_ID=`20251205T153000Z` では DocumentTimeline/PatientsTab/OrcaSummary に `getChartToneDetails` を用いた tone banner と `dataSourceTransition=server` 表示を再共有し、OrderConsole の missingMaster banner も `ToneBanner` + `aria-live` で reception と一致させました。証跡: `docs/server-modernization/phase2/operations/logs/20251205T153000Z-charts-orca.md` + `artifacts/webclient/ux-notes/20251205T153000Z-charts-ui-audit.md` + `docs/web-client/ux/ux-documentation-plan.md`。
- RUN_ID=`20251206T144901Z` でログイン後の UI シェルを追加し、Reception / Charts / Outpatient mock の遷移を接続（デモ用ナビゲーション）。証跡: `docs/web-client/planning/phase2/logs/20251206T144901Z-screen-routing.md`。
- RUN_ID=`20251205T133848Z` では Stage Charts→Patients QA を試行。`stage.open-dolphin` が DNS で解決できず `/api01rv2/claim/outpatient/*` / `/orca21/medicalmodv2/outpatient` へ到達できなかったため `missingMaster`/`cacheHit`/`dataSourceTransition=server` の tone banner を現地で確認できず、`docs/server-modernization/phase2/operations/logs/20251205T133848Z-charts-qa.md` と `artifacts/webclient/e2e/20251205T133848Z-charts/`（ログ/スクリーンショット/storyboard）に証跡を残しました。Stage DNS/ネットワークの復旧後に同 RUN_ID を再利用して再検証予定です。
- RUN_ID=`20251208T124645Z` で server-modernized に `/api01rv2/claim/outpatient/mock` / `/orca21/medicalmodv2/outpatient` を stub 実装し、`runId/dataSourceTransition/cacheHit/missingMaster` 付きレスポンスと `artifacts/api-stability/20251208T124645Z/outpatient/` フィクスチャを整備しました。証跡: `docs/server-modernization/phase2/operations/logs/20251208T124645Z-api-gap-implementation.md`。
- RUN_ID=`20251208T124645Z`（UI degrade path / MSW）で Outpatient Mock ページの異常系を再現。MSW fulfill で `cacheHit=true & missingMaster=false` / `cacheHit=false & missingMaster=true` を注入し、ToneBanner・ResolveMasterBadge・telemetry funnel がシナリオ値を反映することを確認（非改修・検証済み）。証跡: `docs/server-modernization/phase2/operations/logs/20251208T124645Z-ui-degraded-path.md`（スクショ: `artifacts/webclient/e2e/20251208T124645Z-outpatient-mock/*.png`）。
- RUN_ID=`20251208T163000Z` では stub 200 確認の再走を実施したが、`/api01rv2/claim/outpatient/mock` と `/orca21/medicalmodv2/outpatient` は **401 Unauthorized** に変化（X-Trace-Id: fe859f97-15de-416a-a3d5-833593af2a47 / 6014886b-4ad1-4df9-8bd5-37df5d77fbd9）。WAR 配置済みで 404 は解消したが、Basic 認証または seed ユーザー不一致が原因と推定。証跡: `docs/server-modernization/phase2/operations/logs/20251208T163000Z-integration-qa.md`、`artifacts/webclient/e2e/20251208T163000Z-investigation/`。UI/telemetry 巡回は未実施（次 RUN へ持ち越し）。
- RUN_ID=`20251208T170000Z` では `dolphindev` MD5 ヘッダで認証したものの、`/api01rv2/claim/outpatient/mock` / `/orca21/medicalmodv2/outpatient` は **404 Not Found** に戻った。`web.xml` の `resteasy.resources` に対象リソースが未列挙で WAR がリクエストをルーティングできていないと推定。Basic 版は 401 継続。証跡: `docs/server-modernization/phase2/operations/logs/20251208T170000Z-integration-qa.md`、`artifacts/webclient/e2e/20251208T170000Z-auth-fix/`。UI/telemetry は未実施。
- RUN_ID=`20251208T124645Z` ローカル server-modernized dev proxy（MSW OFF, `VITE_DEV_PROXY_TARGET=http://localhost:9080/openDolphin/resources`）で `/api01rv2/claim/outpatient/mock` / `/orca21/medicalmodv2/outpatient` が **200 OK**。`runId=20251208T124645Z`, `dataSourceTransition=server`, auditEvent を取得（mock: cacheHit=false/missingMaster=false, medical: cacheHit=true/missingMaster=false）。証跡: `docs/server-modernization/phase2/operations/logs/20251208T124645Z-dev-proxy-validation.md`（ローカル節） / スクショ: `artifacts/webclient/e2e/20251208T124645Z-local/`。

## Phase2 ガバナンス必読チェーン
> 1. `AGENTS.md`（全体ガバナンス）
> 2. `docs/web-client/README.md`（本ハブ）
> 3. `docs/server-modernization/phase2/INDEX.md`
> 4. `docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md`（Web クライアント担当）
> 5. 担当者からのワーカー指示／報告で RUN_ID と証跡を同期する（本対応では RUN_ID=`20251130T120000Z` を維持）。

## ステータス定義
- **Active**: 現行のログイン構成と直接関係があり、本対応 (RUN_ID=`20251130T120000Z`) の範囲内で更新されているもの。
- **Dormant/Archive**: 本対応以前の資料はすべて削除済み。

## トラッキング対象（2025-12-03 更新）
| ドキュメント | スコープ | ステータス | 最終レビュー | 備考 / 次アクション |
| --- | --- | --- | --- | --- |
| [`docs/web-client/README.md`](../README.md) | ログイン専用ハブ | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`docs/web-client/planning/phase2/DOC_STATUS.md`](../planning/phase2/DOC_STATUS.md) | ドキュメント棚卸し | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`docs/web-client/planning/phase2/LOGIN_REWORK_PLAN.md`](../planning/phase2/LOGIN_REWORK_PLAN.md) | 実装計画 | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`docs/web-client/planning/phase2/LEGACY_ARCHIVE_SUMMARY.md`](../planning/phase2/LEGACY_ARCHIVE_SUMMARY.md) | Legacy アーカイブ | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`docs/web-client/planning/phase2/screens/RECEPTION_SCREEN_PLAN.md`](../planning/phase2/screens/RECEPTION_SCREEN_PLAN.md) | 受付状況処理画面 設計ドラフト | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`docs/web-client/planning/phase2/screens/CHART_ENTRY_SCREEN_PLAN.md`](../planning/phase2/screens/CHART_ENTRY_SCREEN_PLAN.md) | カルテ記入画面 設計ドラフト | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`docs/web-client/planning/phase2/screens/CHART_ADMIN_SCREEN_PLAN.md`](../planning/phase2/screens/CHART_ADMIN_SCREEN_PLAN.md) | カルテ全般管理画面 設計ドラフト | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`docs/web-client/planning/phase2/logs/20251130T120000Z-login-rework.md`](../planning/phase2/logs/20251130T120000Z-login-rework.md) | 証跡ログ | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`src/webclient_screens_plan/00_RUN_IDと参照チェーン整理.md`](../../../../src/webclient_screens_plan/00_RUN_IDと参照チェーン整理.md) | RUN_ID／参照チェーン整理メモ | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`src/webclient_screens_plan/01_phase2_screens 3 文書の棚卸.md`](../../../../src/webclient_screens_plan/01_phase2_screens 3 文書の棚卸.md) | 受付・カルテ・管理画面のユースケース/API整理と UX ドラフト連携リンク | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`src/webclient_screens_plan/02_画面別 API マッピングとバージョン整合.md`](../../../../src/webclient_screens_plan/02_画面別 API マッピングとバージョン整合.md) | 画面別 API マッピングと監査メタ整合 | Dormant/Archive | 2025-12-03 | Legacy参照専用／RUN_ID=`20251203T203000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T203000Z-phase2-legacy-mark.md` |
| [`docs/web-client/ux/reception-schedule-ui-policy.md`](../../ux/reception-schedule-ui-policy.md) | Reception UX バナー・missingMaster 表示 | Active | 2025-12-04 | RUN_ID=`20251212T090000Z`（実装スクリーンショット/ARIA/監査メタ: `docs/server-modernization/phase2/operations/logs/20251212T090000Z-reception-ux.md` + `artifacts/webclient/ux-notes/20251212T090000Z-reception-ux.md` + `artifacts/webclient/ux-notes/20251212T090000Z-reception-ux.png`）／RUN_ID=`20251204T230000Z`（tone/banner 連携 + missingMaster 集約 + `status-badge` 移動: `docs/server-modernization/phase2/operations/logs/20251204T230000Z-reception-ux.md` + `artifacts/webclient/ux-notes/20251204T230000Z-reception-ux-implementation.md` + `artifacts/webclient/ux-notes/20251204T230000Z-reception-ux-implementation.png` + 本稿更新） |
| [`docs/web-client/operations/debugging-outpatient-bugs.md`](../../operations/debugging-outpatient-bugs.md) | Web クライアント UX/Features | Active | 2025-12-09 | RUN_ID=`20251209T150000Z`。外来 API バグ/差分のデバッグ記録と再現手順を整理。証跡: `docs/server-modernization/phase2/operations/logs/20251209T150000Z-integration-gap-qa.md`、`artifacts/webclient/e2e/20251209T150000Z-integration-gap-fix/`、`artifacts/webclient/debug/20251209T150000Z-bugs/`。未解決: Stage/Preview dev proxy (100.102.17.40:8000/443/8443) が TCP timeout → 復旧後に UI/HAR/telemetry を同 RUN_ID で再取得。 |
| [`src/outpatient_ux_modernization/04C2_WEBクライアントAPI統合実装.md`](../../../../src/outpatient_ux_modernization/04C2_WEBクライアントAPI統合実装.md) | 外来 API 統合実装計画（telemetry funnel） | Active | 2025-12-04 | RUN_ID=`20251204T210000Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251204T210000Z-integration-implementation.md` |
| [`docs/web-client/architecture/web-client-api-mapping.md`](../../architecture/web-client-api-mapping.md) | API 統合設計と `resolveMasterSource` フロー | Active | 2025-12-08 | RUN_ID=`20251208T124645Z`（外来 API stub 実装/telemetry フラグ整合: `docs/server-modernization/phase2/operations/logs/20251208T124645Z-api-gap-implementation.md` + `artifacts/api-stability/20251208T124645Z/outpatient/`）／既存 RUN_ID=`20251204T120000Z`（設計整理: `docs/server-modernization/phase2/operations/logs/20251204T120000Z-integration-design.md` + `artifacts/webclient/ux-notes/20251204T120000Z-integration-design.md`） |
| [`docs/server-modernization/phase2/operations/ORCA_CERTIFICATION_ONLY.md`](../../../server-modernization/phase2/operations/ORCA_CERTIFICATION_ONLY.md) | ORCA 接続ポリシー | Active | 2025-12-03 | RUN_ID=`20251203T134014Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251203T134014Z-orcacertification-only.md` |
| [`docs/archive/2025Q4/web-client/legacy-archive.md`](../../archive/2025Q4/web-client/legacy-archive.md) | Legacy Archive | Archive | 2025-11-30 | 削除された documentation 一式と再開条件、RUN_ID=`20251130T120000Z` を記録。README でリンク。 |
| [`src/outpatient_ux_modernization/03_モダナイズAPIマッピング.md`](../../../../src/outpatient_ux_modernization/03_モダナイズAPIマッピング.md) | 外来 API レスポンス／監査メタの整理 | Active | 2025-12-04 | RUN_ID=`20251204T064209Z`／証跡: `docs/server-modernization/phase2/operations/logs/20251204T064209Z-api-gap.md` (入院 API は「外来スコープ外」と明記) |
| [`src/outpatient_ux_modernization/04C25_モダナイズサーバーAPIギャップ実装.md`](../../../../src/outpatient_ux_modernization/04C25_モダナイズサーバーAPIギャップ実装.md) | 外来 API ギャップ実装状況と検証ログ整理 | Active | 2025-12-09 | RUN_ID=`20251209T120000Z` で解消/未解消/未検証を更新（claim/medical=解消済、appointment audit=未解消、Stage/Preview=未検証）。証跡: `docs/server-modernization/phase2/operations/logs/20251209T120000Z-webclient-04C25.md`。 |
