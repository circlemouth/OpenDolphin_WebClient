# 2025-11-21 ORMaster API パリティ再検証（RUN_ID=20251121T153200Z）

- 接続先: `http://100.102.17.40:8000`（Basic: ormaster/change_me）。Python 不使用、`curl` のみ。
- 目的: Trial Blocker（`Api_Result=12/13/14` や HTTP405）を ORMaster 環境で再評価し、Blocker 理由を更新する。
- 対象 API: `acceptlstv2`, `appointlstv2`, `medicalmodv2`, `acceptmodv2`, `appointmodv2`, `patientmemomodv2`, `receiptprintv3`。
- 証跡: `artifacts/orca-connectivity/20251121T153200Z/{crud,coverage,blocked}`（リクエスト/レスポンス/ヘッダー、Coverage/Blocker メモ）。

## 1. サマリ
- `/api01rv2/acceptlstv2?class=01` → HTTP200 / `Api_Result=13 (ドクターが存在しません)`。
- `/api01rv2/appointlstv2?class=01` → HTTP200 / `Api_Result=12 (ドクターが存在しません)`。
- `/api/api21/medicalmodv2?class=01` → HTTP200 / `Api_Result=10 (該当患者なし)`。
- `/orca11/acceptmodv2?class=01` → HTTP405 `Allow: OPTIONS, GET`（POST 未開放）。
- `/orca14/appointmodv2?class=01` → HTTP405 `Allow: OPTIONS, GET`（POST 未開放）。
- `/orca06/patientmemomodv2` → HTTP405 `Allow: OPTIONS, GET`（POST 未開放）。
- `/orca42/receiptprintv3` → HTTP405 `Allow: OPTIONS, GET`（push/blobs 未構成）。
- Coverage: `coverage/coverage_matrix.md` へステータス転記済み。Blocker 整理は `blocked/README.md` 参照。

## 2. 詳細
### <a id="acceptlstv2"></a>`/api01rv2/acceptlstv2`
- コマンド: `curl -s -u ormaster:change_me -H 'Accept: application/xml' -H 'Content-Type: application/xml' --data-binary @request_2025-11-21.xml http://100.102.17.40:8000/api01rv2/acceptlstv2?class=01`
- Evidence: `crud/acceptlstv2/response_2025-11-21T06-47-07Z.xml`（Api_Result=13）。
- 所見: 医師マスタ不足が継続。doctor code `0001` が API から参照できず。

### <a id="appointlstv2"></a>`/api01rv2/appointlstv2`
- コマンド: `curl -s -u ormaster:change_me ... http://100.102.17.40:8000/api01rv2/appointlstv2?class=01`
- Evidence: `crud/appointlstv2/response_2025-11-21T06-48-07Z.xml`（Api_Result=12）。
- 所見: 医師マスタ不足。

### <a id="medicalmodv2"></a>`/api/api21/medicalmodv2`
- コマンド: `curl -s -u ormaster:change_me ... http://100.102.17.40:8000/api/api21/medicalmodv2?class=01`
- Evidence: `crud/medicalmodv2/response_2025-11-21T06-49-11Z.xml`（Api_Result=10）。
- 所見: `Patient_ID=00000001` を参照できず。患者シード投入後に再実測が必要。

### <a id="acceptmodv2"></a>`/orca11/acceptmodv2`
- コマンド: `curl -s -u ormaster:change_me ... http://100.102.17.40:8000/orca11/acceptmodv2?class=01`
- Evidence: `crud/acceptmodv2/headers_2025-11-21T06-49-58Z.txt` / `response_2025-11-21T06-49-58Z.xml`。
- 所見: HTTP405（Allow: OPTIONS, GET）。Route レベルで POST が閉鎖されたまま。

### <a id="appointmodv2"></a>`/orca14/appointmodv2`
- コマンド: `curl -s -u ormaster:change_me ... http://100.102.17.40:8000/orca14/appointmodv2?class=01`
- Evidence: `crud/appointmodv2/headers_2025-11-21T06-50-48Z.txt` / `response_2025-11-21T06-50-48Z.xml`。
- 所見: HTTP405（Allow: OPTIONS, GET）。Route レベルで POST が閉鎖。

### <a id="patientmemomodv2"></a>`/orca06/patientmemomodv2`
- コマンド: `curl -s -u ormaster:change_me ... http://100.102.17.40:8000/orca06/patientmemomodv2`
- Evidence: `crud/patientmemomodv2/headers_2025-11-21T06-51-39Z.txt` / `response_2025-11-21T06-51-39Z.xml`。
- 所見: HTTP405（Allow: OPTIONS, GET）。患者メモ登録は未開放。

### <a id="receiptprintv3"></a>`/orca42/receiptprintv3`
- コマンド: `curl -s -u ormaster:change_me ... http://100.102.17.40:8000/orca42/receiptprintv3`
- Evidence: `crud/receiptprintv3/headers_2025-11-21T06-52-22Z.txt` / `response_2025-11-21T06-52-22Z.json`。
- 所見: HTTP405（Allow: OPTIONS, GET）。push-exchanger/`/blobapi` 未構成。

## 3. ブロッカー / 次アクション
- データギャップ: 医師コード `0001` / 患者 `00000001` が ORMaster API から参照できない。seed 投入後に `/api01rv2/{acceptlstv2,appointlstv2}`・`/api/api21/medicalmodv2` を再取得し、`Api_Result=00` を確認する。
- POST 未開放: `/orca11/acceptmodv2`、`/orca14/appointmodv2`、`/orca06/patientmemomodv2`、`/orca42/receiptprintv3` がすべて HTTP405（Allow: OPTIONS, GET）。Route 設定 or アプリ側で POST を許可する必要あり。`blocked/README.md` に Blocker 理由を HTTP405(Local) へ更新。
- ドキュメント反映: `MODERNIZED_REST_API_INVENTORY.md` / `API_PARITY_MATRIX.md` / `ORCA_REST_IMPLEMENTATION_NOTES.md` に RUN_ID と Blocker 更新を記載済み。Coverage 表と本ログを `DOC_STATUS` API パリティ欄へリンクする。
