# ORCA dev CRUD (RUN_ID=20251121T231000Z)

- 接続先: 開発用 ORCA（詳細は `docs/web-client/operations/mac-dev-login.local.md` 参照）。全コマンドは curl に Basic 認証を付与し、`Authorization` は保存物で `<MASKED>` 済み。証跡: `artifacts/orca-connectivity/20251121T231000Z/{crud,trace,blocked}`。
- 実行コマンド概要（共通オプション）: `curl -sS -u <MASKED> -H 'Accept: application/xml' -H 'Content-Type: application/xml' -X POST --data-binary <payload>`。trace は `--trace-ascii trace/<api>_<timestamp>.trace` で採取。

## Task-B: 医師/患者登録有無の推定確認（CLI）

| API | HTTP | Api_Result | 推定/補足 | Evidence |
| --- | --- | --- | --- | --- |
| `/api01rv2/patientgetv2?id=00001` | 200 | 00 | 患者 `00001` 登録済み（氏名・保険情報を返却）。 | `crud/patientgetv2/response_20251121T143808Z.xml`, trace: `trace/patientgetv2_20251121T143808Z.trace` |
| `/api01rv2/acceptlstv2?class=01` (doctor=`00001`, dept=`01`, patient=`00001`) | 200 | 21 | 受付データなし。 | `crud/acceptlstv2/response_20251121T143851Z.xml`, trace: `trace/acceptlstv2_20251121T143851Z.trace` |
| `/api01rv2/appointlstv2?class=01` (同上パラメータ) | 200 | 21 | 予約データなし。 | `crud/appointlstv2/response_20251121T143931Z.xml`, trace: `trace/appointlstv2_20251121T143931Z.trace` |
| `/api/api21/medicalmodv2?class=01` (doctor=`00001`, patient=`00001`) | 200 | 14 | 「ドクターが存在しません」→ 医師マスタ未登録と推定。 | `crud/medicalmodv2/response_20251121T144026Z.xml`, trace: `trace/medicalmodv2_20251121T144026Z.trace` |
| `/orca11/acceptmodv2?class=01` | 405 | - | `Allow: OPTIONS, GET`。POST 開放なし。 | `crud/acceptmodv2/headers_20251121T144107Z.txt`, response同名, trace: `trace/acceptmodv2_20251121T144107Z.trace` |
| `/orca14/appointmodv2?class=01` | 405 | - | `Allow: OPTIONS, GET`。POST 開放なし。 | `crud/appointmodv2/headers_20251121T144146Z.txt`, response同名, trace: `trace/appointmodv2_20251121T144146Z.trace` |
| `/api01rv2/acceptlstv2?class=01` (doctor=`0000`, dept=`01`, patient=`00001`) | 200 | 13 | ドクターが存在しません。`0000` も未登録。 | `crud/acceptlstv2/response_20251121T150054Z.xml`, trace: `trace/acceptlstv2_20251121T150054Z.trace` |
| `/api01rv2/appointlstv2?class=01` (doctor=`0000`, dept=`01`, patient=`00001`) | 200 | 12 | ドクターが存在しません。 | `crud/appointlstv2/response_20251121T150138Z.xml`, trace: `trace/appointlstv2_20251121T150138Z.trace` |
| `/api/api21/medicalmodv2?class=01` (doctor=`0000`, patient=`00001`) | 200 | 14 | ドクターが存在しません。 | `crud/medicalmodv2/response_20251121T150200Z.xml`, trace: `trace/medicalmodv2_20251121T150200Z.trace` |
| `/api/api01rv2/acceptlstv2?class=01` (doctor=`10000`, XML2 型付き) | 200 | 00 | 受付正常完了（受付0件だが応答OK）。 | `crud/acceptlstv2/response_typed_10000_20251121T222556Z.xml`, trace: `trace/acceptlstv2_typed_10000_20251121T222556Z.trace` |
| `/api/api01rv2/acceptlstv2?class=01` (doctor=`10001`, XML2 型付き) | 200 | 21 | 受付なし。 | `crud/acceptlstv2/response_typed_10001_20251121T222556Z.xml`, trace: `trace/acceptlstv2_typed_10001_20251121T222556Z.trace` |
| `/api/api01rv2/appointlstv2?class=01` (doctor=`10000`, XML2 型付き) | 200 | 21 | 予約なし。 | `crud/appointlstv2/response_typed_10000_20251121T222556Z.xml`, trace: `trace/appointlstv2_typed_10000_20251121T222556Z.trace` |
| `/api/api01rv2/appointlstv2?class=01` (doctor=`10001`, XML2 型付き) | 200 | 21 | 予約なし。 | `crud/appointlstv2/response_typed_10001_20251121T222556Z.xml`, trace: `trace/appointlstv2_typed_10001_20251121T222556Z.trace` |
| `/api/api21/medicalmodv2?class=01` (doctor=`10000`, XML2 型付き) | 200 | 22 | 登録対象なし。 | `crud/medicalmodv2/response_typed_10000_20251121T222556Z.xml`, trace: `trace/medicalmodv2_typed_10000_20251121T222556Z.trace` |
| `/api/api21/medicalmodv2?class=01` (doctor=`10001`, XML2 型付き) | 200 | 22 | 登録対象なし。 | `crud/medicalmodv2/response_typed_10001_20251121T222556Z.xml`, trace: `trace/medicalmodv2_typed_10001_20251121T222556Z.trace` |
| `/api/api01rv2/system01lstv2?class=02` (Request_Number=02, 再実施) | 200 | 00 | Dr一覧取得成功（10000,10001）。 | `crud/system01lstv2/response_class02_20251121T153320Z.xml` |

### まとめ
- 患者 `00001` は登録済み。Dr一覧は system01lstv2 (class=02, XML2) で取得でき、Dr=10000/10001 を確認。
- XML2で型属性を付け、/api プレフィックスを付与し、受付/予約リクエストから Patient_ID を削除することで POST 無応答は解消し、`acceptlstv2`=00/21、`appointlstv2`=21、`medicalmodv2`=22 と正常応答を取得。
- `medicalmodv2` は対象データ不足で 22。受付/オーダ登録後に再測して 00 を確認する必要あり。
- `/orca11/acceptmodv2` `/orca14/appointmodv2` は引き続き 405（POST 未開放）。
- ブロッカー最新は `artifacts/orca-connectivity/20251121T231000Z/blocked/README.md` を参照。
