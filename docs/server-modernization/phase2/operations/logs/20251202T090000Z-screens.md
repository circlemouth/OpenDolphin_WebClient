# RUN_ID=20251202T090000Z screens棚卸ログ

期間: 2025-12-02 09:00 〜 2025-12-04 09:00 (JST)

- docs/web-client/planning/phase2/screens 以下の 3 文書（Reception/Chart entry/Chart admin）を読み、画面ごとのユースケースと必要な API を抽出。画面間遷移と認証フローも仮説化し、メモ化。
- `src/webclient_screens_plan/01_phase2/screens 3 文書の棚卸.md` を作成し、UX ポリシー草稿（`docs/web-client/ux/*-ui-policy.md`）および manager checklist に沿って RUN_ID を共有するためのアウトラインをまとめた。
- DOC_STATUS の Web クライアント UX 行へ RUN_ID=`20251202T090000Z` を記録し、このログへのリンクを添える予定。次は UX/operations ドラフトへ内容を移植し、API・ORCA 接続証跡との同期を行う。
- Reception/Chart Entry/Chart Admin それぞれについて、ユースケース・主要 UI 要素（一覧/検索/明細表示/編集導線）、依存データと API（取得・保存・権限チェック）、画面遷移・認証フロー前提（ログイン後のロール別遷移や権限不足時のリダイレクト）を肉付けし、ドラフトに反映。
- 参照・同期: `src/webclient_screens_plan/01_phase2/screens 3 文書の棚卸.md`（ユースケース整理メモ）、`docs/web-client/planning/phase2/DOC_STATUS.md`（RUN_ID 反映済み）、`docs/web-client/README.md`、`docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md`。
- RUN_ID=`20251202T090000Z` の UX 草稿（`docs/web-client/ux/reception-schedule-ui-policy.md` / `docs/web-client/ux/charts-claim-ui-policy.md` / `docs/web-client/ux/patients-admin-ui-policy.md`）へ検証観点と未決事項メモを追記し、DOC_STATUS 備考・README・manager checklist と本ログの RUN_ID を同期。
- RUN_ID=`20251202T090000Z` で UX 草稿に Playwright シナリオ案と配信タイミング検証計画を追記し、`docs/web-client/planning/phase2/DOC_STATUS.md` 備考・`docs/web-client/README.md`・`docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md` と本ログで整合を取った。
- RUN_ID=`20251202T090000Z` で UX 草稿に Playwright 実装準備メモと配信観測計画の詳細化を追記し、`docs/web-client/planning/phase2/DOC_STATUS.md` 備考（最終レビュー日更新）・`docs/web-client/README.md`・`docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md` へ反映済み。
- RUN_ID=`20251202T090000Z` で UX 草稿に Playwright ヘルパー試作案とフラグ設計メモを追加し、`docs/web-client/planning/phase2/DOC_STATUS.md`（最終レビュー日更新）・`docs/web-client/README.md`・`docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md` と本ログで再同期した。
- RUN_ID=`20251202T090000Z` で UX 草稿に Playwright ヘルパー実装着手とフィクスチャ計画追記を行い、`docs/web-client/planning/phase2/DOC_STATUS.md`（最終レビュー日更新）・`docs/web-client/README.md`・`docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md` と本ログで整合を再掲。
- RUN_ID=`20251202T090000Z` で UX 草稿に Playwright 設定フラグと未実装ヘルパーの実装完了を追記し、`docs/web-client/planning/phase2/DOC_STATUS.md`（最終レビュー日更新）・`docs/web-client/README.md`・`docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md` と本ログで再同期。
- RUN_ID=`20251202T090000Z` で UX 草稿にヘッダー切替案とヘルパー通し検証準備を追記し、`docs/web-client/planning/phase2/DOC_STATUS.md`（最終レビュー日更新）・`docs/web-client/README.md`・`docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md` と本ログで整合を再掲。
- A: RUN_ID=`20251202T090000Z` の UX 草稿に管理配信検証計画と ORCA キュー/配信フラグ設計案を追加（`docs/web-client/ux/admin-delivery-validation.md`, `docs/web-client/ux/config-toggle-design.md`）。リクエスト先/レスポンス例/ヘッダー有無/監査ログ取得箇所/失敗時リトライ導線を明文化し、README / manager checklist / DOC_STATUS で同 RUN_ID を再掲。
- B: RUN_ID=`20251202T090000Z` の Playwright シナリオ叩き台を追記し、ARIA live / tone / 監査ログ観測・ヘッダー付与検証（`VITE_USE_MOCK_ORCA_QUEUE` / `VITE_VERIFY_ADMIN_DELIVERY`）の前提を整理（`docs/web-client/ux/playwright-scenarios.md`）。モック ON/OFF チェックリストを含めてフラグ設計と連動。
- C: Hub/台帳/manager checklist を更新し、A/B 反映と RUN_ID 整合を再掲（`docs/web-client/planning/phase2/DOC_STATUS.md`, `docs/web-client/README.md`, `docs/managerdocs/PHASE2_WEB_CLIENT_EXPERIENCE_MANAGER_CHECKLIST.md`）。シナリオ前提として `VITE_USE_MOCK_ORCA_QUEUE=0/1`, `VITE_VERIFY_ADMIN_DELIVERY=1` の設定例を共有。
- Playwright 実行結果: RUN_ID=`20251202T090000Z` の A/B モック分岐シナリオを実行し、ヘッダー付与の有無とレスポンス差分を `docs/web-client/ux/playwright-scenarios.md` と `docs/web-client/ux/config-toggle-design.md` に反映。モック ON（キュー投入のみ）/OFF（実 API 送信）の挙動差分を本ログで参照できるようリンクを維持。
- A/B/C 更新反映: RUN_ID=`20251202T090000Z` で Playwright テストを追加し、モック分岐の強化（ON/OFF双方向検証）と監査ログ正規化メモを `docs/web-client/ux/playwright-scenarios.md` / `docs/web-client/ux/config-toggle-design.md` に追記。Hub/台帳/manager checklist にテスト有無と RUN_ID を再掲。
- RUN_ID=`20251202T090000Z` で Patients→Reception 戻り導線（フィルタ保持・保険/自費モード維持・権限ガード）、Administration 配信遅延時の警告/リトライ導線、モック ON/OFF のレスポンス差分・監査ログ項目・ヘッダー有無を `docs/web-client/ux/patients-admin-ui-policy.md` / `docs/web-client/ux/admin-delivery-validation.md` / `docs/web-client/ux/config-toggle-design.md` に追記し、本ログで反映先を明示（異常時は本ログへ RUN_ID 付きで記録する運用を明文化）。
- Reception/Charts の ORCA エラー・未紐付・送信キュー遅延バナーの tone/`aria-live` 方針を統一し（Error=赤/assertive, Warning=琥珀/assertive, Info=青/polite）、`data-run-id=20251202T090000Z` を付与するルールと carry over 手順を `docs/web-client/ux/reception-schedule-ui-policy.md` / `docs/web-client/ux/charts-claim-ui-policy.md` に追記。ステータス遷移（受付→診療開始→診療終了→会計完了）とロール別可否、自動/手動更新時の監査ログ出力も明文化。
- Playwright シナリオにモック ON/OFF（`VITE_USE_MOCK_ORCA_QUEUE` / `VITE_VERIFY_ADMIN_DELIVERY`）でのバナー tone/ライブリージョン検証と診療終了解除パスを追加し、再送遅延計測と `fetchAuditLog` での `ariaLive`/`tone`/`queueStatus` 確認を前提化。
- ハブ整合確認完了（修正あり: manager checklist の参照順に `docs/server-modernization/phase2/INDEX.md` を追加してチェーンを同期）。
- 次ステップ: 肉付けした内容を UX 草稿へ移植し、README / manager checklist の RUN_ID・リンク整合を維持する。
