# RUN_ID=20251116T134343Z `/orca14/appointmodv2` Trial ログ

- 参照チェーン: `AGENTS.md` → `docs/web-client/README.md` → `docs/server-modernization/phase2/INDEX.md` → `PHASE2_ORCA_PHR_GAP_MANAGER_CHECKLIST.md`。
- 対象: モダナイズ REST `POST /orca/appointments/mutation` 実装および Web クライアント予約画面の ORCA ラッパー切替。
- 実装概要: `server-modernized/src/main/java/open/dolphin/orca/rest/OrcaAppointmentResource.java` / `open/dolphin/orca/service/OrcaWrapperService.java` へ appointmodv2 DTO・Facade を追加し、`web-client/src/features/reception/api/appointment-api.ts` ほかで `/orca/appointments/*` に切替。詳細は PR diff 参照。

## 1. Trial 実行計画
| 手順 | コマンド | 備考 |
| --- | --- | --- |
| 1 | `curl -vv -u <MASKED>:<MASKED> --data-binary @payloads/appointmod_trial.xml https://weborca-trial.orca.med.or.jp/orca14/appointmodv2?class=01` | HTTP 405 想定。`artifacts/orca-connectivity/20251116T134343Z/appointmodv2/trial/` に request/response/XML を保存する。 |
| 2 | `curl -vv -u ormaster:ormaster https://ormaster.orca.med.or.jp/orca14/appointmodv2?class=01` | ORMaster での代替実測。DNS 開放が必要。 |

CLI サンドボックスは `network_access=restricted` のため実コマンドは未実行。許可端末で再測する際は上記コマンドを再利用し、本ログと同じ RUN_ID を付与すること。

## 2. 成果物
- ソース: `server-modernized/src/main/java/open/dolphin/rest/dto/orca/AppointmentMutationRequest.java` 他 12 ファイル。
- Web クライアント: 予約一覧取得／保存が `/orca/appointments/{list,mutation}` を使用。
- 証跡プレースホルダ: `artifacts/orca-connectivity/20251116T134343Z/appointmodv2/README.md`。

## 3. 次アクション
1. ネットワーク許可済み環境で上記 curl を実行し、HTTP 405 → 200 の挙動を採取。
2. `docs/server-modernization/phase2/operations/ORCA_API_STATUS.md` Matrix No.2 を `[Spec-based]` から `[TrialPending]` に更新。
3. Web クライアント側で ORCA 応答 (Api_Result, Appointment_Id) を UI と SSE へ反映する追加タスクを検討。
